//! Mirador 0.8.0
//! Built on 2013-10-28
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
*/
(function(t,e){function n(t){var e=t.length,n=le.type(t);return le.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=Te[t]={};return le.each(t.match(he)||[],function(t,n){e[n]=!0}),e}function r(t,n,i,r){if(le.acceptData(t)){var o,s,a=le.expando,l="string"==typeof n,u=t.nodeType,h=u?le.cache:t,c=u?t[a]:t[a]&&a;if(c&&h[c]&&(r||h[c].data)||!l||i!==e)return c||(u?t[a]=c=J.pop()||le.guid++:c=a),h[c]||(h[c]={},u||(h[c].toJSON=le.noop)),("object"==typeof n||"function"==typeof n)&&(r?h[c]=le.extend(h[c],n):h[c].data=le.extend(h[c].data,n)),o=h[c],r||(o.data||(o.data={}),o=o.data),i!==e&&(o[le.camelCase(n)]=i),l?(s=o[n],null==s&&(s=o[le.camelCase(n)])):s=o,s}}function o(t,e,n){if(le.acceptData(t)){var i,r,o,s=t.nodeType,l=s?le.cache:t,u=s?t[le.expando]:le.expando;if(l[u]){if(e&&(o=n?l[u]:l[u].data)){le.isArray(e)?e=e.concat(le.map(e,le.camelCase)):e in o?e=[e]:(e=le.camelCase(e),e=e in o?[e]:e.split(" "));for(i=0,r=e.length;r>i;i++)delete o[e[i]];if(!(n?a:le.isEmptyObject)(o))return}(n||(delete l[u].data,a(l[u])))&&(s?le.cleanData([t],!0):le.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}}function s(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(Ee,"-$1").toLowerCase();if(i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?le.parseJSON(i):i}catch(o){}le.data(t,n,i)}else i=e}return i}function a(t){var e;for(e in t)if(("data"!==e||!le.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function u(){return!1}function h(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function c(t,e,n){if(e=e||0,le.isFunction(e))return le.grep(t,function(t,i){var r=!!e.call(t,i,t);return r===n});if(e.nodeType)return le.grep(t,function(t){return t===e===n});if("string"==typeof e){var i=le.grep(t,function(t){return 1===t.nodeType});if(Ue.test(e))return le.filter(e,i,!n);e=le.filter(e,i)}return le.grep(t,function(t){return le.inArray(t,e)>=0===n})}function d(t){var e=qe.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function p(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function f(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function g(t){var e=on.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n,i=0;null!=(n=t[i]);i++)le._data(n,"globalEval",!e||le._data(e[i],"globalEval"))}function v(t,e){if(1===e.nodeType&&le.hasData(t)){var n,i,r,o=le._data(t),s=le._data(e,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)le.event.add(e,n,a[n][i])}s.data&&(s.data=le.extend({},s.data))}}function y(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!le.support.noCloneEvent&&e[le.expando]){r=le._data(e);for(i in r.events)le.removeEvent(e,i,r.handle);e.removeAttribute(le.expando)}"script"===n&&e.text!==t.text?(f(e).text=t.text,g(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),le.support.html5Clone&&t.innerHTML&&!le.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&en.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function b(t,n){var i,r,o=0,s=typeof t.getElementsByTagName!==G?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==G?t.querySelectorAll(n||"*"):e;if(!s)for(s=[],i=t.childNodes||t;null!=(r=i[o]);o++)!n||le.nodeName(r,n)?s.push(r):le.merge(s,b(r,n));return n===e||n&&le.nodeName(t,n)?le.merge([t],s):s}function w(t){en.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=En.length;r--;)if(e=En[r]+n,e in t)return e;return i}function S(t,e){return t=e||t,"none"===le.css(t,"display")||!le.contains(t.ownerDocument,t)}function T(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=le._data(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(o[s]=le._data(i,"olddisplay",C(i.nodeName)))):o[s]||(r=S(i),(n&&"none"!==n||!r)&&le._data(i,"olddisplay",r?n:le.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function _(t,e,n){var i=yn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function E(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=le.css(t,n+_n[o],!0,r)),i?("content"===n&&(s-=le.css(t,"padding"+_n[o],!0,r)),"margin"!==n&&(s-=le.css(t,"border"+_n[o]+"Width",!0,r))):(s+=le.css(t,"padding"+_n[o],!0,r),"padding"!==n&&(s+=le.css(t,"border"+_n[o]+"Width",!0,r)));return s}function M(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=cn(t),s=le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=dn(t,e,o),(0>r||null==r)&&(r=t.style[e]),bn.test(r))return r;i=s&&(le.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+E(t,e,n||(s?"border":"content"),i,o)+"px"}function C(t){var e=Q,n=xn[t];return n||(n=k(t,e),"none"!==n&&n||(hn=(hn||le("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(hn[0].contentWindow||hn[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=k(t,e),hn.detach()),xn[t]=n),n}function k(t,e){var n=le(e.createElement(t)).appendTo(e.body),i=le.css(n[0],"display");return n.remove(),i}function H(t,e,n,i){var r;if(le.isArray(e))le.each(e,function(e,r){n||Cn.test(t)?i(t,r):H(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==le.type(e))i(t,e);else for(r in e)H(t+"["+r+"]",e[r],n,i)}function N(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(he)||[];if(le.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function P(t,n,i,r){function o(l){var u;return s[l]=!0,le.each(t[l]||[],function(t,l){var h=l(n,i,r);return"string"!=typeof h||a||s[h]?a?!(u=h):e:(n.dataTypes.unshift(h),o(h),!1)}),u}var s={},a=t===Vn;return o(n.dataTypes[0])||!s["*"]&&o("*")}function z(t,n){var i,r,o=le.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&le.extend(!0,t,i),t}function I(t,n,i){var r,o,s,a,l=t.contents,u=t.dataTypes,h=t.responseFields;for(a in h)a in i&&(n[h[a]]=i[a]);for(;"*"===u[0];)u.shift(),o===e&&(o=t.mimeType||n.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){u.unshift(a);break}if(u[0]in i)s=u[0];else{for(a in i){if(!u[0]||t.converters[a+" "+u[0]]){s=a;break}r||(r=a)}s=s||r}return s?(s!==u[0]&&u.unshift(s),i[s]):e}function O(t,e){var n,i,r,o,s={},a=0,l=t.dataTypes.slice(),u=l[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l[1])for(r in t.converters)s[r.toLowerCase()]=t.converters[r];for(;i=l[++a];)if("*"!==i){if("*"!==u&&u!==i){if(r=s[u+" "+i]||s["* "+i],!r)for(n in s)if(o=n.split(" "),o[1]===i&&(r=s[u+" "+o[0]]||s["* "+o[0]])){r===!0?r=s[n]:s[n]!==!0&&(i=o[0],l.splice(a--,0,i));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(h){return{state:"parsererror",error:r?h:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:e}}function A(){try{return new t.XMLHttpRequest}catch(e){}}function D(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function L(){return setTimeout(function(){Jn=e}),Jn=le.now()}function R(t,e){le.each(e,function(e,n){for(var i=(oi[e]||[]).concat(oi["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(t,e,n))return})}function j(t,e,n){var i,r,o=0,s=ri.length,a=le.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Jn||L(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(t,[u,o,n]),1>o&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:le.extend({},e),opts:le.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Jn||L(),duration:n.duration,tweens:[],createTween:function(e,n){var i=le.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),h=u.props;for(B(h,u.opts.specialEasing);s>o;o++)if(i=ri[o].call(u,t,h,u.opts))return i;return R(u,h),le.isFunction(u.opts.start)&&u.opts.start.call(t,u),le.fx.timer(le.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(t,e){var n,i,r,o,s;for(r in t)if(i=le.camelCase(r),o=e[i],n=t[r],le.isArray(n)&&(o=n[1],n=t[r]=n[0]),r!==i&&(t[i]=n,delete t[r]),s=le.cssHooks[i],s&&"expand"in s){n=s.expand(n),delete t[i];for(r in n)r in t||(t[r]=n[r],e[r]=o)}else e[i]=o}function F(t,e,n){var i,r,o,s,a,l,u,h,c,d=this,p=t.style,f={},g=[],m=t.nodeType&&S(t);n.queue||(h=le._queueHooks(t,"fx"),null==h.unqueued&&(h.unqueued=0,c=h.empty.fire,h.empty.fire=function(){h.unqueued||c()}),h.unqueued++,d.always(function(){d.always(function(){h.unqueued--,le.queue(t,"fx").length||h.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===le.css(t,"display")&&"none"===le.css(t,"float")&&(le.support.inlineBlockNeedsLayout&&"inline"!==C(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",le.support.shrinkWrapBlocks||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(s=e[r],ei.exec(s)){if(delete e[r],l=l||"toggle"===s,s===(m?"hide":"show"))continue;g.push(r)}if(o=g.length){a=le._data(t,"fxshow")||le._data(t,"fxshow",{}),"hidden"in a&&(m=a.hidden),l&&(a.hidden=!m),m?le(t).show():d.done(function(){le(t).hide()}),d.done(function(){var e;le._removeData(t,"fxshow");for(e in f)le.style(t,e,f[e])});for(r=0;o>r;r++)i=g[r],u=d.createTween(i,m?a[i]:0),f[i]=a[i]||le.style(t,i),i in a||(a[i]=u.start,m&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function W(t,e,n,i,r){return new W.prototype.init(t,e,n,i,r)}function U(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=_n[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function V(t){return le.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var $,q,G=typeof e,Q=t.document,X=t.location,Z=t.jQuery,Y=t.$,K={},J=[],te="1.9.1",ee=J.concat,ne=J.push,ie=J.slice,re=J.indexOf,oe=K.toString,se=K.hasOwnProperty,ae=te.trim,le=function(t,e){return new le.fn.init(t,e,q)},ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=/\S+/g,ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,de=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^[\],:{}\s]*$/,ge=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ye=/^-ms-/,be=/-([\da-z])/gi,we=function(t,e){return e.toUpperCase()},xe=function(t){(Q.addEventListener||"load"===t.type||"complete"===Q.readyState)&&(Se(),le.ready())},Se=function(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",xe,!1),t.removeEventListener("load",xe,!1)):(Q.detachEvent("onreadystatechange",xe),t.detachEvent("onload",xe))};le.fn=le.prototype={jquery:te,constructor:le,init:function(t,n,i){var r,o;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:de.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof le?n[0]:n,le.merge(this,le.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:Q,!0)),pe.test(r[1])&&le.isPlainObject(n))for(r in n)le.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(o=Q.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(t);this.length=1,this[0]=o}return this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):le.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),le.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ie.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=le.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return le.each(this,t,e)},ready:function(t){return le.ready.promise().done(t),this},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(le.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},le.fn.init.prototype=le.fn,le.extend=le.fn.extend=function(){var t,n,i,r,o,s,a=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||le.isFunction(a)||(a={}),u===l&&(a=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(r in o)t=a[r],i=o[r],a!==i&&(h&&i&&(le.isPlainObject(i)||(n=le.isArray(i)))?(n?(n=!1,s=t&&le.isArray(t)?t:[]):s=t&&le.isPlainObject(t)?t:{},a[r]=le.extend(h,s,i)):i!==e&&(a[r]=i));return a},le.extend({noConflict:function(e){return t.$===le&&(t.$=Y),e&&t.jQuery===le&&(t.jQuery=Z),le},isReady:!1,readyWait:1,holdReady:function(t){t?le.readyWait++:le.ready(!0)},ready:function(t){if(t===!0?!--le.readyWait:!le.isReady){if(!Q.body)return setTimeout(le.ready);le.isReady=!0,t!==!0&&--le.readyWait>0||($.resolveWith(Q,[le]),le.fn.trigger&&le(Q).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===le.type(t)},isArray:Array.isArray||function(t){return"array"===le.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[oe.call(t)]||"object":typeof t},isPlainObject:function(t){if(!t||"object"!==le.type(t)||t.nodeType||le.isWindow(t))return!1;try{if(t.constructor&&!se.call(t,"constructor")&&!se.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return i===e||se.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Q;var i=pe.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=le.buildFragment([t],e,r),r&&le(r).remove(),le.merge([],i.childNodes))},parseJSON:function(n){return t.JSON&&t.JSON.parse?t.JSON.parse(n):null===n?n:"string"==typeof n&&(n=le.trim(n),n&&fe.test(n.replace(me,"@").replace(ve,"]").replace(ge,"")))?Function("return "+n)():(le.error("Invalid JSON: "+n),e)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&le.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ye,"ms-").replace(be,we)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:ae&&!ae.call("﻿ ")?function(t){return null==t?"":ae.call(t)}:function(t){return null==t?"":(t+"").replace(ce,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?le.merge(i,"string"==typeof t?[t]:t):ne.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(re)return re.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;i>o;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,s=t.length;for(n=!!n;s>o;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&(l[l.length]=r);else for(o in t)r=e(t[o],o,i),null!=r&&(l[l.length]=r);return ee.apply([],l)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(o=t[n],n=t,t=o),le.isFunction(t)?(i=ie.call(arguments,2),r=function(){return t.apply(n||this,i.concat(ie.call(arguments)))},r.guid=t.guid=t.guid||le.guid++,r):e},access:function(t,n,i,r,o,s,a){var l=0,u=t.length,h=null==i;if("object"===le.type(i)){o=!0;for(l in i)le.access(t,n,l,i[l],!0,s,a)}else if(r!==e&&(o=!0,le.isFunction(r)||(a=!0),h&&(a?(n.call(t,r),n=null):(h=n,n=function(t,e,n){return h.call(le(t),n)})),n))for(;u>l;l++)n(t[l],i,a?r:r.call(t[l],l,n(t[l],i)));return o?t:h?n.call(t):u?n(t[0],i):s},now:function(){return(new Date).getTime()}}),le.ready.promise=function(e){if(!$)if($=le.Deferred(),"complete"===Q.readyState)setTimeout(le.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",xe,!1),t.addEventListener("load",xe,!1);else{Q.attachEvent("onreadystatechange",xe),t.attachEvent("onload",xe);var n=!1;try{n=null==t.frameElement&&Q.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!le.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}Se(),le.ready()}}()}return $.promise(e)},le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),q=le(Q);var Te={};le.Callbacks=function(t){t="string"==typeof t?Te[t]||i(t):le.extend({},t);var n,r,o,s,a,l,u=[],h=!t.once&&[],c=function(e){for(r=t.memory&&e,o=!0,a=l||0,l=0,s=u.length,n=!0;u&&s>a;a++)if(u[a].apply(e[0],e[1])===!1&&t.stopOnFalse){r=!1;break}n=!1,u&&(h?h.length&&c(h.shift()):r?u=[]:d.disable())},d={add:function(){if(u){var e=u.length;(function i(e){le.each(e,function(e,n){var r=le.type(n);"function"===r?t.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=u.length:r&&(l=e,c(r))}return this},remove:function(){return u&&le.each(arguments,function(t,e){for(var i;(i=le.inArray(e,u,i))>-1;)u.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(t){return t?le.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=h=r=e,this},disabled:function(){return!u},lock:function(){return h=e,r||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!u||o&&!h||(n?h.push(e):c(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},le.extend({Deferred:function(t){var e=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return le.Deferred(function(n){le.each(e,function(e,o){var s=o[0],a=le.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&le.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?le.extend(t,i):i}},r={};return i.pipe=i.then,le.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=ie.call(arguments),s=o.length,a=1!==s||t&&le.isFunction(t.promise)?s:0,l=1===a?t:le.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?ie.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&le.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,e)):--a;return a||l.resolveWith(i,o),l.promise()}}),le.support=function(){var e,n,i,r,o,s,a,l,u,h,c=Q.createElement("div");if(c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=c.getElementsByTagName("*"),i=c.getElementsByTagName("a")[0],!n||!i||!n.length)return{};o=Q.createElement("select"),a=o.appendChild(Q.createElement("option")),r=c.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==c.className,leadingWhitespace:3===c.firstChild.nodeType,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!r.value,optSelected:a.selected,enctype:!!Q.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===Q.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},r.checked=!0,e.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!a.disabled;try{delete c.test}catch(d){e.deleteExpando=!1}r=Q.createElement("input"),r.setAttribute("value",""),e.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),e.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),s=Q.createDocumentFragment(),s.appendChild(r),e.appendChecked=r.checked,e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,c.attachEvent&&(c.attachEvent("onclick",function(){e.noCloneEvent=!1}),c.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})c.setAttribute(l="on"+h,"t"),e[h+"Bubbles"]=l in t||c.attributes[l].expando===!1;return c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===c.style.backgroundClip,le(function(){var n,i,r,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=Q.getElementsByTagName("body")[0];s&&(n=Q.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(c),c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=c.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=u&&0===r[0].offsetHeight,c.innerHTML="",c.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===c.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(c,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(c,null)||{width:"4px"}).width,i=c.appendChild(Q.createElement("div")),i.style.cssText=c.style.cssText=o,i.style.marginRight=i.style.width="0",c.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof c.style.zoom!==G&&(c.innerHTML="",c.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===c.offsetWidth,c.style.display="block",c.innerHTML="<div></div>",c.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==c.offsetWidth,e.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=c=r=i=null)}),n=o=s=a=i=r=null,e}();var _e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ee=/([A-Z])/g;le.extend({cache:{},expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?le.cache[t[le.expando]]:t[le.expando],!!t&&!a(t)},data:function(t,e,n){return r(t,e,n)},removeData:function(t,e){return o(t,e)},_data:function(t,e,n){return r(t,e,n,!0)},_removeData:function(t,e){return o(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&le.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),le.fn.extend({data:function(t,n){var i,r,o=this[0],a=0,l=null;if(t===e){if(this.length&&(l=le.data(o),1===o.nodeType&&!le._data(o,"parsedAttrs"))){for(i=o.attributes;i.length>a;a++)r=i[a].name,r.indexOf("data-")||(r=le.camelCase(r.slice(5)),s(o,r,l[r]));le._data(o,"parsedAttrs",!0)}return l}return"object"==typeof t?this.each(function(){le.data(this,t)}):le.access(this,function(n){return n===e?o?s(o,t,le.data(o,t)):null:(this.each(function(){le.data(this,t,n)}),e)},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){le.removeData(this,t)})}}),le.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=le._data(t,n),i&&(!r||le.isArray(i)?r=le._data(t,n,le.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=le.queue(t,e),i=n.length,r=n.shift(),o=le._queueHooks(t,e),s=function(){le.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),o.cur=r,r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return le._data(t,n)||le._data(t,n,{empty:le.Callbacks("once memory").add(function(){le._removeData(t,e+"queue"),le._removeData(t,n)})})}}),le.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?le.queue(this[0],t):n===e?this:this.each(function(){var e=le.queue(this,t,n);le._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&le.dequeue(this,t)})},dequeue:function(t){return this.each(function(){le.dequeue(this,t)})},delay:function(t,e){return t=le.fx?le.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=le.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=le._data(s[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var Me,Ce,ke=/[\t\r\n]/g,He=/\r/g,Ne=/^(?:input|select|textarea|button|object)$/i,Pe=/^(?:a|area)$/i,ze=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ie=/^(?:checked|selected)$/i,Oe=le.support.getSetAttribute,Ae=le.support.input;le.fn.extend({attr:function(t,e){return le.access(this,le.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){le.removeAttr(this,t)})},prop:function(t,e){return le.access(this,le.prop,t,e,arguments.length>1)},removeProp:function(t){return t=le.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,o,s=0,a=this.length,l="string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=le.trim(i)}return this},removeClass:function(t){var e,n,i,r,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?le.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return le.isFunction(t)?this.each(function(n){le(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,o=0,s=le(this),a=e,l=t.match(he)||[];r=l[o++];)a=i?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else(n===G||"boolean"===n)&&(this.className&&le._data(this,"__className__",this.className),this.className=this.className||t===!1?"":le._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ke," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];return arguments.length?(r=le.isFunction(t),this.each(function(n){var o,s=le(this);1===this.nodeType&&(o=r?t.call(this,n,s.val()):t,null==o?o="":"number"==typeof o?o+="":le.isArray(o)&&(o=le.map(o,function(t){return null==t?"":t+""})),i=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==e||(this.value=o))})):o?(i=le.valHooks[o.type]||le.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==e?n:(n=o.value,"string"==typeof n?n.replace(He,""):null==n?"":n)):void 0}}),le.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(le.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&le.nodeName(n.parentNode,"optgroup"))){if(e=le(n).val(),o)return e;s.push(e)}return s},set:function(t,e){var n=le.makeArray(e);return le(t).find("option").each(function(){this.selected=le.inArray(le(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attr:function(t,n,i){var r,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?typeof t.getAttribute===G?le.prop(t,n,i):(o=1!==a||!le.isXMLDoc(t),o&&(n=n.toLowerCase(),r=le.attrHooks[n]||(ze.test(n)?Ce:Me)),i===e?r&&o&&"get"in r&&null!==(s=r.get(t,n))?s:(typeof t.getAttribute!==G&&(s=t.getAttribute(n)),null==s?e:s):null!==i?r&&o&&"set"in r&&(s=r.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(le.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(he);if(o&&1===t.nodeType)for(;n=o[r++];)i=le.propFix[n]||n,ze.test(n)?!Oe&&Ie.test(n)?t[le.camelCase("default-"+n)]=t[i]=!1:t[i]=!1:le.attr(t,n,""),t.removeAttribute(Oe?n:i)},attrHooks:{type:{set:function(t,e){if(!le.support.radioValue&&"radio"===e&&le.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!le.isXMLDoc(t),s&&(n=le.propFix[n]||n,o=le.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ne.test(t.nodeName)||Pe.test(t.nodeName)&&t.href?0:e}}}}),Ce={get:function(t,n){var i=le.prop(t,n),r="boolean"==typeof i&&t.getAttribute(n),o="boolean"==typeof i?Ae&&Oe?null!=r:Ie.test(n)?t[le.camelCase("default-"+n)]:!!r:t.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():e
},set:function(t,e,n){return e===!1?le.removeAttr(t,n):Ae&&Oe||!Ie.test(n)?t.setAttribute(!Oe&&le.propFix[n]||n,n):t[le.camelCase("default-"+n)]=t[n]=!0,n}},Ae&&Oe||(le.attrHooks.value={get:function(t,n){var i=t.getAttributeNode(n);return le.nodeName(t,"input")?t.defaultValue:i&&i.specified?i.value:e},set:function(t,n,i){return le.nodeName(t,"input")?(t.defaultValue=n,e):Me&&Me.set(t,n,i)}}),Oe||(Me=le.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:e},set:function(t,n,i){var r=t.getAttributeNode(i);return r||t.setAttributeNode(r=t.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},le.attrHooks.contenteditable={get:Me.get,set:function(t,e,n){Me.set(t,""===e?!1:e,n)}},le.each(["width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{set:function(t,i){return""===i?(t.setAttribute(n,"auto"),i):e}})})),le.support.hrefNormalized||(le.each(["href","src","width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null==i?e:i}})}),le.each(["href","src"],function(t,e){le.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),le.support.style||(le.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),le.support.optSelected||(le.propHooks.selected=le.extend(le.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),le.support.enctype||(le.propFix.enctype="encoding"),le.support.checkOn||le.each(["radio","checkbox"],function(){le.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]=le.extend(le.valHooks[this],{set:function(t,n){return le.isArray(n)?t.checked=le.inArray(le(t).val(),n)>=0:e}})});var De=/^(?:input|select|textarea)$/i,Le=/^key/,Re=/^(?:mouse|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,Be=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(t,n,i,r,o){var s,a,l,u,h,c,d,p,f,g,m,v=le._data(t);if(v){for(i.handler&&(u=i,i=u.handler,o=u.selector),i.guid||(i.guid=le.guid++),(a=v.events)||(a=v.events={}),(c=v.handle)||(c=v.handle=function(t){return typeof le===G||t&&le.event.triggered===t.type?e:le.event.dispatch.apply(c.elem,arguments)},c.elem=t),n=(n||"").match(he)||[""],l=n.length;l--;)s=Be.exec(n[l])||[],f=m=s[1],g=(s[2]||"").split(".").sort(),h=le.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=le.event.special[f]||{},d=le.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&le.expr.match.needsContext.test(o),namespace:g.join(".")},u),(p=a[f])||(p=a[f]=[],p.delegateCount=0,h.setup&&h.setup.call(t,r,g,c)!==!1||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),le.event.global[f]=!0;t=null}},remove:function(t,e,n,i,r){var o,s,a,l,u,h,c,d,p,f,g,m=le.hasData(t)&&le._data(t);if(m&&(h=m.events)){for(e=(e||"").match(he)||[""],u=e.length;u--;)if(a=Be.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(c=le.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=h[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!r&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(t,s));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,m.handle)!==!1||le.removeEvent(t,p,m.handle),delete h[p])}else for(p in h)le.event.remove(t,p+e[u],n,i,!0);le.isEmptyObject(h)&&(delete m.handle,le._removeData(t,"events"))}},trigger:function(n,i,r,o){var s,a,l,u,h,c,d,p=[r||Q],f=se.call(n,"type")?n.type:n,g=se.call(n,"namespace")?n.namespace.split("."):[];if(l=c=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!je.test(f+le.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),a=0>f.indexOf(":")&&"on"+f,n=n[le.expando]?n:new le.Event(f,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:le.makeArray(i,[n]),h=le.event.special[f]||{},o||!h.trigger||h.trigger.apply(r,i)!==!1)){if(!o&&!h.noBubble&&!le.isWindow(r)){for(u=h.delegateType||f,je.test(u+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),c=l;c===(r.ownerDocument||Q)&&p.push(c.defaultView||c.parentWindow||t)}for(d=0;(l=p[d++])&&!n.isPropagationStopped();)n.type=d>1?u:h.bindType||f,s=(le._data(l,"events")||{})[n.type]&&le._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&le.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!(o||n.isDefaultPrevented()||h._default&&h._default.apply(r.ownerDocument,i)!==!1||"click"===f&&le.nodeName(r,"a")||!le.acceptData(r)||!a||!r[f]||le.isWindow(r))){c=r[a],c&&(r[a]=null),le.event.triggered=f;try{r[f]()}catch(m){}le.event.triggered=e,c&&(r[a]=c)}return n.result}},dispatch:function(t){t=le.event.fix(t);var n,i,r,o,s,a=[],l=ie.call(arguments),u=(le._data(this,"events")||{})[t.type]||[],h=le.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=le.event.handlers.call(this,t,u),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(r=o.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,i=((le.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,o,s,a=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(o=[],s=0;l>s;s++)r=n[s],i=r.selector+" ",o[i]===e&&(o[i]=r.needsContext?le(i,this).index(u)>=0:le.find(i,this,null,[u]).length),o[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(t){if(t[le.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Re.test(r)?this.mouseHooks:Le.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new le.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=o.srcElement||Q),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,s=n.button,a=n.fromElement;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||Q,o=r.documentElement,i=r.body,t.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?n.toElement:a),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return le.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):e}},focus:{trigger:function(){if(this!==Q.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===Q.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=le.extend(new le.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?le.event.trigger(r,null,e):le.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},le.removeEvent=Q.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===G&&(t[i]=null),t.detachEvent(i,n))},le.Event=function(t,n){return this instanceof le.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:u):this.type=t,n&&le.extend(this,n),this.timeStamp=t&&t.timeStamp||le.now(),this[le.expando]=!0,e):new le.Event(t,n)},le.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){le.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!le.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),le.support.submitBubbles||(le.event.special.submit={setup:function(){return le.nodeName(this,"form")?!1:(le.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=le.nodeName(n,"input")||le.nodeName(n,"button")?n.form:e;i&&!le._data(i,"submitBubbles")&&(le.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),le._data(i,"submitBubbles",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&le.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return le.nodeName(this,"form")?!1:(le.event.remove(this,"._submit"),e)}}),le.support.changeBubbles||(le.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(le.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,t,!0)})),!1):(le.event.add(this,"beforeactivate._change",function(t){var e=t.target;De.test(e.nodeName)&&!le._data(e,"changeBubbles")&&(le.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||le.event.simulate("change",this.parentNode,t,!0)}),le._data(e,"changeBubbles",!0))}),e)},handle:function(t){var n=t.target;return this!==n||t.isSimulated||t.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return le.event.remove(this,"._change"),!De.test(this.nodeName)}}),le.support.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){le.event.simulate(e,t.target,le.event.fix(t),!0)};le.event.special[e]={setup:function(){0===n++&&Q.addEventListener(t,i,!0)},teardown:function(){0===--n&&Q.removeEventListener(t,i,!0)}}}),le.fn.extend({on:function(t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(s in t)this.on(s,n,i,t[s],o);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=u;else if(!r)return this;return 1===o&&(a=r,r=function(t){return le().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=le.guid++)),this.each(function(){le.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,le(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=u),this.each(function(){le.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){le.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?le.event.trigger(t,n,i,!0):e}}),function(t,e){function n(t){return fe.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>_.cacheLength&&delete t[e.shift()],t[n]=i}}function r(t){return t[j]=!0,t}function o(t){var e=P.createElement("div");try{return t(e)}catch(n){return!1}finally{e=null}}function s(t,e,n,i){var r,o,s,a,l,u,h,p,f,g;if((e?e.ownerDocument||e:B)!==P&&N(e),e=e||P,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(!I&&!i){if(r=ge.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&L(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Y.apply(n,K.call(e.getElementsByTagName(t),0)),n;if((s=r[3])&&F.getByClassName&&e.getElementsByClassName)return Y.apply(n,K.call(e.getElementsByClassName(s),0)),n}if(F.qsa&&!O.test(t)){if(h=!0,p=j,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=c(t),(h=e.getAttribute("id"))?p=h.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=pe.test(t)&&e.parentNode||e,g=u.join(",")}if(g)try{return Y.apply(n,K.call(f.querySelectorAll(g),0)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return w(t.replace(se,"$1"),e,n,i)}function a(t,e){var n=e&&t,i=n&&(~e.sourceIndex||Q)-(~t.sourceIndex||Q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return r(function(e){return e=+e,r(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(t,e){var n,i,r,o,a,l,u,h=$[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],u=_.preFilter;a;){(!n||(i=ae.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=ue.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(se," ")}),a=a.slice(n.length));for(o in _.filter)!(i=de[o].exec(a))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):$(t,l).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=U++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,u,h=W+" "+o;if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=e[j]||(e[j]={}),(l=u[i])&&l[0]===h){if((a=l[1])===!0||a===T)return a===!0}else if(l=u[i]=[h],l[1]=t(e,n,s)||T,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),u&&e.push(a));return s}function m(t,e,n,i,o,s){return i&&!i[j]&&(i=m(i)),o&&!o[j]&&(o=m(o,s)),r(function(r,s,a,l){var u,h,c,d=[],p=[],f=s.length,m=r||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?m:g(m,d,t,a,l),y=n?o||(r?t:f||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(u=g(y,p),i(u,[],a,l),h=u.length;h--;)(c=u[h])&&(y[p[h]]=!(v[p[h]]=c));if(r){if(o||t){if(o){for(u=[],h=y.length;h--;)(c=y[h])&&u.push(v[h]=c);o(null,y=[],u,l)}for(h=y.length;h--;)(c=y[h])&&(u=o?J.call(r,c):d[h])>-1&&(r[u]=!(s[u]=c))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Y.apply(s,y)})}function v(t){for(var e,n,i,r=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,l=p(function(t){return t===e},s,!0),u=p(function(t){return J.call(e,t)>-1},s,!0),h=[function(t,n,i){return!o&&(i||n!==H)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>a;a++)if(n=_.relative[t[a].type])h=[p(f(h),n)];else{if(n=_.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;r>i&&!_.relative[t[i].type];i++);return m(a>1&&f(h),a>1&&d(t.slice(0,a-1)).replace(se,"$1"),n,i>a&&v(t.slice(a,i)),r>i&&v(t=t.slice(i)),r>i&&d(t))}h.push(n)}return f(h)}function y(t,e){var n=0,i=e.length>0,o=t.length>0,a=function(r,a,l,u,h){var c,d,p,f=[],m=0,v="0",y=r&&[],b=null!=h,w=H,x=r||o&&_.find.TAG("*",h&&a.parentNode||a),S=W+=null==w?1:Math.random()||.1;for(b&&(H=a!==P&&a,T=n);null!=(c=x[v]);v++){if(o&&c){for(d=0;p=t[d++];)if(p(c,a,l)){u.push(c);break}b&&(W=S,T=++n)}i&&((c=!p&&c)&&m--,r&&y.push(c))}if(m+=v,i&&v!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(r){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=Z.call(u));f=g(f)}Y.apply(u,f),b&&!r&&f.length>0&&m+e.length>1&&s.uniqueSort(u)}return b&&(W=S,H=w),y};return i?r(a):a}function b(t,e,n){for(var i=0,r=e.length;r>i;i++)s(t,e[i],n);return n}function w(t,e,n,i){var r,o,s,a,l,u=c(t);if(!i&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&!I&&_.relative[o[1].type]){if(e=_.find.ID(s.matches[0].replace(we,xe),e)[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=de.needsContext.test(t)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(we,xe),pe.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Y.apply(n,K.call(i,0)),n;break}}return C(t,u)(i,e,I,n,pe.test(t)),n}function x(){}var S,T,_,E,M,C,k,H,N,P,z,I,O,A,D,L,R,j="sizzle"+-new Date,B=t.document,F={},W=0,U=0,V=i(),$=i(),q=i(),G=typeof e,Q=1<<31,X=[],Z=X.pop,Y=X.push,K=X.slice,J=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},te="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=ee.replace("w","w#"),ie="([*^$|!~]?=)",re="\\["+te+"*("+ee+")"+te+"*(?:"+ie+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+te+"*\\]",oe=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",se=RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),ae=RegExp("^"+te+"*,"+te+"*"),ue=RegExp("^"+te+"*([\\x20\\t\\r\\n\\f>+~])"+te+"*"),he=RegExp(oe),ce=RegExp("^"+ne+"$"),de={ID:RegExp("^#("+ee+")"),CLASS:RegExp("^\\.("+ee+")"),NAME:RegExp("^\\[name=['\"]?("+ee+")['\"]?\\]"),TAG:RegExp("^("+ee.replace("w","w*")+")"),ATTR:RegExp("^"+re),PSEUDO:RegExp("^"+oe),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),needsContext:RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,we=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xe=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(B.documentElement.childNodes,0)[0].nodeType}catch(Se){K=function(t){for(var e,n=[];e=this[t++];)n.push(e);return n}}M=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=s.setDocument=function(t){var i=t?t.ownerDocument||t:B;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,z=i.documentElement,I=M(i),F.tagNameNoComments=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),F.attributes=o(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),F.getByClassName=o(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),F.getByName=o(function(t){t.id=j+0,t.innerHTML="<a name='"+j+"'></a><div name='"+j+"'></div>",z.insertBefore(t,z.firstChild);var e=i.getElementsByName&&i.getElementsByName(j).length===2+i.getElementsByName(j+0).length;return F.getIdNotName=!i.getElementById(j),z.removeChild(t),e}),_.attrHandle=o(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==G&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},F.getIdNotName?(_.find.ID=function(t,e){if(typeof e.getElementById!==G&&!I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(_.find.ID=function(t,n){if(typeof n.getElementById!==G&&!I){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===t?[i]:e:[]}},_.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=F.tagNameNoComments?function(t,n){return typeof n.getElementsByTagName!==G?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.NAME=F.getByName&&function(t,n){return typeof n.getElementsByName!==G?n.getElementsByName(name):e},_.find.CLASS=F.getByClassName&&function(t,n){return typeof n.getElementsByClassName===G||I?e:n.getElementsByClassName(t)},A=[],O=[":focus"],(F.qsa=n(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||O.push("\\["+te+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||O.push(":checked")}),o(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&O.push("[*^$]="+te+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(F.matchesSelector=n(D=z.matchesSelector||z.mozMatchesSelector||z.webkitMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&o(function(t){F.disconnectedMatch=D.call(t,"div"),D.call(t,"[s!='']:x"),A.push("!=",oe)}),O=RegExp(O.join("|")),A=RegExp(A.join("|")),L=n(z.contains)||z.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},R=z.compareDocumentPosition?function(t,e){var n;return t===e?(k=!0,0):(n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&n||t.parentNode&&11===t.parentNode.nodeType?t===i||L(B,t)?-1:e===i||L(B,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(t===e)return k=!0,0;if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},k=!1,[0,0].sort(R),F.detectDuplicates=k,P):P},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&N(t),e=e.replace(be,"='$1']"),!(!F.matchesSelector||I||A&&A.test(e)||O.test(e)))try{var n=D.call(t,e);if(n||F.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return s(e,P,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==P&&N(t),L(t,e)},s.attr=function(t,e){var n;return(t.ownerDocument||t)!==P&&N(t),I||(e=e.toLowerCase()),(n=_.attrHandle[e])?n(t):I||F.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},s.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],i=1,r=0;if(k=!F.detectDuplicates,t.sort(R),k){for(;e=t[i];i++)e===t[i-1]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},E=s.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=E(e);return n},_=s.selectors={cacheLength:50,createPseudo:r,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&he.test(n)&&(e=c(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(we,xe).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=V[t+" "];return e||(e=RegExp("(^|"+te+")"+t+"("+te+"|$)"))&&V(t,function(t){return e.test(t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=s.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,h,c,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(o){for(;g;){for(c=e;c=c[g];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(h=m[j]||(m[j]={}),u=h[t]||[],p=u[0]===W&&u[1],d=u[0]===W&&u[2],c=p&&m.childNodes[p];c=++p&&c&&c[g]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){h[t]=[W,p,d];break}}else if(y&&(u=(e[j]||(e[j]={}))[t])&&u[0]===W)d=u[1];else for(;(c=++p&&c&&c[g]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++d||(y&&((c[j]||(c[j]={}))[t]=[W,d]),c!==e)););return d-=r,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var n,i=_.pseudos[t]||_.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return i[j]?i(e):i.length>1?(n=[t,t,"",e],_.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)r=J.call(t,o[s]),t[r]=!(n[r]=o[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:r(function(t){var e=[],n=[],i=C(t.replace(se,"$1"));return i[j]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(e){return s(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return ce.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=I?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===z},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[S]=l(S);for(S in{submit:!0,reset:!0})_.pseudos[S]=u(S);C=s.compile=function(t,e){var n,i=[],r=[],o=q[t+" "];if(!o){for(e||(e=c(t)),n=e.length;n--;)o=v(e[n]),o[j]?i.push(o):r.push(o);o=q(t,y(r,i))}return o},_.pseudos.nth=_.pseudos.eq,_.filters=x.prototype=_.pseudos,_.setFilters=new x,N(),s.attr=le.attr,le.find=s,le.expr=s.selectors,le.expr[":"]=le.expr.pseudos,le.unique=s.uniqueSort,le.text=s.getText,le.isXMLDoc=s.isXML,le.contains=s.contains}(t);var Fe=/Until$/,We=/^(?:parents|prev(?:Until|All))/,Ue=/^.[^:#\[\.,]*$/,Ve=le.expr.match.needsContext,$e={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({find:function(t){var e,n,i,r=this.length;if("string"!=typeof t)return i=this,this.pushStack(le(t).filter(function(){for(e=0;r>e;e++)if(le.contains(i[e],this))return!0}));for(n=[],e=0;r>e;e++)le.find(t,this[e],n);return n=this.pushStack(r>1?le.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e,n=le(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(le.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(c(this,t,!1))},filter:function(t){return this.pushStack(c(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?Ve.test(t)?le(t,this.context).index(this[0])>=0:le.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=Ve.test(t)||"string"!=typeof t?le(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(s?s.index(n)>-1:le.find.matchesSelector(n,t)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?le.unique(o):o)},index:function(t){return t?"string"==typeof t?le.inArray(this[0],le(t)):le.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?le(t,e):le.makeArray(t&&t.nodeType?[t]:t),i=le.merge(this.get(),n);return this.pushStack(le.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),le.fn.andSelf=le.fn.addBack,le.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return le.dir(t,"parentNode")},parentsUntil:function(t,e,n){return le.dir(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return le.dir(t,"nextSibling")},prevAll:function(t){return le.dir(t,"previousSibling")
},nextUntil:function(t,e,n){return le.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return le.dir(t,"previousSibling",n)},siblings:function(t){return le.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return le.sibling(t.firstChild)},contents:function(t){return le.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:le.merge([],t.childNodes)}},function(t,e){le.fn[t]=function(n,i){var r=le.map(this,e,n);return Fe.test(t)||(i=n),i&&"string"==typeof i&&(r=le.filter(i,r)),r=this.length>1&&!$e[t]?le.unique(r):r,this.length>1&&We.test(t)&&(r=r.reverse()),this.pushStack(r)}}),le.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?le.find.matchesSelector(e[0],t)?[e[0]]:[]:le.find.matches(t,e)},dir:function(t,n,i){for(var r=[],o=t[n];o&&9!==o.nodeType&&(i===e||1!==o.nodeType||!le(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ge=/ jQuery\d+="(?:null|\d+)"/g,Qe=RegExp("<(?:"+qe+")[\\s/>]","i"),Xe=/^\s+/,Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ye=/<([\w:]+)/,Ke=/<tbody/i,Je=/<|&#?\w+;/,tn=/<(?:script|style|link)/i,en=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:le.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=d(Q),un=ln.appendChild(Q.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,le.fn.extend({text:function(t){return le.access(this,function(t){return t===e?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(le.isFunction(t))return this.each(function(e){le(this).wrapAll(t.call(this,e))});if(this[0]){var e=le(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return le.isFunction(t)?this.each(function(e){le(this).wrapInner(t.call(this,e))}):this.each(function(){var e=le(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=le.isFunction(t);return this.each(function(n){le(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)(!t||le.filter(t,[n]).length>0)&&(e||1!==n.nodeType||le.cleanData(b(n)),n.parentNode&&(e&&le.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&le.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&le.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return le.clone(this,t,e)})},html:function(t){return le.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Ge,""):e;if(!("string"!=typeof t||tn.test(t)||!le.support.htmlSerialize&&Qe.test(t)||!le.support.leadingWhitespace&&Xe.test(t)||an[(Ye.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ze,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(le.cleanData(b(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=le.isFunction(t);return e||"string"==typeof t||(t=le(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(le(this).remove(),n.insertBefore(t,e))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=ee.apply([],t);var r,o,s,a,l,u,h=0,c=this.length,d=this,m=c-1,v=t[0],y=le.isFunction(v);if(y||!(1>=c||"string"!=typeof v||le.support.checkClone)&&nn.test(v))return this.each(function(r){var o=d.eq(r);y&&(t[0]=v.call(this,r,n?o.html():e)),o.domManip(t,n,i)});if(c&&(u=le.buildFragment(t,this[0].ownerDocument,!1,this),r=u.firstChild,1===u.childNodes.length&&(u=r),r)){for(n=n&&le.nodeName(r,"tr"),a=le.map(b(u,"script"),f),s=a.length;c>h;h++)o=u,h!==m&&(o=le.clone(o,!0,!0),s&&le.merge(a,b(o,"script"))),i.call(n&&le.nodeName(this[h],"table")?p(this[h],"tbody"):this[h],o,h);if(s)for(l=a[a.length-1].ownerDocument,le.map(a,g),h=0;s>h;h++)o=a[h],rn.test(o.type||"")&&!le._data(o,"globalEval")&&le.contains(l,o)&&(o.src?le.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):le.globalEval((o.text||o.textContent||o.innerHTML||"").replace(sn,"")));u=r=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){le.fn[t]=function(t){for(var n,i=0,r=[],o=le(t),s=o.length-1;s>=i;i++)n=i===s?this:this.clone(!0),le(o[i])[e](n),ne.apply(r,n.get());return this.pushStack(r)}}),le.extend({clone:function(t,e,n){var i,r,o,s,a,l=le.contains(t.ownerDocument,t);if(le.support.html5Clone||le.isXMLDoc(t)||!Qe.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(un.innerHTML=t.outerHTML,un.removeChild(o=un.firstChild)),!(le.support.noCloneEvent&&le.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||le.isXMLDoc(t)))for(i=b(o),a=b(t),s=0;null!=(r=a[s]);++s)i[s]&&y(r,i[s]);if(e)if(n)for(a=a||b(t),i=i||b(o),s=0;null!=(r=a[s]);s++)v(r,i[s]);else v(t,o);return i=b(o,"script"),i.length>0&&m(i,!l&&b(t,"script")),i=a=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,s,a,l,u,h,c=t.length,p=d(e),f=[],g=0;c>g;g++)if(o=t[g],o||0===o)if("object"===le.type(o))le.merge(f,o.nodeType?[o]:o);else if(Je.test(o)){for(a=a||p.appendChild(e.createElement("div")),l=(Ye.exec(o)||["",""])[1].toLowerCase(),h=an[l]||an._default,a.innerHTML=h[1]+o.replace(Ze,"<$1></$2>")+h[2],r=h[0];r--;)a=a.lastChild;if(!le.support.leadingWhitespace&&Xe.test(o)&&f.push(e.createTextNode(Xe.exec(o)[0])),!le.support.tbody)for(o="table"!==l||Ke.test(o)?"<table>"!==h[1]||Ke.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)le.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(le.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(e.createTextNode(o));for(a&&p.removeChild(a),le.support.appendChecked||le.grep(b(f,"input"),w),g=0;o=f[g++];)if((!i||-1===le.inArray(o,i))&&(s=le.contains(o.ownerDocument,o),a=b(p.appendChild(o),"script"),s&&m(a),n))for(r=0;o=a[r++];)rn.test(o.type||"")&&n.push(o);return a=null,p},cleanData:function(t,e){for(var n,i,r,o,s=0,a=le.expando,l=le.cache,u=le.support.deleteExpando,h=le.event.special;null!=(n=t[s]);s++)if((e||le.acceptData(n))&&(r=n[a],o=r&&l[r])){if(o.events)for(i in o.events)h[i]?le.event.remove(n,i):le.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u?delete n[a]:typeof n.removeAttribute!==G?n.removeAttribute(a):n[a]=null,J.push(r))}}});var hn,cn,dn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=RegExp("^("+ue+")(.*)$","i"),bn=RegExp("^("+ue+")(?!px)[a-z%]+$","i"),wn=RegExp("^([+-])=("+ue+")","i"),xn={BODY:"block"},Sn={position:"absolute",visibility:"hidden",display:"block"},Tn={letterSpacing:0,fontWeight:400},_n=["Top","Right","Bottom","Left"],En=["Webkit","O","Moz","ms"];le.fn.extend({css:function(t,n){return le.access(this,function(t,n,i){var r,o,s={},a=0;if(le.isArray(n)){for(o=cn(t),r=n.length;r>a;a++)s[n[a]]=le.css(t,n[a],!1,o);return s}return i!==e?le.style(t,n,i):le.css(t,n)},t,n,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:S(this))?le(this).show():le(this).hide()})}}),le.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=dn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":le.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,l=le.camelCase(n),u=t.style;if(n=le.cssProps[l]||(le.cssProps[l]=x(u,l)),a=le.cssHooks[n]||le.cssHooks[l],i===e)return a&&"get"in a&&(o=a.get(t,!1,r))!==e?o:u[n];if(s=typeof i,"string"===s&&(o=wn.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(le.css(t,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||le.cssNumber[l]||(i+="px"),le.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e)))try{u[n]=i}catch(h){}}},css:function(t,n,i,r){var o,s,a,l=le.camelCase(n);return n=le.cssProps[l]||(le.cssProps[l]=x(t.style,l)),a=le.cssHooks[n]||le.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=dn(t,n,r)),"normal"===s&&n in Tn&&(s=Tn[n]),""===i||i?(o=parseFloat(s),i===!0||le.isNumeric(o)?o||0:s):s},swap:function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r}}),t.getComputedStyle?(cn=function(e){return t.getComputedStyle(e,null)},dn=function(t,n,i){var r,o,s,a=i||cn(t),l=a?a.getPropertyValue(n)||a[n]:e,u=t.style;return a&&(""!==l||le.contains(t.ownerDocument,t)||(l=le.style(t,n)),bn.test(l)&&vn.test(n)&&(r=u.width,o=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=a.width,u.width=r,u.minWidth=o,u.maxWidth=s)),l}):Q.documentElement.currentStyle&&(cn=function(t){return t.currentStyle},dn=function(t,n,i){var r,o,s,a=i||cn(t),l=a?a[n]:e,u=t.style;return null==l&&u&&u[n]&&(l=u[n]),bn.test(l)&&!gn.test(n)&&(r=u.left,o=t.runtimeStyle,s=o&&o.left,s&&(o.left=t.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=r,s&&(o.left=s)),""===l?"auto":l}),le.each(["height","width"],function(t,n){le.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&mn.test(le.css(t,"display"))?le.swap(t,Sn,function(){return M(t,n,r)}):M(t,n,r):e},set:function(t,e,i){var r=i&&cn(t);return _(t,e,i?E(t,n,i,le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,r),r):0)}}}),le.support.opacity||(le.cssHooks.opacity={get:function(t,e){return fn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=le.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===le.trim(o.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=pn.test(o)?o.replace(pn,r):o+" "+r)}}),le(function(){le.support.reliableMarginRight||(le.cssHooks.marginRight={get:function(t,n){return n?le.swap(t,{display:"inline-block"},dn,[t,"marginRight"]):e}}),!le.support.pixelPosition&&le.fn.position&&le.each(["top","left"],function(t,n){le.cssHooks[n]={get:function(t,i){return i?(i=dn(t,n),bn.test(i)?le(t).position()[n]+"px":i):e}}})}),le.expr&&le.expr.filters&&(le.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight||!le.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||le.css(t,"display"))},le.expr.filters.visible=function(t){return!le.expr.filters.hidden(t)}),le.each({margin:"",padding:"",border:"Width"},function(t,e){le.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+_n[i]+e]=o[i]||o[i-2]||o[0];return r}},vn.test(t)||(le.cssHooks[t+e].set=_)});var Mn=/%20/g,Cn=/\[\]$/,kn=/\r?\n/g,Hn=/^(?:submit|button|image|reset|file)$/i,Nn=/^(?:input|select|textarea|keygen)/i;le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=le.prop(this,"elements");return t?le.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!le(this).is(":disabled")&&Nn.test(this.nodeName)&&!Hn.test(t)&&(this.checked||!en.test(t))}).map(function(t,e){var n=le(this).val();return null==n?null:le.isArray(n)?le.map(n,function(t){return{name:e.name,value:t.replace(kn,"\r\n")}}):{name:e.name,value:n.replace(kn,"\r\n")}}).get()}}),le.param=function(t,n){var i,r=[],o=function(t,e){e=le.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(t)||t.jquery&&!le.isPlainObject(t))le.each(t,function(){o(this.name,this.value)});else for(i in t)H(i,t[i],n,o);return r.join("&").replace(Mn,"+")},le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){le.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),le.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};var Pn,zn,In=le.now(),On=/\?/,An=/#.*$/,Dn=/([?&])_=[^&]*/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Fn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Wn=le.fn.load,Un={},Vn={},$n="*/".concat("*");try{zn=X.href}catch(qn){zn=Q.createElement("a"),zn.href="",zn=zn.href}Pn=Fn.exec(zn.toLowerCase())||[],le.fn.load=function(t,n,i){if("string"!=typeof t&&Wn)return Wn.apply(this,arguments);var r,o,s,a=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l,t.length),t=t.slice(0,l)),le.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&le.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){o=arguments,a.html(r?le("<div>").append(le.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,o||[t.responseText,e,t])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){le.fn[e]=function(t){return this.on(e,t)}}),le.each(["get","post"],function(t,n){le[n]=function(t,i,r,o){return le.isFunction(i)&&(o=o||r,r=i,i=e),le.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zn,type:"GET",isLocal:Rn.test(Pn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$n,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?z(z(t,le.ajaxSettings),e):z(le.ajaxSettings,t)},ajaxPrefilter:N(Un),ajaxTransport:N(Vn),ajax:function(t,n){function i(t,n,i,r){var o,c,y,b,x,T=n;2!==w&&(w=2,l&&clearTimeout(l),h=e,a=r||"",S.readyState=t>0?4:0,i&&(b=I(d,S,i)),t>=200&&300>t||304===t?(d.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(le.lastModified[s]=x),x=S.getResponseHeader("etag"),x&&(le.etag[s]=x)),204===t?(o=!0,T="nocontent"):304===t?(o=!0,T="notmodified"):(o=O(d,b),T=o.state,c=o.data,y=o.error,o=!y)):(y=T,(t||!T)&&(T="error",0>t&&(t=0))),S.status=t,S.statusText=(n||T)+"",o?g.resolveWith(p,[c,T,S]):g.rejectWith(p,[S,T,y]),S.statusCode(v),v=e,u&&f.trigger(o?"ajaxSuccess":"ajaxError",[S,d,o?c:y]),m.fireWith(p,[S,T]),u&&(f.trigger("ajaxComplete",[S,d]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,o,s,a,l,u,h,c,d=le.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?le(p):le.event,g=le.Deferred(),m=le.Callbacks("once memory"),v=d.statusCode||{},y={},b={},w=0,x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!c)for(c={};e=Ln.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return w||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)v[e]=[v[e],t[e]];else S.always(t[S.status]);return this},abort:function(t){var e=t||x;return h&&h.abort(e),i(0,e),this}};if(g.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,d.url=((t||d.url||zn)+"").replace(An,"").replace(Bn,Pn[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=le.trim(d.dataType||"*").toLowerCase().match(he)||[""],null==d.crossDomain&&(r=Fn.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===Pn[1]&&r[2]===Pn[2]&&(r[3]||("http:"===r[1]?80:443))==(Pn[3]||("http:"===Pn[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=le.param(d.data,d.traditional)),P(Un,d,n,S),2===w)return S;u=d.global,u&&0===le.active++&&le.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!jn.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(On.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Dn.test(s)?s.replace(Dn,"$1_="+In++):s+(On.test(s)?"&":"?")+"_="+In++)),d.ifModified&&(le.lastModified[s]&&S.setRequestHeader("If-Modified-Since",le.lastModified[s]),le.etag[s]&&S.setRequestHeader("If-None-Match",le.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+$n+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)S.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(p,S,d)===!1||2===w))return S.abort();x="abort";for(o in{success:1,error:1,complete:1})S[o](d[o]);if(h=P(Vn,d,n,S)){S.readyState=1,u&&f.trigger("ajaxSend",[S,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){S.abort("timeout")},d.timeout));try{w=1,h.send(y,i)}catch(T){if(!(2>w))throw T;i(-1,T)}}else i(-1,"No Transport");return S},getScript:function(t,n){return le.get(t,e,n,"script")},getJSON:function(t,e,n){return le.get(t,e,n,"json")}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return le.globalEval(t),t}}}),le.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),le.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=Q.head||le("head")[0]||Q.documentElement;return{send:function(e,r){n=Q.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Gn=[],Qn=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Gn.pop()||le.expando+"_"+In++;return this[t]=!0,t}}),le.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.jsonp!==!1&&(Qn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=le.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Qn,"$1"+o):n.jsonp!==!1&&(n.url+=(On.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||le.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},r.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,Gn.push(o)),a&&le.isFunction(s)&&s(a[0]),a=s=e}),"script"):e});var Xn,Zn,Yn=0,Kn=t.ActiveXObject&&function(){var t;for(t in Xn)Xn[t](e,!0)};le.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&A()||D()}:A,Zn=le.ajaxSettings.xhr(),le.support.cors=!!Zn&&"withCredentials"in Zn,Zn=le.support.ajax=!!Zn,Zn&&le.ajaxTransport(function(n){if(!n.crossDomain||le.support.cors){var i;return{send:function(r,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(t,r){var a,u,h,c;try{if(i&&(r||4===l.readyState))if(i=e,s&&(l.onreadystatechange=le.noop,Kn&&delete Xn[s]),r)4!==l.readyState&&l.abort();else{c={},a=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(c.text=l.responseText);try{h=l.statusText}catch(d){h=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(p){r||o(-1,p)}c&&o(a,h,c,u)},n.async?4===l.readyState?setTimeout(i):(s=++Yn,Kn&&(Xn||(Xn={},le(t).unload(Kn)),Xn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var Jn,ti,ei=/^(?:toggle|show|hide)$/,ni=RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[F],oi={"*":[function(t,e){var n,i,r=this.createTween(t,e),o=ni.exec(e),s=r.cur(),a=+s||0,l=1,u=20;if(o){if(n=+o[2],i=o[3]||(le.cssNumber[t]?"":"px"),"px"!==i&&a){a=le.css(r.elem,t,!0)||n||1;do l=l||".5",a/=l,le.style(r.elem,t,a+i);while(l!==(l=r.cur()/s)&&1!==l&&--u)}r.unit=i,r.start=a,r.end=o[1]?a+(o[1]+1)*n:n}return r}]};le.Animation=le.extend(j,{tweener:function(t,e){le.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],oi[n]=oi[n]||[],oi[n].unshift(e)},prefilter:function(t,e){e?ri.unshift(t):ri.push(t)}}),le.Tween=W,W.prototype={constructor:W,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(le.cssNumber[n]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,n=W.propHooks[this.prop];return this.pos=e=this.options.duration?le.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=le.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){le.fx.step[t.prop]?le.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[le.cssProps[t.prop]]||le.cssHooks[t.prop])?le.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},le.each(["toggle","show","hide"],function(t,e){var n=le.fn[e];le.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(U(e,!0),t,i,r)}}),le.fn.extend({fadeTo:function(t,e,n,i){return this.filter(S).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=le.isEmptyObject(t),o=le.speed(e,n,i),s=function(){var e=j(this,le.extend({},t),o);s.finish=function(){e.stop(!0)},(r||le._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=le.timers,s=le._data(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&ii.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));(e||!i)&&le.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=le._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=le.timers,s=i?i.length:0;for(n.finish=!0,le.queue(this,t,[]),r&&r.cur&&r.cur.finish&&r.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),le.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){le.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),le.speed=function(t,e,n){var i=t&&"object"==typeof t?le.extend({},t):{complete:n||!n&&e||le.isFunction(t)&&t,duration:t,easing:n&&e||e&&!le.isFunction(e)&&e};return i.duration=le.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in le.fx.speeds?le.fx.speeds[i.duration]:le.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){le.isFunction(i.old)&&i.old.call(this),i.queue&&le.dequeue(this,i.queue)},i},le.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},le.timers=[],le.fx=W.prototype.init,le.fx.tick=function(){var t,n=le.timers,i=0;for(Jn=le.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||le.fx.stop(),Jn=e},le.fx.timer=function(t){t()&&le.timers.push(t)&&le.fx.start()},le.fx.interval=13,le.fx.start=function(){ti||(ti=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(ti),ti=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fx.step={},le.expr&&le.expr.filters&&(le.expr.filters.animated=function(t){return le.grep(le.timers,function(e){return t===e.elem}).length}),le.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){le.offset.setOffset(this,t,e)});var n,i,r={top:0,left:0},o=this[0],s=o&&o.ownerDocument;return s?(n=s.documentElement,le.contains(n,o)?(typeof o.getBoundingClientRect!==G&&(r=o.getBoundingClientRect()),i=V(s),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r):void 0},le.offset={setOffset:function(t,e,n){var i=le.css(t,"position");"static"===i&&(t.style.position="relative");var r,o,s=le(t),a=s.offset(),l=le.css(t,"top"),u=le.css(t,"left"),h=("absolute"===i||"fixed"===i)&&le.inArray("auto",[l,u])>-1,c={},d={};h?(d=s.position(),r=d.top,o=d.left):(r=parseFloat(l)||0,o=parseFloat(u)||0),le.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(c.top=e.top-a.top+r),null!=e.left&&(c.left=e.left-a.left+o),"using"in e?e.using.call(t,c):s.css(c)}},le.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===le.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),le.nodeName(t[0],"html")||(n=t.offset()),n.top+=le.css(t[0],"borderTopWidth",!0),n.left+=le.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-le.css(i,"marginTop",!0),left:e.left-n.left-le.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Q.documentElement;t&&!le.nodeName(t,"html")&&"static"===le.css(t,"position");)t=t.offsetParent;return t||Q.documentElement})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);le.fn[t]=function(r){return le.access(this,function(t,r,o){var s=V(t);return o===e?s?n in s?s[n]:s.document.documentElement[r]:t[r]:(s?s.scrollTo(i?le(s).scrollLeft():o,i?o:le(s).scrollTop()):t[r]=o,e)},t,r,arguments.length,null)}}),le.each({Height:"height",Width:"width"},function(t,n){le.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){le.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return le.access(this,function(n,i,r){var o;return le.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?le.css(n,i,a):le.style(n,i,r,a)},n,s?r:e,s,null)}})}),t.jQuery=t.$=le,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return le})})(window),/*! jQuery UI - v1.10.3 - 2013-06-06
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function n(e,n){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;r.length>i;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(n,i,r){var o,s,a,l,u={},h=n.split(".")[0];n=n.split(".")[1],o=h+"-"+n,r||(r=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[h]=t[h]||{},s=t[h][n],a=t[h][n]=function(t,n){return this._createWidget?(arguments.length&&this._createWidget(t,n),e):new a(t,n)},t.extend(a,s,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),l=new i,l.options=t.widget.extend({},l.options),t.each(r,function(n,r){return t.isFunction(r)?(u[n]=function(){var t=function(){return i.prototype[n].apply(this,arguments)},e=function(t){return i.prototype[n].apply(this,t)};return function(){var n,i=this._super,o=this._superApply;return this._super=t,this._superApply=e,n=r.apply(this,arguments),this._super=i,this._superApply=o,n}}(),e):(u[n]=r,e)}),a.prototype=t.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix:n},u,{constructor:a,namespace:h,widgetName:n,widgetFullName:o}),s?(t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete s._childConstructors):i._childConstructors.push(a),t.widget.bridge(n,a)},t.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==e&&(n[r]=t.isPlainObject(o)?t.isPlainObject(n[r])?t.widget.extend({},n[r],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=t.data(this,o);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):e):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new r(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=t.widget.extend({},this.options[n]),s=0;r.length-1>s;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===e)return o[n]===e?null:o[n];o[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,r){var o,s=this;"boolean"!=typeof n&&(r=i,i=n,n=!1),r?(i=o=t(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,o=this.widget()),t.each(r,function(r,a){function l(){return n||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):e}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||t.guid++);var u=r.match(/^(\w+)\s*(.*)$/),h=u[1]+s.eventNamespace,c=u[2];c?o.delegate(c,h,l):i.bind(h,l)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&t.effects&&t.effects.effect[a]?i[e](r):a!==e&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function r(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var n,i,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(w),S=(e.collision||"flip").split(" "),T={};return y=r(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),n=c.exec(i[1]),T[this]=[t?t[0]:0,n?n[0]:0],e[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=n(T.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var r,u,h=t(this),c=h.outerWidth(),d=h.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),_=c+f+i(this,"marginRight")+x.width,E=d+y+i(this,"marginBottom")+x.height,M=t.extend({},v),C=n(T.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?M.left-=c:"center"===e.my[0]&&(M.left-=c/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=C[0],M.top+=C[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),r={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[S[n]]&&t.ui.position[S[n]][i](M,{targetWidth:p,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:r,collisionWidth:_,collisionHeight:E,offset:[o[0]+C[0],o[1]+C[1]],my:e.my,at:e.at,within:w,elem:h})}),e.using&&(u=function(t){var n=m.left-M.left,i=n+p-c,r=m.top-M.top,o=r+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:h,left:M.left,top:M.top,width:c,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};c>p&&p>a(n+i)&&(l.horizontal="center"),d>g&&g>a(r+o)&&(l.vertical="middle"),l.important=s(a(n),a(i))>s(a(r),a(o))?"horizontal":"vertical",e.using.call(this,t,l)}),h.offset(t.extend(M,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,u=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=u?(n=t.left+l+e.collisionWidth-o-r,t.left+=l-n):t.left=u>0&&0>=l?r:l>u?r+o-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=s(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,u=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=u?(n=t.top+l+e.collisionHeight-o-r,t.top+=l-n):t.top=u>0&&0>=l?r:l>u?r+o-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(n=t.left+d+p+f+e.collisionWidth-s-o,(0>n||a(h)>n)&&(t.left+=d+p+f)):c>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||c>a(i))&&(t.left+=d+p+f))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>h?(i=t.top+p+f+g+e.collisionHeight-s-o,t.top+p+f+g>h&&(0>i||a(h)>i)&&(t.top+=p+f+g)):c>0&&(n=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>c&&(n>0||c>a(n))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)e.style[o]=i[o];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",n.removeChild(e)}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,r,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),r=i.options,o=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n){var i=t(this).data("ui-draggable"),r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("ui-draggable"),r=this;t.each(i.sortables,function(){var o=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)
})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,r,o,s,a,l,u,h,c,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)a=p.snapElements[c].left,l=a+p.snapElements[c].width,u=p.snapElements[c].top,h=u+p.snapElements[c].height,a-g>v||m>l+g||u-g>b||y>h+g||!t.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)?(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(i=g>=Math.abs(u-b),r=g>=Math.abs(h-y),o=g>=Math.abs(a-v),s=g>=Math.abs(l-m),i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||r||o||s,"outer"!==f.snapMode&&(i=g>=Math.abs(u-y),r=g>=Math.abs(h-b),o=g>=Math.abs(a-m),s=g>=Math.abs(l-v),i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(i||r||o||s||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=i||r||o||s||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,n,i,r,o,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;e.length>n;n++)i=t.trim(e[n]),o="ui-resizable-"+i,r=t("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(e){var n,i,r,o;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=t(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(r,o),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,i,r=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,o,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=e(this.helper.css("left")),r=e(this.helper.css("top")),s.containment&&(i+=t(s.containment).scrollLeft()||0,r+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var n,i=this.helper,r={},o=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,u=this.size.width,h=this.size.height,c=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[s];return p?(n=p.apply(this,[e,c,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==h&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(r)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var n,i,r,o,s,a,l,u=this.options,h=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&t.ui.hasScroll(n[0],"left")?0:h.sizeDiff.height,o=i?0:h.sizeDiff.width,s={width:h.helper.width()-o,height:h.helper.height()-r},a=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,u.animate||this.element.css(t.extend(s,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),r>s.minHeight&&(s.minHeight=r),s.maxWidth>i&&(s.maxWidth=i),s.maxHeight>o&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,r=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===r&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===r&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,r=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=n(t.width)&&e.minWidth&&e.minWidth>t.width,a=n(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return s&&(t.width=e.minWidth),a&&(t.height=e.minHeight),r&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),s&&h&&(t.left=l-e.minWidth),r&&h&&(t.left=l-e.maxWidth),a&&c&&(t.top=u-e.minHeight),o&&c&&(t.top=u-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,r,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(r=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],e=0;n.length>e;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,h&&u?{top:h,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,o,s,a,l,u=t(this).data("ui-resizable"),h=u.options,c=u.element,d=h.containment,p=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(u.containerElement=t(p),/document/.test(d)||d===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(n=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,r){i[t]=e(n.css("padding"+r))}),u.containerOffset=n.offset(),u.containerPosition=n.position(),u.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=u.containerOffset,o=u.containerSize.height,s=u.containerSize.width,a=t.ui.hasScroll(p,"left")?p.scrollWidth:s,l=t.ui.hasScroll(p)?p.scrollHeight:o,u.parentData={element:p,left:r.left,top:r.top,width:a,height:l}))},resize:function(e){var n,i,r,o,s=t(this).data("ui-resizable"),a=s.options,l=s.containerOffset,u=s.position,h=s._aspectRatio||e.shiftKey,c={top:0,left:0},d=s.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=l),u.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-c.left),h&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),u.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),h&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,n=Math.abs((s._helper?s.offset.left-c.left:s.offset.left-c.left)+s.sizeDiff.width),i=Math.abs((s._helper?s.offset.top-c.top:s.offset.top-l.top)+s.sizeDiff.height),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o&&(n-=s.parentData.left),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,h&&(s.size.height=s.size.width/s.aspectRatio)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,h&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.containerOffset,r=e.containerPosition,o=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,u=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("ui-resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(e,i){t(e).each(function(){var e=t(this),r=t(this).data("ui-resizable-alsoresize"),o={},s=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var n=(r[e]||0)+(a[e]||0);n&&n>=0&&(o[e]=n||null)}),e.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size,r=e.originalSize,o=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,h=Math.round((i.width-r.width)/l)*l,c=Math.round((i.height-r.height)/u)*u,d=r.width+h,p=r.height+c,f=n.maxWidth&&d>n.maxWidth,g=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=a,m&&(d+=l),v&&(p+=u),f&&(d-=l),g&&(p-=u),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=o.top-c):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=o.left-h):(e.size.width=d,e.size.height=p,e.position.top=o.top-c,e.position.left=o.left-h)}})}(jQuery),function(t){var e,n,i,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},u=function(e){var n=e.name,i=e.form,r=t([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter(function(){return!this.form})),r};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,h="checkbox"===this.type||"radio"===this.type,c=h?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(c)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(d)}),h&&(this.element.bind("change"+this.eventNamespace,function(){r||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(r=!1,n=t.pageX,i=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(n!==t.pageX||i!==t.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||r?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||r)return!1;t(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var e=s.element[0];u(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,s.document.one("mouseup",function(){e=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(t(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var e=this.buttonElement.removeClass(a),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;0>n&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!e&&this._trigger("focus",t),n},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")
}),this._trigger("open"),void 0)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function n(){var e=this.document[0].activeElement,n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(r.focus(1),e.preventDefault()):(i.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(t.each(n,function(n,i){var r,o;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(e.element[0],arguments)},o={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,t("<button></button>",i).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){t(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(r))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(r,o){i.position=[o.position.left-n.document.scrollLeft(),o.position.top-n.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,r=i.resizable,o=this.uiDialog.css("position"),s="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,r){t(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(r))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(r,o){i.height=t(this).height(),i.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(i){var r=this,o=!1,s={};t.each(i,function(t,i){r._setOption(t,i),t in e&&(o=!0),t in n&&(s[t]=i)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var n,i,r=this.uiDialog;"dialogClass"===t&&r.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(n=r.is(":data(ui-draggable)"),n&&!e&&r.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(i=r.is(":data(ui-resizable)"),i&&!e&&r.resizable("destroy"),i&&"string"==typeof e&&r.resizable("option","handles",e),i||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,n=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){e._allowInteraction(i)||(i.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,n=this.options.position,i=[],r=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),t.each(["left","top"],function(t,e){+i[t]===i[t]&&(r[t]=i[t],i[t]=e)}),n={my:i[0]+(0>r[0]?r[0]:"+"+r[0])+" "+i[1]+(0>r[1]?r[1]:"+"+r[1]),at:i.join(" ")}),n=t.extend({},t.ui.dialog.prototype.options.position,n)):n=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(n),e||this.uiDialog.hide()}})}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,o,s,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,r=this.previousFilter||"",o=String.fromCharCode(e.keyCode),s=!1,clearTimeout(this.filterTimer),o===r?s=!0:o=r+o,a=RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(e.keyCode),a=RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev("a"),r=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",i.attr("id"))}),e=i.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,r,o,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.height(),0>r?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),0>n.offset().top-i-r}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+r>0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;n>e;e++)s.push(o);this.handles=r.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,o,s,a,l,u,h=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-h.values(e));(r>n||r===n&&(e===h._lastChangedValue||h.values(e)===c.min))&&(r=n,o=t(this),s=e)}),a=this._start(e,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,o.addClass("ui-state-active").focus(),l=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(r=this.values(),r[e]=n,o=this._trigger("slide",t,{handle:this.handles[e],value:n,values:r}),i=this.values(e?0:1),o!==!1&&this.values(e,n,!0))):n!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:n}),o!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,n){var i,r,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,r=arguments[0],o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var i,r=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,r,o,s=this.options.range,a=this.options,l=this,u=this._animateOff?!1:a.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),h["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](h,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?100*((i-r)/(o-r)):0,h["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](h,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(n){var i,r,o,s,a=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(s=this.options.step,r=o=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(r===this._valueMax())return;o=this._trimAlignValue(r+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(r===this._valueMin())return;o=this._trimAlignValue(r-s)}this._slide(n,a,o)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,i=t.ui.mouse.prototype,r=i._mouseInit;i._touchStart=function(t){var i=this;!n&&i._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},i._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},i._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},i._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),r.call(e)}}}(jQuery),/*! jquery-dialogextend 2.0.2 2013-08-06 */
function(){var t;t=jQuery,t.widget("ui.dialogExtend",{version:"2.0.0",modes:{},options:{closable:!0,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",restore:"ui-icon-newwin"},load:null,beforeRestore:null,restore:null},_create:function(){return this._state="normal",t(this.element[0]).data("ui-dialog")||t.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted"),this._verifyOptions(),this._initStyles(),this._initButtons(),this._initTitleBar(),this._setState("normal"),this._on("load",function(t){return console.log("test",t)}),this._trigger("load")},_setState:function(e){return t(this.element[0]).removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+e),this._state=e},_verifyOptions:function(){var e,n,i;!this.options.dblclick||this.options.dblclick in this.modes||(t.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+this.options.dblclick+"'"),this.options.dblclick=!1),this.options.titlebar&&"none"!==(n=this.options.titlebar)&&"transparent"!==n&&(t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'"),this.options.titlebar=!1),i=[];for(e in this.modes)this["_verifyOptions_"+e]?i.push(this["_verifyOptions_"+e]()):i.push(void 0);return i},_initStyles:function(){var e,n,i;t(".dialog-extend-css").length||(n="",n+='<style class="dialog-extend-css" type="text/css">',n+=".ui-dialog .ui-dialog-titlebar-buttonpane>a { float: right; }",n+=".ui-dialog .ui-dialog-titlebar-restore { width: 19px; height: 18px; }",n+=".ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }",n+=".ui-dialog .ui-dialog-titlebar-restore:hover,",n+=".ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }",n+=".ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }",n+="</style>",t(n).appendTo("body")),i=[];for(e in this.modes)i.push(this["_initStyles_"+e]());return i},_initButtons:function(){var e,n,i,r,o,s=this;r=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar"),e=t('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(r),e.css({position:"absolute",top:"50%",right:"0.3em","margin-top":"-10px",height:"18px"}),r.find(".ui-dialog-titlebar-close").css({position:"relative","float":"right",top:"auto",right:"auto",margin:0}).find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(e).end(),e.append('<a class="ui-dialog-titlebar-restore ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-close").toggle(this.options.closable).end().find(".ui-dialog-titlebar-restore").hide().click(function(t){return t.preventDefault(),s.restore()}).end(),o=this.modes;for(i in o)n=o[i],this._initModuleButton(i,n);return r.dblclick(function(){return s.options.dblclick?"normal"!==s._state?s.restore():s[s.options.dblclick]():void 0}).select(function(){return!1})},_initModuleButton:function(e,n){var i,r=this;return i=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-buttonpane"),i.append('<a class="ui-dialog-titlebar-'+e+' ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons[e]+'">'+e+"</span></a>").find(".ui-dialog-titlebar-"+e).attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-"+e).toggle(this.options[n.option]).click(function(t){return t.preventDefault(),r[e]()}).end()},_initTitleBar:function(){var e;switch(this.options.titlebar){case!1:return 0;case"none":return t(this.element[0]).dialog("option","draggable")&&(e=t("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5),t(this.element[0]).dialog("widget").prepend(e).draggable("option","handle",e)),t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("&nbsp;").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();case"transparent":return t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});default:return t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}},state:function(){return this._state},restore:function(){return this._trigger("beforeRestore"),this._restore(),this._setState("normal"),this._toggleButtons(),this._trigger("restore")},_restore:function(){return"normal"!==this._state?this["_restore_"+this._state]():void 0},_saveSnapshot:function(){return"normal"===this._state?(null==this.options.containerCls&&(this.options.containerCls="body"),this.original_config_resizable=t(this.element[0]).dialog("option","resizable"),this.original_config_draggable=t(this.element[0]).dialog("option","draggable"),this.original_size_height=t(this.element[0]).dialog("widget").outerHeight(),this.original_size_width=t(this.element[0]).dialog("option","width"),this.original_size_maxHeight=t(this.element[0]).dialog("option","maxHeight"),this.original_position_mode=t(this.element[0]).dialog("widget").css("position"),this.original_position_left=t(this.element[0]).dialog("widget").offset().left-t(this.options.containerCls).scrollLeft(),this.original_position_top=t(this.element[0]).dialog("widget").offset().top-t(this.options.containerCls).scrollTop(),this.original_titlebar_wrap=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")):void 0},_loadSnapshot:function(){return{config:{resizable:this.original_config_resizable,draggable:this.original_config_draggable},size:{height:this.original_size_height,width:this.original_size_width,maxHeight:this.original_size_maxHeight},position:{mode:this.original_position_mode,left:this.original_position_left,top:this.original_position_top},titlebar:{wrap:this.original_titlebar_wrap}}},_toggleButtons:function(){var e,n,i,r;t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").toggle("normal"!==this._state).css({right:"1.4em"}).end(),i=this.modes,r=[];for(n in i)e=i[n],r.push(t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+n).toggle(this._state!==e.state&&this.options[e.option]));return r}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{collapse:{option:"collapsable",state:"collapsed"}},options:{collapsable:!1,icons:{collapse:"ui-icon-triangle-1-s"},beforeCollapse:null,collapse:null},collapse:function(){var e;return e=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,this._trigger("beforeCollapse"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option",{resizable:!1,height:e,maxHeight:e}).on("dialogclose",this._collapse_restore).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("collapsed"),this._toggleButtons(),this._trigger("collapse")},_restore_collapsed:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,height:e.size.height,maxHeight:e.size.maxHeight}).off("dialogclose",this._collapse_restore)},_initStyles_collapse:function(){var e;return t(".dialog-extend-collapse-css").length?void 0:(e="",e+='<style class="dialog-extend-collapse-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-collapse { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse:hover,",e+=".ui-dialog .ui-dialog-titlebar-collapse:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_collapse_restore:function(){return t(this).dialogExtend("restore")}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{maximize:{option:"maximizable",state:"maximized"}},options:{maximizable:!1,icons:{maximize:"ui-icon-extlink"},beforeMaximize:null,maximize:null},maximize:function(){var e,n;return null==this.options.mainMenuHeight&&(this.options.mainMenuHeight=0),null==this.options.statusBarHeight&&(this.options.statusBarHeight=0),e=t(window).height()-(this.options.mainMenuHeight+this.options.statusBarHeight),n=t(window).width(),this._trigger("beforeMaximize"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:e,width:n,position:{my:"left top",at:"left top+"+this.options.mainMenuHeight}}),this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},_restore_maximized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").css("position",e.position.mode).find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}),t(this.element[0]).dialog("option","draggable")?t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"):void 0},_initStyles_maximize:function(){var e;return t(".dialog-extend-maximize-css").length?void 0:(e="",e+='<style class="dialog-extend-maximize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-maximize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize:hover,",e+=".ui-dialog .ui-dialog-titlebar-maximize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{minimize:{option:"minimizable",state:"minimized"}},options:{minimizable:!1,minimizeLocation:"left",icons:{minimize:"ui-icon-minus"},beforeMinimize:null,minimize:null},minimize:function(){var e,n,i,r;return n=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,i=200,e=t("#dialog-extend-fixed-container").length?t("#dialog-extend-fixed-container"):t('<div id="dialog-extend-fixed-container"></div>').appendTo("body"),e.css({position:"fixed",bottom:1,left:1,right:1,"z-index":9999}),r=t("<div/>").css({"float":this.options.minimizeLocation,margin:1}),e.append(r),t(this.element[0]).data("dialog-extend-minimize-overlay",r),this._trigger("beforeMinimize"),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("option",{resizable:!1,draggable:!1,height:n,width:i}).on("dialogclose",this._minimize_removeOverlay).dialog("widget").css("position","static").appendTo(r).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-titlebar").each(function(){var e,n,i;return i=t(this),e=i.find(".ui-dialog-titlebar-buttonpane"),n=i.find(".ui-dialog-title"),n.css({overflow:"hidden",width:i.width()-e.width()+10})}).end().find(".ui-dialog-content").hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("minimized"),this._toggleButtons(),this._trigger("minimize")},_restore_minimized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:e.position.mode}).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-title").css("width","auto").end().find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}).off("dialogclose",this._minimize_removeOverlay),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"),t(this.element[0]).data("dialog-extend-minimize-overlay").remove(),t(this.element[0]).removeData("dialog-extend-overlay")},_initStyles_minimize:function(){var e;return t(".dialog-extend-minimize-css").length?void 0:(e="",e+='<style class="dialog-extend-minimize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-minimize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize:hover,",e+=".ui-dialog .ui-dialog-titlebar-minimize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_verifyOptions_minimize:function(){var e;return!this.options.minimizeLocation||"left"!==(e=this.options.minimizeLocation)&&"right"!==e?(t.error("jQuery.dialogExtend Error : Invalid <minimizeLocation> value '"+this.options.minimizeLocation+"'"),this.options.minimizeLocation="left"):void 0},_minimize_removeOverlay:function(){return t(this).dialogExtend("restore"),t(this).dialog("widget").appendTo(t("body")),t(this).data("dialog-extend-minimize-overlay").remove(),t(this).removeData("dialog-extend-overlay")}})}.call(this),this.Handlebars={},function(t){t.VERSION="1.0.0-rc.3",t.COMPILER_REVISION=2,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},t.helpers={},t.partials={},t.registerHelper=function(t,e,n){n&&(e.not=n),this.helpers[t]=e},t.registerPartial=function(t,e){this.partials[t]=e},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Could not find property '"+t+"'")});var e=Object.prototype.toString,n="[object Function]";t.registerHelper("blockHelperMissing",function(i,r){var o=r.inverse||function(){},s=r.fn,a=e.call(i);return a===n&&(i=i.call(this)),i===!0?s(this):i===!1||null==i?o(this):"[object Array]"===a?i.length>0?t.helpers.each(i,r):o(this):s(i)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(e>=t.logger.level){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,n){var i,r=n.fn,o=n.inverse,s=0,a="";if(n.data&&(i=t.createFrame(n.data)),e&&"object"==typeof e)if(e instanceof Array)for(var l=e.length;l>s;s++)i&&(i.index=s),a+=r(e[s],{data:i});else for(var u in e)e.hasOwnProperty(u)&&(i&&(i.key=u),a+=r(e[u],{data:i}),s++);return 0===s&&(a=o(this)),a}),t.registerHelper("if",function(i,r){var o=e.call(i);return o===n&&(i=i.call(this)),!i||t.Utils.isEmpty(i)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){var i=n.fn,r=n.inverse;return n.fn=r,n.inverse=i,t.helpers["if"].call(this,e,n)}),t.registerHelper("with",function(t,e){return e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}(this.Handlebars);var handlebars=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,e,n,i,r,o){var s=o.length-1;switch(r){case 1:return o[s-1];case 2:this.$=new i.ProgramNode([],o[s]);break;case 3:this.$=new i.ProgramNode(o[s-2],o[s]);break;case 4:this.$=new i.ProgramNode(o[s-1],[]);break;case 5:this.$=new i.ProgramNode(o[s]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[s]];break;case 9:o[s-1].push(o[s]),this.$=o[s-1];break;case 10:this.$=new i.BlockNode(o[s-2],o[s-1].inverse,o[s-1],o[s]);break;case 11:this.$=new i.BlockNode(o[s-2],o[s-1],o[s-1].inverse,o[s]);break;case 12:this.$=o[s];break;case 13:this.$=o[s];break;case 14:this.$=new i.ContentNode(o[s]);break;case 15:this.$=new i.CommentNode(o[s]);break;case 16:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 17:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 18:this.$=o[s-1];break;case 19:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 20:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1],!0);break;case 21:this.$=new i.PartialNode(o[s-1]);break;case 22:this.$=new i.PartialNode(o[s-2],o[s-1]);break;case 23:break;case 24:this.$=[[o[s-2]].concat(o[s-1]),o[s]];break;case 25:this.$=[[o[s-1]].concat(o[s]),null];break;case 26:this.$=[[o[s-1]],o[s]];break;case 27:this.$=[[o[s]],null];break;case 28:this.$=[[new i.DataNode(o[s])],null];break;case 29:o[s-1].push(o[s]),this.$=o[s-1];break;case 30:this.$=[o[s]];break;case 31:this.$=o[s];break;case 32:this.$=new i.StringNode(o[s]);break;case 33:this.$=new i.IntegerNode(o[s]);break;case 34:this.$=new i.BooleanNode(o[s]);break;case 35:this.$=new i.DataNode(o[s]);break;case 36:this.$=new i.HashNode(o[s]);break;case 37:o[s-1].push(o[s]),this.$=o[s-1];break;case 38:this.$=[o[s]];break;case 39:this.$=[o[s-2],o[s]];break;case 40:this.$=[o[s-2],new i.StringNode(o[s])];break;case 41:this.$=[o[s-2],new i.IntegerNode(o[s])];break;case 42:this.$=[o[s-2],new i.BooleanNode(o[s])];break;case 43:this.$=[o[s-2],new i.DataNode(o[s])];break;case 44:this.$=new i.PartialNameNode(o[s]);break;case 45:this.$=new i.IdNode(o[s]);break;case 46:o[s-2].push(o[s]),this.$=o[s-2];break;case 47:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t){throw Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,u=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var c=this.lexer.yylloc;o.push(c);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,x,S={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||p===void 0)&&(p=e()),m=s[g]&&s[g][p]),m===void 0||!m.length||!m[0]){var T="";if(!h){x=[];for(y in s[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");T=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(T,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[m[1]][1],S.$=r[r.length-b],S._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(S._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(S,a,u,l,this.yy,m[1],r,o),v!==void 0)return v;b&&(i=i.slice(0,2*-1*b),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),r.push(S.$),o.push(S._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;o.length>s&&(n=this._input.match(this.rules[o[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 3:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),30;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),30;case 23:return e.yytext=e.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return e.yytext=e.yytext.substr(1,e.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();Handlebars.Parser=handlebars,Handlebars.parse=function(t){return t.constructor===Handlebars.AST.ProgramNode?t:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(t))},Handlebars.print=function(t){return(new Handlebars.PrintVisitor).accept(t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(t,e){this.type="program",this.statements=t,e&&(this.inverse=new Handlebars.AST.ProgramNode(e))
},Handlebars.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(r.length||e)},Handlebars.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e};var t=function(t,e){if(t.original!==e.original)throw new Handlebars.Exception(t.original+" doesn't match "+e.original)};Handlebars.AST.BlockNode=function(e,n,i,r){t(e.id,r),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(t){this.type="content",this.string=t},Handlebars.AST.HashNode=function(t){this.type="hash",this.pairs=t},Handlebars.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");for(var e=[],n=0,i=0,r=t.length;r>i;i++){var o=t[i];if(".."===o||"."===o||"this"===o){if(e.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);".."===o?n++:this.isScoped=!0}else e.push(o)}this.parts=e,this.string=e.join("."),this.depth=n,this.isSimple=1===t.length&&!this.isScoped&&0===n,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t},Handlebars.AST.DataNode=function(t){this.type="DATA",this.id=t},Handlebars.AST.StringNode=function(t){this.type="STRING",this.string=t,this.stringModeValue=t},Handlebars.AST.IntegerNode=function(t){this.type="INTEGER",this.integer=t,this.stringModeValue=Number(t)},Handlebars.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},Handlebars.AST.CommentNode=function(t){this.type="comment",this.comment=t}}();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;errorProps.length>e;e++)this[errorProps[e]]=t[errorProps[e]]},Handlebars.Exception.prototype=Error(),Handlebars.SafeString=function(t){this.string=t},Handlebars.SafeString.prototype.toString=function(){return""+this.string},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=/[&<>"'`]/g,n=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(t){return t instanceof Handlebars.SafeString?""+t:null==t||t===!1?"":n.test(t)?t.replace(e,i):t},isEmpty:function(t){return t||0===t?"[object Array]"===Object.prototype.toString.call(t)&&0===t.length?!0:!1:!0}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(t,e){t.prototype={compiler:t,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;s>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;i.args.length>o;o++)if(i.args[o]!==r.args[o])return!1}return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,r=n.length;r>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,n,i):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?this.opcode("pushStringParam",n.stringModeValue,n.type):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id)},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var n=function(t){this.value=t};e.prototype={nameLookup:function(t,n){return/^[0-9]+$/.test(n)?t+"["+n+"]":e.isValidJavaScriptVariableName(n)?t+"."+n:t+"['"+n+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;for(this.i=0,s=o.length;s>this.i;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args);return this.createFunctionContext(i)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = helpers || "+e+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+e+".partials;"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)i.push("depth"+this.environment.depths.list[r]);var s=this.mergeSource();if(!this.isChild){var a=Handlebars.COMPILER_REVISION,l=Handlebars.REVISION_CHANGES[a];s="this.compilerInfo = ["+a+",'"+l+"'];\n"+s}if(t)return i.push(s),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+s+"}";return Handlebars.log(Handlebars.logger.DEBUG,u+"\n\n"),u},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.push(this.nameLookup("data",t,"data"))},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&this.register("hashTypes","{"+t.types.join(",")+"}"),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0);this.push(n.name),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.source.push("else { "+o+" = "+r+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n=this.popStack();this.options.stringParams&&(e=this.popStack(),this.popStack());var i=this.hash;e&&i.types.push("'"+t+"': "+e),i.values.push("'"+t+"': ("+n+")")},compiler:e,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;s>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return 0===i.length?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i="",r=this.isInline();if(r){var o=this.popStack(!0);if(o instanceof n)e=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var a=t.call(this,e);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+a+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+i+a+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();return!t&&i instanceof n?i.value:(e||this.stackSlot--,i)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var r=this.nameLookup("helpers",e,"helper");return{params:i,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,r,o,s=[],a=[],l=[];s.push("hash:"+this.popStack()),r=this.popStack(),o=this.popStack(),(o||r)&&(o||(this.context.aliases.self="this",o="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),s.push("inverse:"+r),s.push("fn:"+o));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),r=e.RESERVED_WORDS={},o=0,s=i.length;s>o;o++)r[i[o]]=!0;e.isValidJavaScriptVariableName=function(t){return!e.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(t,e){if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=Handlebars.parse(t),i=(new Handlebars.Compiler).compile(n,e);return(new Handlebars.JavaScriptCompiler).compile(i,e)},Handlebars.compile=function(t,e){function n(){var n=Handlebars.parse(t),i=(new Handlebars.Compiler).compile(n,e),r=(new Handlebars.JavaScriptCompiler).compile(i,e,void 0,!0);return Handlebars.template(r)}if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i;return function(t,e){return i||(i=n()),i.call(this,t,e)}},Handlebars.VM={template:function(t){var e={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(t,e,n){var i=this.programs[t];return n?Handlebars.VM.program(e,n):i?i:i=this.programs[t]=Handlebars.VM.program(e)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var r=t.call(e,Handlebars,n,i.helpers,i.partials,i.data),o=e.compilerInfo||[],s=o[0]||1,a=Handlebars.COMPILER_REVISION;if(s!==a){if(a>s){var l=Handlebars.REVISION_CHANGES[a],u=Handlebars.REVISION_CHANGES[s];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return r}},programWithDepth:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(i,r){return r=r||{},t.apply(this,[i,r.data||e].concat(n))}},program:function(t,e){return function(n,i){return i=i||{},t(n,i.data||e)}},noop:function(){return""},invokePartial:function(t,e,n,i,r,o){var s={helpers:i,partials:r,data:o};if(void 0===t)throw new Handlebars.Exception("The partial "+e+" could not be found");if(t instanceof Function)return t(n,s);if(Handlebars.compile)return r[e]=Handlebars.compile(t,{data:void 0!==o}),r[e](n,s);throw new Handlebars.Exception("The partial "+e+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,//! OpenSeadragon 0.9.129
//! Built on 2013-08-05
//! Git commit: v0.9.129-29-g967f2e4-dirty
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
window.OpenSeadragon=window.OpenSeadragon||function(t){return new OpenSeadragon.Viewer(t)},function(t){var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null===t||void 0===t?t+"":e[n.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return void 0===n||i.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0}}(OpenSeadragon),function(t){function e(t,e){return e&&t!=document.body?document.body:t.offsetParent}t.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=arguments.length,l=!1,u=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===u&&(s=this,--u);a>u;u++)if(t=arguments[u],null!==t||void 0!==t)for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},s[e]=OpenSeadragon.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,springStiffness:7,clickTimeThreshold:300,clickDistThreshold:5,zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,animationTime:1.2,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,showSequenceControl:!0,preserveViewport:!1,showNavigationControl:!0,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorHeight:null,navigatorWidth:null,navigatorPosition:null,navigatorSizeRatio:.2,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,onPageChange:null,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},navPrevNextWrap:!1,debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(n){var i,r,o=new t.Point;for(n=t.getElement(n),i="fixed"==t.getElementStyle(n).position,r=e(n,i);r;)o.x+=n.offsetLeft,o.y+=n.offsetTop,i&&(o=o.plus(t.getPageScroll())),n=r,i="fixed"==t.getElementStyle(n).position,r=e(n,i);return o},getElementSize:function(e){return e=t.getElement(e),new t.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=t.getElement(e),e.currentStyle}:function(e){return e=t.getElement(e),window.getComputedStyle(e,"")},getEvent:function(e){return t.getEvent=e?function(t){return t}:function(){return window.event},t.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.pageX,n.y=e.pageY,n};else{if("number"!=typeof e.clientX)throw Error("Unknown event mouse position, no known technique.");t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,n}}return t.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},n=document.body||{};return t.getPageScroll="number"==typeof window.pageXOffset?function(){return new t.Point(window.pageXOffset,window.pageYOffset)}:n.scrollLeft||n.scrollTop?function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)}:e.scrollLeft||e.scrollTop?function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}:function(){return new t.Point(0,0)},t.getPageScroll()},getWindowSize:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.innerWidth)t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!n.clientWidth&&!n.clientHeight)throw Error("Unknown window size, no known technique.");t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)}}return t.getWindowSize()},makeCenteredNode:function(e){e=t.getElement(e);var n=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(n[1].style,{display:"table-row"}),t.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(e),n[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return t.now=Date.now?Date.now:function(){return(new Date).getTime()},t.now()},makeTransparentImage:function(e){return t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img");return n.src=e,n},t.Browser.vendor==t.BROWSERS.IE&&7>t.Browser.version&&(t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img"),i=null;return i=t.makeNeutralElement("span"),i.style.display="inline-block",n.onload=function(){i.style.width=i.style.width||n.width+"px",i.style.height=i.style.height||n.height+"px",n.onload=null,n=null},n.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),t.makeTransparentImage(e)},setElementOpacity:function(e,n,i){var r,o;e=t.getElement(e),i&&!t.Browser.alpha&&(n=Math.round(n)),t.Browser.opacity?e.style.opacity=1>n?n:"":1>n?(r=Math.round(100*n),o="alpha(opacity="+r+")",e.style.filter=o):e.style.filter=""},addClass:function(e,n){e=t.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+n+" ")&&(e.className+=" "+n):e.className=n},removeClass:function(e,n){var i,r,o=[];for(e=t.getElement(e),i=e.className.split(/\s+/),r=0;i.length>r;r++)i[r]&&i[r]!==n&&o.push(i[r]);e.className=o.join(" ")},addEvent:function(e,n,i,r){if(e=t.getElement(e),e.addEventListener)t.addEvent=function(e,n,i,r){e=t.getElement(e),e.addEventListener(n,i,r)};else{if(!e.attachEvent)throw Error("Unable to attach event handler, no known technique.");t.addEvent=function(e,n,i,r){e=t.getElement(e),e.attachEvent("on"+n,i),r&&e.setCapture&&e.setCapture()}}return t.addEvent(e,n,i,r)},removeEvent:function(e,n,i,r){if(e=t.getElement(e),e.removeEventListener)t.removeEvent=function(e,n,i,r){e=t.getElement(e),e.removeEventListener(n,i,r)};else{if(!e.detachEvent)throw Error("Unable to detach event handler, no known technique.");t.removeEvent=function(e,n,i,r){e=t.getElement(e),e.detachEvent("on"+n,i),r&&e.releaseCapture&&e.releaseCapture()}}return t.removeEvent(e,n,i,r)},cancelEvent:function(e){e=t.getEvent(e),t.cancelEvent=e.preventDefault?function(t){t.preventDefault()}:function(e){e=t.getEvent(e),e.cancel=!0,e.returnValue=!1},t.cancelEvent(e)},stopEvent:function(e){e=t.getEvent(e),t.stopEvent=e.stopPropagation?function(t){t.stopPropagation()}:function(e){e=t.getEvent(e),e.cancelBubble=!0},t.stopEvent(e)},createCallback:function(t,e){var n,i=[];for(n=2;arguments.length>n;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;arguments.length>n;n++)r.push(arguments[n]);return e.apply(t,r)}},getUrlParameter:function(t){var e=r[t];return e?e:null},createAjaxRequest:function(){var e;if(window.XMLHttpRequest)t.createAjaxRequest=function(){return new XMLHttpRequest},e=new XMLHttpRequest;else if(window.ActiveXObject)for(var i=0;n.length>i;i++)try{e=new ActiveXObject(n[i]),t.createAjaxRequest=function(){return new ActiveXObject(n[i])};break}catch(r){continue}if(!e)throw Error("Browser doesn't support XMLHttpRequest.");return e},makeAjaxRequest:function(e,n,i){var r=t.createAjaxRequest();if(!t.isFunction(n))throw Error("makeAjaxRequest requires a success callback");r.onreadystatechange=function(){4==r.readyState&&(r.onreadystatechange=function(){},200==r.status?n(r):(t.console.log("AJAX request returned %s: %s",r.status,e),t.isFunction(i)&&i(r)))};try{r.open("GET",e,!0),r.send(null)}catch(o){t.console.log("%s while making AJAX request: %s",o.name,o.message),r.onreadystatechange=function(){},t.isFunction(i)&&i(r,o)}},jsonp:function(e){var n,i=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+t.now(),s=window[o],a="$1"+o+"$2",l=e.param||"callback",u=e.callback;i=i.replace(/(\=)\?(&|$)|\?\?/i,a),i+=(/\?/.test(i)?"&":"?")+l+"="+o,window[o]=function(e){if(s)window[o]=s;else try{delete window[o]}catch(n){}u&&t.isFunction(u)&&u(e)},n=document.createElement("script"),(void 0!==e.async||!1!==e.async)&&(n.async="async"),e.scriptCharset&&(n.charset=e.scriptCharset),n.src=i,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0)},r.insertBefore(n,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.ActiveXObject)t.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e};else{if(!window.DOMParser)throw Error("Browser doesn't support XML DOM.");t.parseXml=function(t){var e,n=null;return e=new DOMParser,n=e.parseFromString(t,"text/xml")}}return t.parseXml(e)},imageFormatSupported:function(t){return t=t?t:"",!!i[t.toLowerCase()]}}),t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],i={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},r={};!function(){var e=(navigator.appName,navigator.appVersion),n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0&&(t.Browser.vendor=n.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(e)}var i,o,s,a=window.location.search.substring(1),l=a.split("&");for(s=0;l.length>s;s++)i=l[s],o=i.indexOf("="),o>0&&(r[i.substring(0,o)]=decodeURIComponent(i.substring(o+1)));t.Browser.alpha=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version||t.Browser.vendor==t.BROWSERS.CHROME&&2>t.Browser.version),t.Browser.opacity=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version)}();var o=function(){};t.console=window.console||{log:o,debug:o,info:o,warn:o,error:o},function(e){var n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(n&&i)t.requestAnimationFrame=function(){return n.apply(e,arguments)},t.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var r,o=[],s=[],a=0;t.requestAnimationFrame=function(e){return o.push([++a,e]),r||(r=setInterval(function(){if(o.length){var e=t.now(),n=s;for(s=o,o=n;s.length;)s.shift()[1](e)}else clearInterval(r),r=void 0},20)),a},t.cancelAnimationFrame=function(t){var e,n;for(e=0,n=o.length;n>e;e+=1)if(o[e][0]===t)return o.splice(e,1),void 0;for(e=0,n=s.length;n>e;e+=1)if(s[e][0]===t)return s.splice(e,1),void 0}}}(window),t._processDZIError=function(t){var e=t.getElementsByTagName("Message")[0],n=e.firstChild.nodeValue;throw Error(n)}}(OpenSeadragon),function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},n="webkit moz o ms khtml".split(" ");if(document.cancelFullScreen!==void 0)e.supportsFullScreen=!0;else for(var i=0,r=n.length;r>i;i++)if(e.prefix=n[i],document[e.prefix+"CancelFullScreen"]!==void 0){e.supportsFullScreen=!0;break}e.supportsFullScreen?(e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},e.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):window.ActiveXObject!==void 0&&(e.requestFullScreen=function(){var t=new ActiveXObject("WScript.Shell");return null!==t&&t.SendKeys("{F11}"),!1},e.cancelFullScreen=e.requestFullScreen),t.extend(t,e)}(OpenSeadragon),function(t){t.EventHandler=function(){this.events={}},t.EventHandler.prototype={addHandler:function(e,n){var i=this.events[e];i||(this.events[e]=i=[]),n&&t.isFunction(n)&&(i[i.length]=n)},removeHandler:function(e,n){var i,r=this.events[e],o=[];if(r&&t.isArray(r)){for(i=0;r.length>i;i++)r[i]!==n&&o.push(r[i]);this.events[e]=o}},removeAllHandlers:function(t){this.events[t]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var i,r=e.length;for(i=0;r>i;i++)e[i]&&e[i](t,n)}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&(e||(e={}),n(this,e))}}}(OpenSeadragon),function(t){function e(e){var n,i,r=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],o=I[e.hash];if(!o.tracking){for(i=0;r.length>i;i++)n=r[i],t.addEvent(e.element,n,o[n],!1);o.tracking=!0,P[e.hash]=e}}function n(e){var n,i,r=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],s=I[e.hash];if(s.tracking){for(i=0;r.length>i;i++)n=r[i],t.removeEvent(e.element,n,s[n],!1);o(e),s.tracking=!1,delete P[e.hash]}}function i(t){return I[t.hash].insideElement}function r(e){var n=I[e.hash];n.capturing||(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.removeEvent(e.element,"mouseup",n.mouseup,!1),t.addEvent(e.element,"mouseup",n.mouseupie,!0),t.addEvent(e.element,"mousemove",n.mousemoveie,!0)):(t.addEvent(window,"mouseup",n.mouseupwindow,!0),t.addEvent(window,"mousemove",n.mousemove,!0)),n.capturing=!0)}function o(e){var n=I[e.hash];n.capturing&&(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.removeEvent(e.element,"mousemove",n.mousemoveie,!0),t.removeEvent(e.element,"mouseup",n.mouseupie,!0),t.addEvent(e.element,"mouseup",n.mouseup,!1)):(t.removeEvent(window,"mousemove",n.mousemove,!0),t.removeEvent(window,"mouseup",n.mouseupwindow,!0)),n.capturing=!1)}function s(t,e,n){var i;for(i in P)P.hasOwnProperty(i)&&t.hash!=i&&e(P[i],n)}function a(e,n){var i;e.focusHandler&&(i=e.focusHandler(e,n),i===!1&&t.cancelEvent(n))}function l(e,n){var i;e.blurHandler&&(i=e.blurHandler(e,n),i===!1&&t.cancelEvent(n))}function u(e,n){var i;e.keyHandler&&(i=e.keyHandler(e,n.keyCode?n.keyCode:n.charCode,n.shiftKey),i||t.cancelEvent(n))}function h(e,n){var i,r=I[e.hash];n=t.getEvent(n),t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&r.capturing&&!M(n.srcElement,e.element)&&s(e,h,n);var o=n.target?n.target:n.srcElement,a=n.relatedTarget?n.relatedTarget:n.fromElement;M(e.element,o)&&!M(e.element,a)&&(r.insideElement=!0,e.enterHandler&&(i=e.enterHandler(e,E(n,e.element),r.buttonDown,H),i===!1&&t.cancelEvent(n)))}function c(e,n){var i,r=I[e.hash];n=t.getEvent(n),t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&r.capturing&&!M(n.srcElement,e.element)&&s(e,c,n);var o=n.target?n.target:n.srcElement,a=n.relatedTarget?n.relatedTarget:n.toElement;M(e.element,o)&&!M(e.element,a)&&(r.insideElement=!1,e.exitHandler&&(i=e.exitHandler(e,E(n,e.element),r.buttonDown,H),i===!1&&t.cancelEvent(n)))}function d(e,n,i){var o,s=I[e.hash];n=t.getEvent(n),2!=n.button&&(s.buttonDown=!0,s.lastPoint=_(n),s.lastMouseDownPoint=s.lastPoint,s.lastMouseDownTime=t.now(),e.pressHandler&&(o=e.pressHandler(e,E(n,e.element)),o===!1&&t.cancelEvent(n)),(e.pressHandler||e.dragHandler)&&t.cancelEvent(n),i||(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&N?t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&z.push(e):(r(e),N=!0,z=[e])))}function p(e,n){var i,r;1==n.touches.length&&1==n.targetTouches.length&&1==n.changedTouches.length&&(I[e.hash].lastTouch=n.touches[0],h(e,n.changedTouches[0]),d(e,n.touches[0],!0)),2==n.touches.length&&(i=_(n.touches[0]),r=_(n.touches[1]),I[e.hash].lastPinchDelta=Math.abs(i.x-r.x)+Math.abs(i.y-r.y),I[e.hash].pinchMidpoint=new t.Point((i.x+r.x)/2,(i.y+r.y)/2)),n.preventDefault()}function f(e,n){var i,r=I[e.hash],o=r.buttonDown,s=r.insideElement;n=t.getEvent(n),2!=n.button&&(r.buttonDown=!1,e.releaseHandler&&(i=e.releaseHandler(e,E(n,e.element),o,s),i===!1&&t.cancelEvent(n)),o&&s&&w(e,n))}function g(t,e){0===e.touches.length&&0===e.targetTouches.length&&1==e.changedTouches.length&&(I[t.hash].lastTouch=null,v(t,e.changedTouches[0],!0),c(t,e.changedTouches[0])),2==e.touches.length+e.changedTouches.length&&(I[t.hash].lastPinchDelta=null,I[t.hash].pinchMidpoint=null),e.preventDefault()}function m(e,n){var r,s;if(n=t.getEvent(n),2!=n.button){for(s=0;z.length>s;s++)r=z[s],i(r)||f(r,n);o(e),N=!1,n.srcElement.fireEvent("on"+n.type,document.createEventObject(n)),t.stopEvent(n)}}function v(t,e,n){I[t.hash].insideElement||f(t,e),n||o(t)}function y(e,n){e.clickHandler&&t.cancelEvent(n)}function b(e,n){var i,r=0;n||(n=window.event),n.wheelDelta?(r=n.wheelDelta,window.opera&&(r=-r)):n.detail&&(r=-n.detail),r=r>0?1:-1,e.scrollHandler&&(i=e.scrollHandler(e,E(n,e.element),r,n.shiftKey),i===!1&&t.cancelEvent(n))}function w(e,n){var i,r=I[e.hash];if(n=t.getEvent(n),2!=n.button){var o=t.now()-r.lastMouseDownTime,s=_(n),a=r.lastMouseDownPoint.distanceTo(s),l=e.clickTimeThreshold>=o&&e.clickDistThreshold>=a;e.clickHandler&&(i=e.clickHandler(e,E(n,e.element),l,n.shiftKey),i===!1&&t.cancelEvent(n))}}function x(e,n){var i,r,o,s=I[e.hash];n=t.getEvent(n),o=_(n),i=o.minus(s.lastPoint),s.lastPoint=o,e.dragHandler&&(r=e.dragHandler(e,E(n,e.element),i,n.shiftKey),r===!1&&t.cancelEvent(n))}function S(t,e){var n,i,r;1===e.touches.length&&1===e.targetTouches.length&&1===e.changedTouches.length&&I[t.hash].lastTouch.identifier===e.touches[0].identifier?x(t,e.touches[0]):2===e.touches.length&&(n=_(e.touches[0]),i=_(e.touches[1]),r=Math.abs(n.x-i.x)+Math.abs(n.y-i.y),Math.abs(I[t.hash].lastPinchDelta-r)>75&&(b(t,{shift:!1,pageX:I[t.hash].pinchMidpoint.x,pageY:I[t.hash].pinchMidpoint.y,detail:I[t.hash].lastPinchDelta>r?1:-1}),I[t.hash].lastPinchDelta=r)),e.preventDefault()}function T(e,n){var i;for(i=0;z.length>i;i++)x(z[i],n);t.stopEvent(n)}function _(e){return t.getMousePosition(e)}function E(e,n){var i=t.getMousePosition(e),r=t.getElementPosition(n);return i.minus(r)}function M(t,e){for(var n=document.body;e&&t!=e&&n!=e;)try{e=e.parentNode}catch(i){return!1}return t==e}function C(){H=!0}function k(){H=!1}var H=!1,N=!1,P={},z=[],I={};t.MouseTracker=function(e){var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.releaseHandler=e.releaseHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dragHandler=e.dragHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var i=this;I[this.hash]={mouseover:function(t){h(i,t)},mouseout:function(t){c(i,t)},mousedown:function(t){d(i,t)},mouseup:function(t){f(i,t)},click:function(t){y(i,t)},DOMMouseScroll:function(t){b(i,t)},mousewheel:function(t){b(i,t)},mouseupie:function(t){m(i,t)},mousemoveie:function(t){T(i,t)},mouseupwindow:function(t){v(i,t)},mousemove:function(t){x(i,t)},touchstart:function(t){p(i,t)},touchmove:function(t){S(i,t)},touchend:function(t){g(i,t)},keypress:function(t){u(i,t)},focus:function(t){a(i,t)},blur:function(t){l(i,t)},tracking:!1,capturing:!1,buttonDown:!1,insideElement:!1,lastPoint:null,lastMouseDownTime:null,lastMouseDownPoint:null,lastPinchDelta:0}},t.MouseTracker.prototype={isTracking:function(){return I[this.hash].tracking},setTracking:function(t){return t?e(this):n(this),this},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},releaseHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dragHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},function(){t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.addEvent(document,"mousedown",C,!1),t.addEvent(document,"mouseup",k,!1)):(t.addEvent(window,"mousedown",C,!0),t.addEvent(window,"mouseup",k,!0))}()}(OpenSeadragon),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},t.Control=function(e,n,i){var r=e.parentNode;"number"==typeof n&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=n.attachToViewer===void 0?!0:n.attachToViewer,this.autoFade=n.autoFade===void 0?!0:n.autoFade,this.element=e,this.anchor=n.anchor,this.container=i,this.wrapper=t.makeNeutralElement("span"),this.wrapper.style.display="inline-block",this.wrapper.appendChild(this.element),this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%"),n.attachToViewer?this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(t){function e(t,e){var n,i=t.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==e)return n;return-1}t.ControlDock=function(e){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("form"),controls:[]},e),this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;r.length>i;i++)n=r[i],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,i){n=t.getElement(n);var r=null;if(!(e(this,n)>=0)){switch(i.anchor){case t.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;default:case t.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);var i=e(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),function($){function _getSafeElemSize(t){return t=$.getElement(t),new $.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function openTileSource(t,e){var n,i,r=t;for(r.source&&r.close(),r.canvas.innerHTML="",THIS[r.hash].prevContainerSize=_getSafeElemSize(r.container),r.collectionMode?(r.source=new $.TileSourceCollection({rows:r.collectionRows,layout:r.collectionLayout,tileSize:r.collectionTileSize,tileSources:r.tileSources,tileMargin:r.collectionTileMargin}),r.viewport=r.viewport?r.viewport:new $.Viewport({collectionMode:!0,collectionTileSource:r.source,containerSize:THIS[r.hash].prevContainerSize,contentSize:r.source.dimensions,springStiffness:r.springStiffness,animationTime:r.animationTime,showNavigator:!1,minZoomImageRatio:1,maxZoomPixelRatio:1,viewer:r})):(e&&(r.source=e),r.viewport=r.viewport?r.viewport:new $.Viewport({containerSize:THIS[r.hash].prevContainerSize,contentSize:r.source.dimensions,springStiffness:r.springStiffness,animationTime:r.animationTime,minZoomImageRatio:r.minZoomImageRatio,maxZoomPixelRatio:r.maxZoomPixelRatio,visibilityRatio:r.visibilityRatio,wrapHorizontal:r.wrapHorizontal,wrapVertical:r.wrapVertical,defaultZoomLevel:r.defaultZoomLevel,minZoomLevel:r.minZoomLevel,maxZoomLevel:r.maxZoomLevel,viewer:r})),r.preserveViewport&&r.viewport.resetContentSize(r.source.dimensions),r.source.overlays=r.source.overlays||[],r.drawer=new $.Drawer({viewer:r,source:r.source,viewport:r.viewport,element:r.canvas,overlays:[].concat(r.overlays).concat(r.source.overlays),maxImageCacheCount:r.maxImageCacheCount,imageLoaderLimit:r.imageLoaderLimit,minZoomImageRatio:r.minZoomImageRatio,wrapHorizontal:r.wrapHorizontal,wrapVertical:r.wrapVertical,immediateRender:r.immediateRender,blendTime:r.blendTime,alwaysBlend:r.alwaysBlend,minPixelRatio:r.collectionMode?0:r.minPixelRatio,timeout:r.timeout,debugMode:r.debugMode,debugGridColor:r.debugGridColor}),r.showNavigator&&!r.collectionMode&&(r.navigator?r.navigator.open(e):r.navigator=new $.Navigator({id:r.navigatorId,position:r.navigatorPosition,sizeRatio:r.navigatorSizeRatio,height:r.navigatorHeight,width:r.navigatorWidth,tileSources:e,tileHost:r.tileHost,prefixUrl:r.prefixUrl,overlays:r.overlays,viewer:r})),r.showReferenceStrip&&!r.referenceStrip&&(r.referenceStrip=new $.ReferenceStrip({id:r.referenceStripElement,position:r.referenceStripPosition,sizeRatio:r.referenceStripSizeRatio,scroll:r.referenceStripScroll,height:r.referenceStripHeight,width:r.referenceStripWidth,tileSources:r.tileSources,tileHost:r.tileHost,prefixUrl:r.prefixUrl,overlays:r.overlays,viewer:r})),THIS[r.hash].animating=!1,THIS[r.hash].forceRedraw=!0,r._updateRequestId=scheduleUpdate(r,updateMulti),i=0;r.overlayControls.length>i;i++)n=r.overlayControls[i],n.point?r.drawer.addOverlay(n.id,new $.Point(n.point.X,n.point.Y),$.OverlayPlacement.TOP_LEFT):r.drawer.addOverlay(n.id,new $.Rect(n.rect.Point.X,n.rect.Point.Y,n.rect.Width,n.rect.Height),n.placement);return VIEWERS[r.hash]=r,r.raiseEvent("open",{source:e,viewer:r}),r}function scheduleUpdate(t,e){return $.requestAnimationFrame(function(){e(t)})}function scheduleControlsFade(t){$.requestAnimationFrame(function(){updateControlsFade(t)})}function beginControlsAutoHide(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=$.now()+t.controlsFadeDelay,window.setTimeout(function(){scheduleControlsFade(t)},t.controlsFadeDelay))}function updateControlsFade(t){var e,n,i,r;if(t.controlsShouldFade){for(e=$.now(),n=e-t.controlsFadeBeginTime,i=1-n/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),r=t.controls.length-1;r>=0;r--)t.controls[r].autoFade&&t.controls[r].setOpacity(i);i>0&&scheduleControlsFade(t)}}function abortControlsAutoHide(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function onFocus(){abortControlsAutoHide(this)}function onBlur(){beginControlsAutoHide(this)}function onCanvasClick(t,e,n,i){var r,o;this.viewport&&n&&(r=this.zoomPerClick,o=i?1/r:r,this.viewport.zoomBy(o,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-click",{tracker:t,position:e,quick:n,shift:i})}function onCanvasDrag(t,e,n,i){this.viewport&&(this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(n.negate())),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-click",{tracker:t,position:e,delta:n,shift:i})}function onCanvasRelease(t,e,n,i){n&&this.viewport&&this.viewport.applyConstraints(),this.raiseEvent("canvas-release",{tracker:t,position:e,insideElementPress:n,insideElementRelease:i})}function onCanvasScroll(t,e,n,i){var r;return this.viewport&&(r=Math.pow(this.zoomPerScroll,n),this.viewport.zoomBy(r,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t,position:e,scroll:n,shift:i}),!1}function onContainerExit(t,e,n,i){n||(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-exit",{tracker:t,position:e,buttonDownElement:n,buttonDownAny:i})
}function onContainerRelease(t,e,n,i){i||(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-release",{tracker:t,position:e,insideElementPress:n,insideElementRelease:i})}function onContainerEnter(t,e,n,i){THIS[this.hash].mouseInside=!0,abortControlsAutoHide(this),this.raiseEvent("container-enter",{tracker:t,position:e,buttonDownElement:n,buttonDownAny:i})}function updateMulti(t){return t.source?(updateOnce(t),t.source&&(t._updateRequestId=scheduleUpdate(t,updateMulti)),void 0):(t._updateRequestId=null,void 0)}function updateOnce(t){var e,n;t.source&&(e=_getSafeElemSize(t.container),e.equals(THIS[t.hash].prevContainerSize)||(t.viewport.resize(e,!0),THIS[t.hash].prevContainerSize=e),n=t.viewport.update(),t.referenceStrip&&(n=t.referenceStrip.update(t.viewport)||n),!THIS[t.hash].animating&&n&&(t.raiseEvent("animationstart"),abortControlsAutoHide(t)),n?(t.drawer.update(),t.navigator&&t.navigator.update(t.viewport),t.raiseEvent("animation")):(THIS[t.hash].forceRedraw||t.drawer.needsUpdate())&&(t.drawer.update(),t.navigator&&t.navigator.update(t.viewport),THIS[t.hash].forceRedraw=!1),THIS[t.hash].animating&&!n&&(t.raiseEvent("animationfinish"),THIS[t.hash].mouseInside||beginControlsAutoHide(t)),THIS[t.hash].animating=n)}function resolveUrl(t,e){return t?t+e:e}function beginZoomingIn(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function beginZoomingOut(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=1/this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function endZooming(){THIS[this.hash].zooming=!1}function scheduleZoom(t){$.requestAnimationFrame($.delegate(t,doZoom))}function doZoom(){var t,e,n;THIS[this.hash].zooming&&this.viewport&&(t=$.now(),e=t-THIS[this.hash].lastZoomTime,n=Math.pow(THIS[this.hash].zoomFactor,e/1e3),this.viewport.zoomBy(n),this.viewport.applyConstraints(),THIS[this.hash].lastZoomTime=t,scheduleZoom(this))}function doSingleZoomIn(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function doSingleZoomOut(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function lightUp(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function onHome(){this.viewport&&this.viewport.goHome()}function onFullPage(){this.setFullPage(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function onPrevious(){var t=THIS[this.hash].sequence-1;this.navPrevNextWrap&&0>t&&(t+=this.tileSources.length),this.goToPage(t)}function onNext(){var t=THIS[this.hash].sequence+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}var THIS={},VIEWERS={};$.Viewer=function(t){var e,n=arguments,i=this;$.isPlainObject(t)||(t={id:n[0],xmlPath:n.length>1?n[1]:void 0,prefixUrl:n.length>2?n[2]:void 0,controls:n.length>3?n[3]:void 0,overlays:n.length>4?n[4]:void 0,overlayControls:n.length>5?n[5]:void 0}),t.config&&($.extend(!0,t,t.config),delete t.config),$.extend(!0,this,{id:t.id,hash:t.id,element:null,canvas:null,container:null,overlays:[],overlayControls:[],previousBody:[],customControls:[],source:null,drawer:null,drawers:[],viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},$.DEFAULT_SETTINGS,t),THIS[this.hash]={fsBoundsDelta:new $.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,sequenced:!1,sequence:0,fullPage:!1,onfullscreenchange:null},this._updateRequestId=null,$.EventHandler.call(this),this.addHandler("open-failed",function(t,e){var n=$.getString("Errors.Open-Failed",e.source,e.message);i._showMessage(n)}),$.ControlDock.call(this,t);var r;for(this.xmlPath&&(this.tileSources=[this.xmlPath]),this.tileSources&&($.isArray(this.tileSources)?(this.tileSources.length>1&&(THIS[this.hash].sequenced=!0),r=this.tileSources[0]):r=this.tileSources,this.open(r)),this.element=this.element||document.getElementById(this.id),this.canvas=$.makeNeutralElement("div"),this.keyboardCommandArea=$.makeNeutralElement("textarea"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.keyboardCommandArea.className="keyboard-command-area",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px",t.resize="none"}(this.keyboardCommandArea.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.container.insertBefore(this.keyboardCommandArea,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.keyboardCommandArea.innerTracker=new $.MouseTracker({_this:this,element:this.keyboardCommandArea,focusHandler:function(){var t=$.getElementPosition(this.element);window.scrollTo(0,t.y)},keyHandler:function(t,e,n){switch(e){case 61:return i.viewport.zoomBy(1.1),i.viewport.applyConstraints(),!1;case 45:return i.viewport.zoomBy(.9),i.viewport.applyConstraints(),!1;case 48:return i.viewport.goHome(),i.viewport.applyConstraints(),!1;case 119:case 87:case 38:return n?i.viewport.zoomBy(1.1):i.viewport.panBy(new $.Point(0,-.05)),i.viewport.applyConstraints(),!1;case 115:case 83:case 40:return n?i.viewport.zoomBy(.9):i.viewport.panBy(new $.Point(0,.05)),i.viewport.applyConstraints(),!1;case 97:case 37:return i.viewport.panBy(new $.Point(-.05,0)),i.viewport.applyConstraints(),!1;case 100:case 39:return i.viewport.panBy(new $.Point(.05,0)),i.viewport.applyConstraints(),!1;default:return!0}}}).setTracking(!0),this.innerTracker=new $.MouseTracker({element:this.canvas,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,clickHandler:$.delegate(this,onCanvasClick),dragHandler:$.delegate(this,onCanvasDrag),releaseHandler:$.delegate(this,onCanvasRelease),scrollHandler:$.delegate(this,onCanvasScroll)}).setTracking(this.mouseNavEnabled?!0:!1),this.outerTracker=new $.MouseTracker({element:this.container,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:$.delegate(this,onContainerEnter),exitHandler:$.delegate(this,onContainerExit),releaseHandler:$.delegate(this,onContainerRelease)}).setTracking(this.mouseNavEnabled?!0:!1),this.toolbar&&(this.toolbar=new $.ControlDock({element:this.toolbar})),this.bindStandardControls(),this.bindSequenceControls(),e=0;this.customControls.length>e;e++)this.addControl(this.customControls[e].id,{anchor:this.customControls[e].anchor});$.requestAnimationFrame(function(){beginControlsAutoHide(i)})},$.extend($.Viewer.prototype,$.EventHandler.prototype,$.ControlDock.prototype,{isOpen:function(){return!!this.source},openDzi:function(t){return this.open(t)},openTileSource:function(t){return this.open(t)},open:function(tileSource){var _this=this,customTileSource,readySource,$TileSource,options;return _this._hideMessage(),"string"==$.type(tileSource)&&(tileSource.match(/\s*<.*/)?tileSource=$.parseXml(tileSource):tileSource.match(/\s*[\{\[].*/)&&(tileSource=eval("("+tileSource+")"))),setTimeout(function(){if("string"==$.type(tileSource))tileSource=new $.TileSource(tileSource,function(t){openTileSource(_this,t)}),tileSource.addHandler("open-failed",function(t,e){_this.raiseEvent("open-failed",e)});else if($.isPlainObject(tileSource)||tileSource.nodeType)if($.isFunction(tileSource.getTileUrl))customTileSource=new $.TileSource(tileSource),customTileSource.getTileUrl=tileSource.getTileUrl,openTileSource(_this,customTileSource);else{if($TileSource=$.TileSource.determineType(_this,tileSource),!$TileSource)return _this.raiseEvent("open-failed",{message:"Unable to load TileSource",source:tileSource}),void 0;options=$TileSource.prototype.configure.apply(_this,[tileSource]),readySource=new $TileSource(options),openTileSource(_this,readySource)}else openTileSource(_this,tileSource)},1),this},close:function(){return null!==this._updateRequestId&&($.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.navigator&&this.navigator.close(),this.drawer&&this.drawer.clearOverlays(),this.source=null,this.drawer=null,this.viewport=this.preserveViewport?this.viewport:null,this.canvas.innerHTML="",VIEWERS[this.hash]=null,delete VIEWERS[this.hash],this.raiseEvent("close",{viewer:this}),this},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t,viewer:this}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;this.controls.length>t;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){return t?abortControlsAutoHide(this):beginControlsAutoHide(this),this.raiseEvent("controls-enabled",{enabled:t,viewer:this}),this},isFullPage:function(){return THIS[this.hash].fullPage},setFullPage:function(t){var e,n,i,r,o,s,a=document.body,l=a.style,u=document.documentElement.style,h=this.canvas.style,c=this;if(t!=this.isFullPage()){if(t){for(this.bodyOverflow=l.overflow,this.docOverflow=u.overflow,l.overflow="hidden",u.overflow="hidden",this.bodyWidth=l.width,this.bodyHeight=l.height,l.width="100%",l.height="100%",this.previousBody=[],THIS[this.hash].prevElementParent=this.element.parentNode,THIS[this.hash].prevNextSibling=this.element.nextSibling,THIS[this.hash].prevElementSize=$.getElementSize(this.element),o=a.childNodes.length,s=0;o>s;s++)this.previousBody.push(a.childNodes[0]),a.removeChild(a.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,a.appendChild(this.toolbar.element),$.addClass(this.toolbar.element,"fullpage")),$.addClass(this.element,"fullpage"),a.appendChild(this.element),$.supportsFullScreen?(THIS[this.hash].onfullscreenchange=function(){$.isFullScreen()?c.setFullPage(!0):c.setFullPage(!1)},$.requestFullScreen(document.body),document.addEventListener($.fullScreenEventName,THIS[this.hash].onfullscreenchange),this.element.style.height="100%",this.element.style.width="100%"):(this.element.style.height=$.getWindowSize().y+"px",this.element.style.width=$.getWindowSize().x+"px"),this.toolbar&&this.toolbar.element&&(this.element.style.height=$.getElementSize(this.element).y-$.getElementSize(this.toolbar.element).y+"px"),THIS[this.hash].fullPage=!0,$.delegate(this,onContainerEnter)()}else{for($.supportsFullScreen&&(document.removeEventListener($.fullScreenEventName,THIS[this.hash].onfullscreenchange),$.cancelFullScreen(document)),l.overflow=this.bodyOverflow,u.overflow=this.docOverflow,l.width=this.bodyWidth,l.height=this.bodyHeight,h.backgroundColor="",h.color="",a.removeChild(this.element),o=this.previousBody.length,s=0;o>s;s++)a.appendChild(this.previousBody.shift());$.removeClass(this.element,"fullpage"),THIS[this.hash].prevElementParent.insertBefore(this.element,THIS[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(a.removeChild(this.toolbar.element),$.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.height=THIS[this.hash].prevElementSize.y+"px",this.element.style.width=THIS[this.hash].prevElementSize.x+"px",THIS[this.hash].fullPage=!1,$.delegate(this,onContainerExit)()}if(this.raiseEvent("fullpage",{fullpage:t,viewer:this}),this.viewport){if(e=this.viewport.getBounds(),this.viewport.resize(THIS[this.hash].prevContainerSize),n=this.viewport.getBounds(),t)THIS[this.hash].fsBoundsDelta=new $.Point(n.width/e.width,n.height/e.height);else{this.viewport.update(),this.viewport.zoomBy(Math.max(THIS[this.hash].fsBoundsDelta.x,THIS[this.hash].fsBoundsDelta.y),null,!0);for(r in VIEWERS)i=VIEWERS[r],i!==this&&i!=this.navigator&&(i.open(i.source),i.navigator&&i.navigator.open(i.source))}THIS[this.hash].forceRedraw=!0,updateOnce(this)}return this}},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t,viewer:this}),this},bindSequenceControls:function(){var t=$.delegate(this,onFocus),e=$.delegate(this,onBlur),n=$.delegate(this,onNext),i=$.delegate(this,onPrevious),r=this.navImages,o=!0;return this.showSequenceControl&&THIS[this.hash].sequenced&&((this.previousButton||this.nextButton)&&(o=!1),this.previousButton=new $.Button({element:this.previousButton?$.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.PreviousPage"),srcRest:resolveUrl(this.prefixUrl,r.previous.REST),srcGroup:resolveUrl(this.prefixUrl,r.previous.GROUP),srcHover:resolveUrl(this.prefixUrl,r.previous.HOVER),srcDown:resolveUrl(this.prefixUrl,r.previous.DOWN),onRelease:i,onFocus:t,onBlur:e}),this.nextButton=new $.Button({element:this.nextButton?$.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.NextPage"),srcRest:resolveUrl(this.prefixUrl,r.next.REST),srcGroup:resolveUrl(this.prefixUrl,r.next.GROUP),srcHover:resolveUrl(this.prefixUrl,r.next.HOVER),srcDown:resolveUrl(this.prefixUrl,r.next.DOWN),onRelease:n,onFocus:t,onBlur:e}),this.navPrevNextWrap||this.previousButton.disable(),o&&(this.paging=new $.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:$.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:$.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=$.delegate(this,beginZoomingIn),e=$.delegate(this,endZooming),n=$.delegate(this,doSingleZoomIn),i=$.delegate(this,beginZoomingOut),r=$.delegate(this,doSingleZoomOut),o=$.delegate(this,onHome),s=$.delegate(this,onFullPage),a=$.delegate(this,onFocus),l=$.delegate(this,onBlur),u=this.navImages,h=[],c=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton)&&(c=!1),h.push(this.zoomInButton=new $.Button({element:this.zoomInButton?$.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomIn"),srcRest:resolveUrl(this.prefixUrl,u.zoomIn.REST),srcGroup:resolveUrl(this.prefixUrl,u.zoomIn.GROUP),srcHover:resolveUrl(this.prefixUrl,u.zoomIn.HOVER),srcDown:resolveUrl(this.prefixUrl,u.zoomIn.DOWN),onPress:t,onRelease:e,onClick:n,onEnter:t,onExit:e,onFocus:a,onBlur:l})),h.push(this.zoomOutButton=new $.Button({element:this.zoomOutButton?$.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomOut"),srcRest:resolveUrl(this.prefixUrl,u.zoomOut.REST),srcGroup:resolveUrl(this.prefixUrl,u.zoomOut.GROUP),srcHover:resolveUrl(this.prefixUrl,u.zoomOut.HOVER),srcDown:resolveUrl(this.prefixUrl,u.zoomOut.DOWN),onPress:i,onRelease:e,onClick:r,onEnter:i,onExit:e,onFocus:a,onBlur:l})),h.push(this.homeButton=new $.Button({element:this.homeButton?$.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.Home"),srcRest:resolveUrl(this.prefixUrl,u.home.REST),srcGroup:resolveUrl(this.prefixUrl,u.home.GROUP),srcHover:resolveUrl(this.prefixUrl,u.home.HOVER),srcDown:resolveUrl(this.prefixUrl,u.home.DOWN),onRelease:o,onFocus:a,onBlur:l})),h.push(this.fullPageButton=new $.Button({element:this.fullPageButton?$.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.FullPage"),srcRest:resolveUrl(this.prefixUrl,u.fullpage.REST),srcGroup:resolveUrl(this.prefixUrl,u.fullpage.GROUP),srcHover:resolveUrl(this.prefixUrl,u.fullpage.HOVER),srcDown:resolveUrl(this.prefixUrl,u.fullpage.DOWN),onRelease:s,onFocus:a,onBlur:l})),c&&(this.buttons=new $.ButtonGroup({buttons:h,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",$.delegate(this,lightUp)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}))),this},goToPage:function(t){return this.raiseEvent("page",{page:t,viewer:this}),this.tileSources.length>t&&(THIS[this.hash].sequence=t,this.nextButton&&(this.tileSources.length-1===t?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(t>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable()),this.open(this.tileSources[t])),$.isFunction(this.onPageChange)&&this.onPageChange({page:t,viewer:this}),this.referenceStrip&&this.referenceStrip.setFocus(t),this},_showMessage:function(t){this._hideMessage();var e=$.makeNeutralElement("div");e.appendChild(document.createTextNode(t)),this.messageDiv=$.makeCenteredNode(e),$.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)}})}(OpenSeadragon),function(t){function e(e,n){var i,r,o;this.drag?this.drag=!1:this.viewer.viewport&&(r=this.viewport.deltaPointsFromPixels(n),o=this.viewer.viewport.getBounds().getSize(),i=new t.Rect(r.x-o.x/2,r.y-o.y/2,o.x,o.y),this.viewer.source.aspectRatio>this.viewer.viewport.getAspectRatio()?i.y=i.y-(this.viewerSizeInPoints.y-1/this.viewer.source.aspectRatio)/2:i.x=i.x-(this.viewerSizeInPoints.x-1)/2,this.viewer.viewport.fitBounds(i),this.viewer.viewport.applyConstraints())}function n(t,e,n){this.viewer.viewport&&(this.drag=!0,this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(n)))}function i(t,e,n){n&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}t.Navigator=function(r){var o,s=r.viewer,a=t.getElementSize(s.element);r.id?(this.element=document.getElementById(r.id),r.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(r.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),r.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:!0}),this.element.id=r.id,this.element.className+=" navigator",r=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},r,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),r.minPixelRatio=this.minPixelRatio=s.minPixelRatio,this.viewerSizeInPoints=s.viewport.deltaPointsFromPixels(a),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),function(t,e){t.margin="0px",t.border=e+"px solid #555",t.padding="0px",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid #900",t.margin="0px",t.padding="0px",t.background="transparent",t["float"]="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.element.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,i),scrollHandler:function(){return!1}}).setTracking(!0),s.addControl(this.element,r.controlOptions),r.width&&r.height?(this.element.style.width=r.width+"px",this.element.style.height=r.height+"px"):(this.element.style.width=a.x*r.sizeRatio+"px",this.element.style.height=a.y*r.sizeRatio+"px"),t.Viewer.apply(this,[r]),this.element.getElementsByTagName("form")[0].appendChild(this.displayRegion),o=this.element.getElementsByTagName("textarea")[0],o&&o.parentNode.removeChild(o)},t.extend(t.Navigator.prototype,t.EventHandler.prototype,t.Viewer.prototype,{update:function(t){var e,n,i;t&&this.viewport&&(e=t.getBounds(!0),n=this.viewport.pixelFromPoint(e.getTopLeft()),i=this.viewport.pixelFromPoint(e.getBottomRight()).minus(this.totalBorderWidths),function(t){t.top=n.y+"px",t.left=n.x+"px";var e=Math.abs(n.x-i.x),r=Math.abs(n.y-i.y);t.width=Math.max(e,0)+"px",t.height=Math.max(r,0)+"px"}(this.displayRegion.style))},open:function(e){var n=this.viewer.viewport.containerSize.times(this.sizeRatio);return this.minPixelRatio=e.tileSize>n.x||e.tileSize>n.y?Math.min(n.x,n.y)/e.tileSize:this.viewer.minPixelRatio,t.Viewer.prototype.open.apply(this,[e])}})}(OpenSeadragon),function(t){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).","Open-Failed":"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page"}};t.extend(t,{getString:function(n){var i,r=n.split("."),o=null,s=arguments,a=e;for(i=0;r.length-1>i;i++)a=a[r[i]]||{};return o=a[r[i]],"string"!=typeof o&&(t.console.debug("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/),10)+1;return s.length>e?s[e]:""})},setString:function(t,n){var i,r=t.split("."),o=e;for(i=0;r.length-1>i;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(OpenSeadragon),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},toString:function(){return"("+Math.round(this.x)+","+Math.round(this.y)+")"}}}(OpenSeadragon),function($){function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr)throw Error($.getString("Errors.Security"));if(200!==xhr.status&&0!==xhr.status)throw status=xhr.status,statusText=404==status?"Not Found":xhr.statusText,Error($.getString("Errors.Status",status,statusText));if(responseText.match(/\s*<.*/))try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText)}catch(e){data=xhr.responseText}else data=responseText.match(/\s*[\{\[].*/)?eval("("+responseText+")"):responseText;return data}$.TileSource=function(t){var e,n,i=null,r=arguments;for(e=$.isPlainObject(t)?t:{width:r[0],height:r[1],tileSize:r[2],tileOverlap:r[3],minLevel:r[4],maxLevel:r[5]},$.EventHandler.call(this),$.extend(!0,this,e),n=0;arguments.length>n;n++)if($.isFunction(arguments[n])){i=arguments[n],this.addHandler("ready",function(t,e){i(e)});break}"string"==$.type(arguments[0])?(this.aspectRatio=1,this.dimensions=new $.Point(10,10),this.tileSize=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(arguments[0])):(this.ready=!0,this.aspectRatio=e.width&&e.height?e.width/e.height:1,this.dimensions=new $.Point(e.width,e.height),this.tileSize=e.tileSize?e.tileSize:0,this.tileOverlap=e.tileOverlap?e.tileOverlap:0,this.minLevel=e.minLevel?e.minLevel:0,this.maxLevel=void 0!==e.maxLevel&&null!==e.maxLevel?e.maxLevel:e.width&&e.height?Math.ceil(Math.log(Math.max(e.width,e.height))/Math.log(2)):0,i&&$.isFunction(i)&&i(this))},$.TileSource.prototype={getLevelScale:function(t){var e,n={};for(e=0;this.maxLevel>=e;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(t){var e=this.getLevelScale(t),n=Math.ceil(e*this.dimensions.x/this.tileSize),i=Math.ceil(e*this.dimensions.y/this.tileSize);return new $.Point(n,i)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),n=1/e.x,i=1/e.y;return new $.Point(n,i)},getClosestLevel:function(t){var e,n,i=Math.floor(Math.max(t.x,t.y)/this.tileSize);for(e=this.minLevel;this.maxLevel>e&&(n=this.getNumTiles(e),!(Math.max(n.x,n.y)+1>=i));e++);return Math.max(0,e-1)},getTileAtPoint:function(t,e){var n=e.times(this.dimensions.x).times(this.getLevelScale(t)),i=Math.floor(n.x/this.tileSize),r=Math.floor(n.y/this.tileSize);return new $.Point(i,r)},getTileBounds:function(t,e,n){var i=this.dimensions.times(this.getLevelScale(t)),r=0===e?0:this.tileSize*e-this.tileOverlap,o=0===n?0:this.tileSize*n-this.tileOverlap,s=this.tileSize+(0===e?1:2)*this.tileOverlap,a=this.tileSize+(0===n?1:2)*this.tileOverlap,l=1/i.x;return s=Math.min(s,i.x-r),a=Math.min(a,i.y-o),new $.Rect(r*l,o*l,s*l,a*l)},getImageInfo:function(t){var e,n,i,r,o,s,a,l=this;t&&(o=t.split("/"),s=o[o.length-1],a=s.lastIndexOf("."),a>-1&&(o[o.length-1]=s.slice(0,a))),n=function(e){var n=$.TileSource.determineType(l,e,t);return n?(r=n.prototype.configure.apply(l,[e,t]),i=new n(r),l.ready=!0,l.raiseEvent("ready",i),void 0):(l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t}),void 0)},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),$.jsonp({url:t,async:!1,callbackName:e,callback:n})):$.makeAjaxRequest(t,function(t){var e=processResponse(t);n(e)},function(e){l.raiseEvent("open-failed",{message:"HTTP "+e.status+" attempting to load TileSource",source:t})})},supports:function(){return!1},configure:function(){throw Error("Method not implemented.")},getTileUrl:function(){throw Error("Method not implemented.")},tileExists:function(t,e,n){var i=this.getNumTiles(t);return t>=this.minLevel&&this.maxLevel>=t&&e>=0&&n>=0&&i.x>e&&i.y>n}},$.extend(!0,$.TileSource.prototype,$.EventHandler.prototype),$.TileSource.determineType=function(t,e,n){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[i])&&$.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(t,e,n))return OpenSeadragon[i];$.console.error("No TileSource was able to open %s %s",n,e)}}(OpenSeadragon),function(t){function e(e,i){if(!i||!i.documentElement)throw Error(t.getString("Errors.Xml"));var r,o,s,a,l,u=i.documentElement,h=u.tagName,c=null,d=[];if("Image"==h)try{if(a=u.getElementsByTagName("Size")[0],c={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!t.imageFormatSupported(c.Image.Format))throw Error(t.getString("Errors.ImageFormat",c.Image.Format.toUpperCase()));for(r=u.getElementsByTagName("DisplayRect"),l=0;r.length>l;l++)o=r[l],s=o.getElementsByTagName("Rect")[0],d.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return d.length&&(c.Image.DisplayRect=d),n(e,c)}catch(p){throw p instanceof Error?p:Error(t.getString("Errors.Dzi"))}else{if("Collection"==h)throw Error(t.getString("Errors.Dzc"));if("Error"==h)return t._processDZIError(u)}throw Error(t.getString("Errors.Dzi"))}function n(e,n){var i,r,o=n.Image,s=o.Url,a=o.Format,l=o.Size,u=o.DisplayRect||[],h=parseInt(l.Width,10),c=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;u.length>r;r++)i=u[r].Rect,f.push(new t.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return t.extend(!0,{width:h,height:c,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:f},n)}t.DziTileSource=function(e){var n,i,r,o;if(o=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=o.tilesUrl,this.fileFormat=o.fileFormat,this.displayRects=o.displayRects,this.displayRects)for(n=this.displayRects.length-1;n>=0;n--)for(i=this.displayRects[n],r=i.minLevel;i.maxLevel>=r;r++)this._levelRects[r]||(this._levelRects[r]=[]),this._levelRects[r].push(i);t.TileSource.apply(this,[o])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t){var e;return t.Image?e=t.Image.xmlns:t.documentElement&&"Image"==t.documentElement.tagName&&(e=t.documentElement.namespaceURI),"http://schemas.microsoft.com/deepzoom/2008"==e||"http://schemas.microsoft.com/deepzoom/2009"==e},configure:function(i,r){var o;return o=t.isPlainObject(i)?n(this,i):e(this,i),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+)\.(dzi|xml|js)$/,"$1_files/")),o},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat].join("")},tileExists:function(t,e,n){var i,r,o,s,a,l,u,h=this._levelRects[t];if(!h||!h.length)return!0;for(u=h.length-1;u>=0;u--)if(i=h[u],!(i.minLevel>t||t>i.maxLevel)&&(r=this.getLevelScale(t),o=i.x*r,s=i.y*r,a=o+i.width*r,l=s+i.height*r,o=Math.floor(o/this.tileSize),s=Math.floor(s/this.tileSize),a=Math.ceil(a/this.tileSize),l=Math.ceil(l/this.tileSize),e>=o&&a>e&&n>=s&&l>n))return!0;return!1}})}(OpenSeadragon),function(t){function e(e,r){if(!r||!r.documentElement)throw Error(t.getString("Errors.Xml"));var o=r.documentElement,s=o.tagName,a=null;if("info"==s)try{return a={ns:o.namespaceURI},n(o,a),i(e,a)}catch(l){throw l instanceof Error?l:Error(t.getString("Errors.IIIF"))}throw Error(t.getString("Errors.IIIF"))}function n(e,i,r){var o,s;if(3==e.nodeType&&r)s=e.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),i[r]?(t.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s;else if(1==e.nodeType)for(o=0;e.childNodes.length>o;o++)n(e.childNodes[o],i,e.nodeName)}function i(t,e){return e.image_host&&(e.tilesUrl=e.image_host),e}t.IIIFTileSource=function(e){if(t.extend(!0,this,e),!(this.height&&this.width&&this.identifier&&this.tilesUrl))throw Error("IIIF required parameters not provided.");if(e.tileSize=this.tile_width,!e.maxLevel){var n=-1,i=this.scale_factors||this.scale_factor;if(i instanceof Array)for(var r=0;i.length>r;r++){var o=Number(i[r]);!isNaN(o)&&o>n&&(n=o)}e.maxLevel=0>n?Number(Math.ceil(Math.log(Math.max(this.width,this.height),2))):n}t.TileSource.apply(this,[e])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.ns&&"http://library.stanford.edu/iiif/image-api/ns/"==t.ns||t.profile&&("http://library.stanford.edu/iiif/image-api/compliance.html#level1"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html#level2"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html#level3"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html"==t.profile)||t.documentElement&&"info"==t.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==t.documentElement.namespaceURI
},configure:function(n,r){var o,s,a;return s=t.isPlainObject(n)?i(this,n):e(this,n),r&&!s.tilesUrl&&(o=r.split("/"),o.pop(),o=o.join("/"),"http"!==r.substring(0,4)&&(a=location.protocol+"//"+location.host,o=a+o),s.tilesUrl=o.replace(n.identifier,"")),s},getTileUrl:function(t,e,n){var i,r,o,s,a,l="0",u="native.jpg",h=Math.pow(.5,this.maxLevel-t),c="pct:"+100*h,d=Math.ceil(this.width*h),p=Math.ceil(this.height*h),f=Math.ceil(this.tileSize/h),g=Math.ceil(this.tileSize/h);return this.tile_width>d&&this.tile_height>p?i="full":(r=e*f,o=n*g,s=Math.min(f,this.width-r),a=Math.min(g,this.height-o),i=[r,o,s,a].join(",")),[this.tilesUrl.replace(/\/$/,""),encodeURIComponent(this.identifier),i,c,l,u].join("/")}})}(OpenSeadragon),function(t){t.OsmTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},n.width&&n.height||(n.width=65572864,n.height=65572864),n.tileSize||(n.tileSize=256,n.tileOverlap=0),n.tilesUrl||(n.tilesUrl="http://tile.openstreetmap.org/"),n.minLevel=8,t.TileSource.apply(this,[n])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"openstreetmaps"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),function(t){t.TmsTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var i,r=256*Math.ceil(n.width/256),o=256*Math.ceil(n.height/256);i=r>o?r/256:o/256,n.maxLevel=Math.ceil(Math.log(i)/Math.log(2))-1,n.tileSize=256,n.width=r,n.height=o,t.TileSource.apply(this,[n])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"tiledmapservice"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){var i=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(i-n)+".png"}})}(OpenSeadragon),function(t){function e(t){var e,n,i=[];for(n=0;t.length>n;n++)e=t[n],e.height&&e.width&&e.url&&(e.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||e.mimetype&&e.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))&&i.push({url:e.url,width:Number(e.width),height:Number(e.height)});return i.sort(function(t,e){return t.height-e.height})}function n(e,n){if(!n||!n.documentElement)throw Error(t.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),o=0;u.length>o;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(e,l)}catch(h){throw h instanceof Error?h:Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw Error("Error: "+n)}throw Error("Unknown element "+a)}function i(t,e){return e.levels}t.LegacyTileSource=function(n){var i,r,o;t.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=e(i.levels),r=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height,t.extend(!0,i,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),t.TileSource.apply(this,[i]),this.levels=i.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e){var r;return r=t.isPlainObject(e)?i(this,e):n(this,e)},getLevelScale:function(t){var e=0/0;return t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){var n=this.getLevelScale(e);return n?new t.Point(1,1):new t.Point(0,0)},getTileAtPoint:function(){return new t.Point(0,0)},getTileUrl:function(t){var e=null;return t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].url),e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e){var n;n=t.isPlainObject(e)?e:{tileSize:arguments[0],tileSources:arguments[1],rows:arguments[2],layout:arguments[3]},n.layout||(n.layout="horizontal");var i=0,r=1,o=Math.ceil(n.tileSources.length/n.rows),s=o>=n.rows?o:n.rows;for("horizontal"==n.layout?(n.width=n.tileSize*o,n.height=n.tileSize*n.rows):(n.height=n.tileSize*o,n.width=n.tileSize*n.rows),n.tileOverlap=-n.tileMargin,n.tilesPerRow=o;n.tileSize*s>r;)r=2*r,i++;n.minLevel=i,t.TileSource.apply(this,[n])},t.extend(t.TileSourceCollection.prototype,t.TileSource.prototype,{getTileBounds:function(e,n,i){var r=this.dimensions.times(this.getLevelScale(e)),o=this.tileSize*n-this.tileOverlap,s=this.tileSize*i-this.tileOverlap,a=this.tileSize+1*this.tileOverlap,l=this.tileSize+1*this.tileOverlap,u=1/r.x;return a=Math.min(a,r.x-o),l=Math.min(l,r.y-s),new t.Rect(o*u,s*u,a*u,l*u)},configure:function(){},getTileUrl:function(){return null}})}(OpenSeadragon),function(t){function e(e){t.requestAnimationFrame(function(){n(e)})}function n(n){var i,r,o;n.shouldFade&&(i=t.now(),r=i-n.fadeBeginTime,o=1-r/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&t.setElementOpacity(n.imgGroup,o,!0),o>0&&e(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout(function(){e(n)},n.fadeDelay)}function r(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function o(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(r(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function s(e,n){e.element.disabled||(t.ButtonState.HOVER>=n&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),t.ButtonState.GROUP>=n&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),t.ButtonState.REST>=n&&e.currentState==t.ButtonState.GROUP&&(i(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var n=this;t.EventHandler.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("button"),this.element.href=this.element.href||"#",e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&3>t.Browser.version&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="")),this.addHandler("onPress",this.onPress),this.addHandler("onRelease",this.onRelease),this.addHandler("onClick",this.onClick),this.addHandler("onEnter",this.onEnter),this.addHandler("onExit",this.onExit),this.addHandler("onFocus",this.onFocus),this.addHandler("onBlur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e,i,r,s){r?(o(n,t.ButtonState.DOWN),n.raiseEvent("onEnter",n)):s||o(n,t.ButtonState.HOVER)},focusHandler:function(t,e,i,r){this.enterHandler(t,e,i,r),n.raiseEvent("onFocus",n)},exitHandler:function(e,i,r){s(n,t.ButtonState.GROUP),r&&n.raiseEvent("onExit",n)},blurHandler:function(t,e,i,r){this.exitHandler(t,e,i,r),n.raiseEvent("onBlur",n)},pressHandler:function(){o(n,t.ButtonState.DOWN),n.raiseEvent("onPress",n)},releaseHandler:function(e,i,r,a){r&&a?(s(n,t.ButtonState.HOVER),n.raiseEvent("onRelease",n)):r?s(n,t.ButtonState.GROUP):o(n,t.ButtonState.HOVER)},clickHandler:function(t,e,i){i&&n.raiseEvent("onClick",n)},keyHandler:function(t,e){return 13===e?(n.raiseEvent("onClick",n),n.raiseEvent("onRelease",n),!1):!0}}).setTracking(!0),s(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventHandler.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){s(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,i=this.buttons.concat([]),r=this;if(this.element=e.element||t.makeNeutralElement("fieldgroup"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;i.length>n;n++)this.element.appendChild(i[n].element);this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var t;for(t=0;r.buttons.length>t;t++)r.buttons[t].notifyGroupEnter()},exitHandler:function(){var t,e=arguments.length>2?arguments[2]:null;if(!e)for(t=0;r.buttons.length>t;t++)r.buttons[t].notifyGroupExit()},releaseHandler:function(){var t,e=arguments.length>3?arguments[3]:null;if(!e)for(t=0;r.buttons.length>t;t++)r.buttons[t].notifyGroupExit()}}).setTracking(!0)},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler()},emulateExit:function(){this.tracker.exitHandler()}}}(OpenSeadragon),function(t){t.Rect=function(t,e,n,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0},t.Rect.prototype={getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height)},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},toString:function(){return"["+Math.round(100*this.x)+","+Math.round(100*this.y)+","+Math.round(100*this.width)+"x"+Math.round(100*this.height)+"]"}}}(OpenSeadragon),function(t){function e(e,n,r){var o=Number(this.element.style.marginLeft.replace("px","")),s=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-r.x>0?o>-(a-u.x)&&(this.element.style.marginLeft=o+2*r.x+"px",i(this,u.x,o+2*r.x)):0>-r.x&&0>o&&(this.element.style.marginLeft=o+2*r.x+"px",i(this,u.x,o+2*r.x)):-r.y>0?s>-(l-u.y)&&(this.element.style.marginTop=s+2*r.y+"px",i(this,u.y,s+2*r.y)):0>-r.y&&0>s&&(this.element.style.marginTop=s+2*r.y+"px",i(this,u.y,s+2*r.y))),!1}function n(e,n,r){var o=Number(this.element.style.marginLeft.replace("px","")),s=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?r>0?o>-(a-u.x)&&(this.element.style.marginLeft=o-60*r+"px",i(this,u.x,o-60*r)):0>r&&0>o&&(this.element.style.marginLeft=o-60*r+"px",i(this,u.x,o-60*r)):0>r?s>u.y-l&&(this.element.style.marginTop=s+60*r+"px",i(this,u.y,s+60*r)):r>0&&0>s&&(this.element.style.marginTop=s+60*r+"px",i(this,u.y,s+60*r))),!1}function i(e,n,i){var r,o,s,a,l,u,h;for(r="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(n/r)+5,s=Math.ceil((Math.abs(i)+n)/r)+1,o=s-o,o=0>o?0:o,u=o;s>u&&e.panels.length>u;u++)h=e.panels[u],h.activePanel||(a=new t.Viewer({id:h.id,tileSources:[e.viewer.tileSources[u]],element:h,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=t.makeNeutralElement("textarea"),a.displayRegion.id=h.id+"-displayregion",a.displayRegion.className="displayregion",l=a.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l.float="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=e.panelWidth-4+"px",l.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new t.MouseTracker({element:a.displayRegion}),h.getElementsByTagName("form")[0].appendChild(a.displayRegion),h.activePanel=!0)}function r(t){return"horizontal"==this.scroll?t.element.style.marginBottom="0px":t.element.style.marginLeft="0px",!1}function o(e){return"horizontal"==this.scroll?e.element.style.marginBottom="-"+t.getElementSize(e.element).y/2+"px":e.element.style.marginLeft="-"+t.getElementSize(e.element).x/2+"px",!1}function s(t,e){switch(e){case 61:return n.call(this,this.tracker,null,1,null),!1;case 45:return n.call(this,this.tracker,null,-1,null),!1;case 48:case 119:case 87:case 38:return n.call(this,this.tracker,null,1,null),!1;case 115:case 83:case 40:return n.call(this,this.tracker,null,-1,null),!1;case 97:case 37:return n.call(this,this.tracker,null,-1,null),!1;case 100:case 39:return n.call(this,this.tracker,null,1,null),!1;default:return!0}}var a={};t.ReferenceStrip=function(l){var u,h,c,d=this,p=l.viewer,f=t.getElementSize(p.element);for(l.id||(l.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),a[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",t.setElementOpacity(this.element,.8),this.viewer=p,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,n),enterHandler:t.delegate(this,r),exitHandler:t.delegate(this,o),keyHandler:t.delegate(this,s)}).setTracking(!0),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=f.x*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=f.y*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=f.x*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],c=0;p.tileSources.length>c;c++)u=t.makeNeutralElement("div"),u.id=this.element.id+"-"+c,u.style.width=d.panelWidth+"px",u.style.height=d.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",u.innerTracker=new t.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.dragging=t.now()},releaseHandler:function(e,n,i,r){var o=e.element.id,s=Number(o.split("-")[2]),a=t.now();i&&r&&e.dragging&&a-e.dragging<e.clickTimeThreshold&&(e.dragging=null,p.goToPage(s))}}).setTracking(!0),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);i(this,"vertical"==this.scroll?f.y:f.y,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventHandler.prototype,t.Viewer.prototype,{setFocus:function(e){var n,o=t.getElement(this.element.id+"-"+e),s=t.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),h=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3),n>u+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",i(this,s.x,-n)):u>n&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",i(this,s.x,-n))):(n=Number(e)*(this.panelHeight+3),n>h+s.y-this.panelHeight?(n=Math.min(n,l-s.y),this.element.style.marginTop=-n+"px",i(this,s.y,-n)):h>n&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",i(this,s.y,-n))),this.currentPage=e,t.getElement(o.id+"-displayregion").focus(),r.call(this,this.innerTracker))},update:function(){return a[this.id].animating?(t.console.log("image reference strip update"),!0):!1}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,n,i,r,o,s){t.Rect.apply(this,[e,n,i,r]),this.minLevel=o,this.maxLevel=s},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var n=arguments;"object"!=typeof e&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:0,time:t.now()},this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time}},t.Spring.prototype={resetTo:function(t){this.target.value=t,this.target.time=this.current.time,this.start.value=this.target.value,this.start.time=this.target.time},springTo:function(t){this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime},shiftBy:function(t){this.start.value+=t,this.target.value+=t},update:function(){this.current.time=t.now(),this.current.value=this.current.time>=this.target.time?this.target.value:this.start.value+(this.target.value-this.start.value)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time))}}}(OpenSeadragon),function(t){var e={};t.Tile=function(t,e,n,i,r,o){this.level=t,this.x=e,this.y=n,this.bounds=i,this.exists=r,this.url=o,this.loaded=!1,this.loading=!1,this.element=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(e){return this.loaded&&this.image?(this.element||(this.element=t.makeNeutralElement("img"),this.element.src=this.url,this.element.style.msInterpolationMode="nearest-neighbor",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",t.setElementOpacity(this.element,this.opacity),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this),void 0)},drawCanvas:function(n){var i,r,o=this.position,s=this.size;return this.loaded&&(this.image||e[this.url])?(n.globalAlpha=this.opacity,1==n.globalAlpha&&this.url.match(".png")&&n.clearRect(o.x+1,o.y+1,s.x-2,s.y-2),e[this.url]||(r=document.createElement("canvas"),r.width=this.image.width,r.height=this.image.height,i=r.getContext("2d"),i.drawImage(this.image,0,0),e[this.url]=i,this.image=null),i=e[this.url],n.drawImage(i.canvas,0,0,i.canvas.width,i.canvas.height,o.x,o.y,s.x,s.y),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this),void 0)},unload:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),e[this.url]&&delete e[this.url],this.element=null,this.image=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(t){t.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},t.Overlay=function(e,n,i){var r;r=t.isPlainObject(e)?e:{element:e,location:n,placement:i},this.element=r.element,this.scales=r.location instanceof t.Rect,this.bounds=new t.Rect(r.location.x,r.location.y,r.location.width,r.location.height),this.position=new t.Point(r.location.x,r.location.y),this.size=new t.Point(r.location.width,r.location.height),this.style=r.element.style,this.placement=r.location instanceof t.Point?r.placement:t.OverlayPlacement.TOP_LEFT,this.onDraw=r.onDraw},t.Overlay.prototype={adjust:function(e,n){switch(this.placement){case t.OverlayPlacement.TOP_LEFT:break;case t.OverlayPlacement.TOP:e.x-=n.x/2;break;case t.OverlayPlacement.TOP_RIGHT:e.x-=n.x;break;case t.OverlayPlacement.RIGHT:e.x-=n.x,e.y-=n.y/2;break;case t.OverlayPlacement.BOTTOM_RIGHT:e.x-=n.x,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM:e.x-=n.x/2,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM_LEFT:e.y-=n.y;break;case t.OverlayPlacement.LEFT:e.y-=n.y/2;break;default:case t.OverlayPlacement.CENTER:e.x-=n.x/2,e.y-=n.y/2}},destroy:function(){var t=this.element,e=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(e.display="none",document.body.appendChild(t))),e.top="",e.left="",e.position="",this.scales&&(e.width="",e.height="")},drawHTML:function(e){var n,i,r=this.element,o=this.style,s=this.scales;r.parentNode!=e&&(r.prevElementParent=r.parentNode,r.prevNextSibling=r.nextSibling,e.appendChild(r)),s||(this.size=t.getElementSize(r)),n=this.position,i=this.size,this.adjust(n,i),n=n.apply(Math.floor),i=i.apply(Math.ceil),this.onDraw?this.onDraw(n,i,r):(o.left=n.x+"px",o.top=n.y+"px",o.position="absolute",o.display="block",s&&(o.width=i.x+"px",o.height=i.y+"px"))},update:function(e,n){this.scales=e instanceof t.Rect,this.bounds=new t.Rect(e.x,e.y,e.width,e.height),this.placement=e instanceof t.Point?n:t.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),function(t){function e(e,n){var i=null,r=n.height&&n.width?new t.Rect(n.x||n.px,n.y||n.py,n.width,n.height):new t.Point(n.x||n.px,n.y||n.py),o=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());return i=t.getElement(n.id),i||(i=document.createElement("a"),i.href="#/overlay/"+o),i.id=o,t.addClass(i,n.className?n.className:"openseadragon-overlay"),void 0!==n.px&&(r=e.viewport.imageToViewportRectangle(r)),n.placement?new t.Overlay({element:i,location:e.viewport.pointFromPixel(r),placement:t.OverlayPlacement[n.placement.toUpperCase()],onDraw:n.onDraw}):new t.Overlay({element:i,location:r,onDraw:n.onDraw})}function n(e){e.updateAgain=!1,e.viewer&&e.viewer.raiseEvent("update-viewport",{viewer:e.viewer});for(var n,r,o,a,l,u,h,d,p=null,f=!1,g=t.now(),m=e.viewport.getContainerSize(),v=e.viewport.getBounds(!0),b=v.getTopLeft(),x=v.getBottomRight(),S=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(0),!0).x,T=Math.max(e.source.minLevel,Math.floor(Math.log(e.minZoomImageRatio)/Math.log(2))),_=Math.min(Math.abs(e.source.maxLevel),Math.abs(Math.floor(Math.log(S/e.minPixelRatio)/Math.log(2))));e.lastDrawn.length>0;)n=e.lastDrawn.pop(),n.beingDrawn=!1;if(e.canvas.innerHTML="",M&&((e.canvas.width!=m.x||e.canvas.height!=m.y)&&(e.canvas.width=m.x,e.canvas.height=m.y),e.context.clearRect(0,0,m.x,m.y)),!(!e.wrapHorizontal&&(0>x.x||b.x>1)||!e.wrapVertical&&(0>x.y||b.y>e.normHeight))){e.wrapHorizontal||(b.x=Math.max(b.x,0),x.x=Math.min(x.x,1)),e.wrapVertical||(b.y=Math.max(b.y,0),x.y=Math.min(x.y,e.normHeight)),T=Math.min(T,_);var E;for(r=_;r>=T;r--){if(E=!1,o=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!0).x,!f&&o>=e.minPixelRatio||r==T)E=!0,f=!0;else if(!f)continue;if(a=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!1).x,l=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(Math.max(e.source.getClosestLevel(e.viewport.containerSize)-1,0)),!1).x,u=e.immediateRender?1:l,h=Math.min(1,(o-.5)/.5),d=u/Math.abs(u-a),p=i(e,f,E,r,h,d,b,x,g,p),c(e.coverage,r))break}w(e,e.lastDrawn),y(e.viewport,e.overlays,e.container),p&&(s(e,p,g),e.updateAgain=!0)}}function i(t,e,n,i,o,s,a,l,u,h){var c,d,p,g,m,v=t.viewport.pixelFromPoint(t.viewport.getCenter());for(t.viewer&&t.viewer.raiseEvent("update-level",{viewer:t.viewer,havedrawn:e,level:i,opacity:o,visibility:s,topleft:a,bottomright:l,currenttime:u,best:h}),p=t.source.getTileAtPoint(i,a),g=t.source.getTileAtPoint(i,l),m=t.source.getNumTiles(i),f(t.coverage,i),t.wrapHorizontal||(g.x=Math.min(g.x,m.x-1)),t.wrapVertical||(g.y=Math.min(g.y,m.y-1)),c=p.x;g.x>=c;c++)for(d=p.y;g.y>=d;d++)h=r(t,n,e,c,d,i,o,s,v,m,u,h);return h}function r(t,e,n,i,r,s,a,h,c,f,g,v){var y=o(i,r,s,t.source,t.tilesMatrix,g,f,t.normHeight),b=e;if(t.viewer&&t.viewer.raiseEvent("update-tile",{viewer:t.viewer,tile:y}),p(t.coverage,s,i,r,!1),!y.exists)return v;if(n&&!b&&(d(t.coverage,s,i,r)?p(t.coverage,s,i,r,!0):b=!0),!b)return v;if(l(y,t.source.tileOverlap,t.viewport,c,h),y.loaded){var w=u(t,y,i,r,s,a,g);w&&(t.updateAgain=!0)}else y.loading||(v=m(v,y));return v}function o(e,n,i,r,o,s,a,l){var u,h,c,d,p,f;return o[i]||(o[i]={}),o[i][e]||(o[i][e]={}),o[i][e][n]||(u=(a.x+e%a.x)%a.x,h=(a.y+n%a.y)%a.y,c=r.getTileBounds(i,u,h),d=r.tileExists(i,u,h),p=r.getTileUrl(i,u,h),c.x+=1*(e-u)/a.x,c.y+=l*(n-h)/a.y,o[i][e][n]=new t.Tile(i,e,n,c,d,p)),f=o[i][e][n],f.lastTouchTime=s,f}function s(t,e,n){t.viewport.collectionMode?(t.midUpdate=!1,a(t,e,n)):e.loading=t.loadImage(e.url,function(i){a(t,e,n,i)})}function a(e,n,i,r){var o,s,a,l,u,h,c,d,p,f;if(n.loading=!1,e.midUpdate)return t.console.warn("Tile load callback in middle of drawing routine."),void 0;if(r||e.viewport.collectionMode){if(e.lastResetTime>i)return t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void 0}else if(t.console.log("Tile %s failed to load: %s",n,n.url),!e.debugMode)return n.exists=!1,void 0;if(n.loaded=!0,n.image=r,o=e.tilesLoaded.length,e.tilesLoaded.length>=e.maxImageCacheCount){for(s=Math.ceil(Math.log(e.source.tileSize)/Math.log(2)),a=null,h=-1,f=e.tilesLoaded.length-1;f>=0;f--)c=e.tilesLoaded[f],c.level<=e.cutoff||c.beingDrawn||(a?(d=c.lastTouchTime,l=a.lastTouchTime,p=c.level,u=a.level,(l>d||d==l&&p>u)&&(a=c,h=f)):(a=c,h=f));a&&h>=0&&(a.unload(),o=h)}e.tilesLoaded[o]=n,e.updateAgain=!0}function l(e,n,i,r,o){var s=e.bounds.getTopLeft(),a=e.bounds.getSize(),l=i.pixelFromPoint(s,!0),u=i.pixelFromPoint(s,!1),h=i.deltaPixelsFromPoints(a,!0),c=i.deltaPixelsFromPoints(a,!1),d=u.plus(c.divide(2)),p=r.distanceTo(d);n||(h=h.plus(new t.Point(1,1))),e.position=l,e.size=h,e.distance=p,e.visibility=o}function u(t,e,n,i,r,o,s){var a,l,u=1e3*t.blendTime;if(e.blendStart||(e.blendStart=s),a=s-e.blendStart,l=u?Math.min(1,a/u):1,t.alwaysBlend&&(l*=o),e.opacity=l,t.lastDrawn.push(e),1==l)p(t.coverage,r,n,i,!0);else if(u>a)return!0;return!1}function h(t){t.tilesMatrix={},t.tilesLoaded=[]}function c(t,e,n,i){var r,o,s,a;if(!t[e])return!1;if(void 0===n||void 0===i){r=t[e];for(s in r)if(r.hasOwnProperty(s)){o=r[s];for(a in o)if(o.hasOwnProperty(a)&&!o[a])return!1}return!0}return void 0===t[e][n]||void 0===t[e][n][i]||t[e][n][i]===!0}function d(t,e,n,i){return void 0===n||void 0===i?c(t,e+1):c(t,e+1,2*n,2*i)&&c(t,e+1,2*n,2*i+1)&&c(t,e+1,2*n+1,2*i)&&c(t,e+1,2*n+1,2*i+1)}function p(e,n,i,r,o){return e[n]?(e[n][i]||(e[n][i]={}),e[n][i][r]=o,void 0):(t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n),void 0)}function f(t,e){t[e]={}}function g(t,e){var n;for(n=t.length-1;n>=0;n--)if(t[n].element==e)return n;return-1}function m(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.distance<t.distance?e:t:e}function v(e,n,i,r){e.onload=null,e.onabort=null,e.onerror=null,r&&window.clearTimeout(r),t.requestAnimationFrame(function(){n(e.src,i?e:null)})}function y(t,e,n){var i,r=e.length;for(i=0;r>i;i++)b(t,e[i],n)}function b(t,e,n){e.position=t.pixelFromPoint(e.bounds.getTopLeft(),!0),e.size=t.deltaPixelsFromPoints(e.bounds.getSize(),!0),e.drawHTML(n)}function w(e,n){var i,r,o,s,a,l,u,h;for(i=n.length-1;i>=0;i--){if(r=n[i],e.viewport.collectionMode?(o=r.x+"/"+r.y,a=e.viewport,h=a.collectionTileSource,e.collectionOverlays[o]?(s=e.collectionOverlays[o],s.viewport&&(s.viewport.resize(r.size,!0),s.viewport.goHome(!0))):(l="horizontal"==h.layout?r.y+r.x*h.rows:r.x+r.y*h.rows,u=h.tileSources.length>l?h.tileSources[l]:null,u&&(e.collectionOverlays[o]=s=new t.Viewer({element:t.makeNeutralElement("div"),mouseNavEnabled:!1,showNavigator:!1,showSequenceControl:!1,showNavigationControl:!1,tileSources:[u]}),E&&(s.element.style.border="1px solid rgba(255,255,255,0.38)",s.element.style["-webkit-box-reflect"]="below 0px -webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(62%,transparent),to(rgba(255,255,255,0.62)))"),e.addOverlay(s.element,r.bounds)))):(M?r.drawCanvas(e.context):r.drawHTML(e.canvas),r.beingDrawn=!0),e.debugMode)try{x(e,r,n.length,i)}catch(c){t.console.error(c)}e.viewer&&e.viewer.raiseEvent("tile-drawn",{viewer:e.viewer,tile:r})}}function x(t,e,n,i){M&&(t.context.save(),t.context.lineWidth=2,t.context.font="small-caps bold 13px ariel",t.context.strokeStyle=t.debugGridColor,t.context.fillStyle=t.debugGridColor,t.context.strokeRect(e.position.x,e.position.y,e.size.x,e.size.y),0===e.x&&0===e.y&&(t.context.fillText("Zoom: "+t.viewport.getZoom(),e.position.x,e.position.y-30),t.context.fillText("Pan: "+(""+t.viewport.getBounds()),e.position.x,e.position.y-20)),t.context.fillText("Level: "+e.level,e.position.x+10,e.position.y+20),t.context.fillText("Column: "+e.x,e.position.x+10,e.position.y+30),t.context.fillText("Row: "+e.y,e.position.x+10,e.position.y+40),t.context.fillText("Order: "+i+" of "+n,e.position.x+10,e.position.y+50),t.context.fillText("Size: "+(""+e.size),e.position.x+10,e.position.y+60),t.context.fillText("Position: "+(""+e.position),e.position.x+10,e.position.y+70),t.context.restore())}var S=t.getWindowSize(),T=t.Browser.vendor,_=t.Browser.version,E=T==t.BROWSERS.FIREFOX||T==t.BROWSERS.OPERA||T==t.BROWSERS.SAFARI&&_>=4||T==t.BROWSERS.CHROME&&_>=2||T==t.BROWSERS.IE&&_>=9,M=E&&!(400>=S.x||400>=S.y)&&!navigator.appVersion.match("Mobile")&&t.isFunction(document.createElement("canvas").getContext);t.Drawer=function(n){var i,r=arguments;for(t.isPlainObject(n)||(n={source:r[0],viewport:r[1],element:r[2]}),t.extend(!0,this,{viewer:null,downloading:0,tilesMatrix:{},tilesLoaded:[],coverage:{},lastDrawn:[],lastResetTime:0,midUpdate:!1,updateAgain:!0,overlays:[],collectionOverlays:{},maxImageCacheCount:t.DEFAULT_SETTINGS.maxImageCacheCount,imageLoaderLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,debugMode:t.DEFAULT_SETTINGS.debugMode,timeout:t.DEFAULT_SETTINGS.timeout},n),this.container=t.getElement(this.element),this.canvas=t.makeNeutralElement(M?"canvas":"div"),this.context=M?this.canvas.getContext("2d"):null,this.normHeight=this.source.dimensions.y/this.source.dimensions.x,this.element=this.container,this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.container.style.textAlign="left",this.container.appendChild(this.canvas),i=0;this.overlays.length>i;i++)t.isPlainObject(this.overlays[i])?this.overlays[i]=e(this,this.overlays[i]):t.isFunction(this.overlays[i])
},t.Drawer.prototype={addOverlay:function(e,n,i,r){var o;return o=t.isPlainObject(e)?e:{element:e,location:n,placement:i,onDraw:r},e=t.getElement(o.element),g(this.overlays,e)>=0?void 0:(this.overlays.push(new t.Overlay({element:e,location:o.location,placement:o.placement,onDraw:o.onDraw})),this.updateAgain=!0,this.viewer&&this.viewer.raiseEvent("add-overlay",{viewer:this.viewer,element:e,location:o.location,placement:o.placement}),this)},updateOverlay:function(e,n,i){var r;return e=t.getElement(e),r=g(this.overlays,e),r>=0&&(this.overlays[r].update(n,i),this.updateAgain=!0),this.viewer&&this.viewer.raiseEvent("update-overlay",{viewer:this.viewer,element:e,location:n,placement:i}),this},removeOverlay:function(e){var n;return e=t.getElement(e),n=g(this.overlays,e),n>=0&&(this.overlays[n].destroy(),this.overlays.splice(n,1),this.updateAgain=!0),this.viewer&&this.viewer.raiseEvent("remove-overlay",{viewer:this.viewer,element:e}),this},clearOverlays:function(){for(;this.overlays.length>0;)this.overlays.pop().destroy(),this.updateAgain=!0;return this.viewer&&this.viewer.raiseEvent("clear-overlay",{viewer:this.viewer}),this},needsUpdate:function(){return this.updateAgain},numTilesLoaded:function(){return this.tilesLoaded.length},reset:function(){return h(this),this.lastResetTime=t.now(),this.updateAgain=!0,this},update:function(){return this.midUpdate=!0,n(this),this.midUpdate=!1,this},loadImage:function(e,n){var i,r,o,s=this,a=!1;return(!this.imageLoaderLimit||this.downloading<this.imageLoaderLimit)&&(this.downloading++,i=new Image,o=function(i,r){if(s.downloading--,"function"==typeof n)try{n(r)}catch(o){t.console.error("%s while executing %s callback: %s",o.name,e,o.message,o)}},i.onload=function(){v(i,o,!0,r)},i.onabort=i.onerror=function(){v(i,o,!1,r)},r=window.setTimeout(function(){v(i,o,!1,r)},this.timeout),a=!0,i.src=e),a}}}(OpenSeadragon),function(t){t.Viewport=function(e){var n=arguments;n.length&&n[0]instanceof t.Point&&(e={containerSize:n[0],contentSize:n[1],config:n[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel},e),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.resetContentSize(this.contentSize),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){return this.contentSize=e,this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.fitWidthBounds=new t.Rect(0,0,1,this.contentAspectY),this.fitHeightBounds=new t.Rect(0,0,this.contentAspectY,this.contentAspectY),this.homeBounds=new t.Rect(0,0,1,this.contentAspectY),this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:e,viewer:this.viewer}),this},getHomeZoom:function(){var t=this.contentAspectX/this.getAspectRatio();return this.defaultZoomLevel?this.defaultZoomLevel:t>=1?1:t},getHomeBounds:function(){var e=this.homeBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new t.Rect(e.x-n/2,e.y-i/2,n,i)},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t,viewer:this.viewer}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom(),e=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t;return Math.min(e,t)},getMaxZoom:function(){var t=this.maxZoomLevel?this.maxZoomLevel:this.contentSize.x*this.maxZoomPixelRatio/this.containerSize.x;return Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this.containerSize.x/this.containerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getBounds:function(e){var n=this.getCenter(e),i=1/this.getZoom(e),r=i/this.getAspectRatio();return new t.Rect(n.x-i/2,n.y-r/2,i,r)},getCenter:function(e){var n,i,r,o,s,a,l,u,h=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?h:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,o=r/this.getAspectRatio(),s=new t.Rect(h.x-r/2,h.y-o/2,r,o),a=this.zoomPoint.minus(s.getTopLeft()).times(this.containerSize.x/s.width),l=a.minus(n),u=l.divide(this.containerSize.x*i),c.plus(u)):c},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},applyConstraints:function(t){var e,n,i,r,o,s,a,l=this.getZoom(),u=Math.max(Math.min(l,this.getMaxZoom()),this.getMinZoom()),h=0,c=0;return l!=u&&this.zoomTo(u,this.zoomPoint,t),e=this.getBounds(),n=this.visibilityRatio*e.width,i=this.visibilityRatio*e.height,r=e.x+e.width,o=1-e.x,s=e.y+e.height,a=this.contentAspectY-e.y,this.wrapHorizontal||(n>r&&(h=n-r),n>o&&(h=h?(h+o-n)/2:o-n)),this.wrapVertical||(i>s&&(c=i-s),i>a&&(c=c?(c+a-i)/2:a-i)),(h||c||t)&&(e.x+=h,e.y+=c,e.width>1&&(e.x=.5-e.width/2),e.height>this.contentAspectY&&(e.y=this.contentAspectY/2-e.height/2),this.fitBounds(e,t)),this.viewer&&this.viewer.raiseEvent("constrain",{immediately:t,viewer:this.viewer}),this},ensureVisible:function(t){return this.applyConstraints(t)},fitBounds:function(e,n){var i,r,o,s,a=this.getAspectRatio(),l=e.getCenter(),u=new t.Rect(e.x,e.y,e.width,e.height);return u.getAspectRatio()>=a?(u.height=e.width/a,u.y=l.y-u.height/2):(u.width=e.height*a,u.x=l.x-u.width/2),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),i=this.getBounds(),r=this.getZoom(),o=1/u.width,o==r||u.width==i.width?this.panTo(l,n):(s=i.getTopLeft().times(this.containerSize.x/i.width).minus(u.getTopLeft().times(this.containerSize.x/u.width)).divide(this.containerSize.x/i.width-this.containerSize.x/u.width),this.zoomTo(o,s,n))},fitVertically:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(1+e.x%1)%1,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(this.contentAspectY+e.y%this.contentAspectY)%this.contentAspectY,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitHeightBounds,t)},fitHorizontally:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(this.contentAspectX+e.x%this.contentAspectX)%this.contentAspectX,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(1+e.y%1)%1,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitWidthBounds,t)},panBy:function(e,n){var i=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(e),n)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e,viewer:this.viewer}),this},zoomBy:function(t,e,n){return this.zoomTo(this.zoomSpring.target.value*t,e,n)},zoomTo:function(e,n,i){return this.zoomPoint=n instanceof t.Point?n:null,i?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:n,immediately:i,viewer:this.viewer}),this},resize:function(e,n){var i=this.getBounds(),r=i,o=e.x/this.containerSize.x;return this.containerSize=new t.Point(e.x,e.y),n&&(r.width=i.width*o,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:n,viewer:this.viewer}),this.fitBounds(r,!0)},update:function(){var t,e,n,i,r=this.centerSpringX.current.value,o=this.centerSpringY.current.value,s=this.zoomSpring.current.value;return this.zoomPoint&&(t=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=s?(e=this.pixelFromPoint(this.zoomPoint,!0),n=e.minus(t),i=this.deltaPointsFromPixels(n,!0),this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update(),this.centerSpringX.current.value!=r||this.centerSpringY.current.value!=o||this.zoomSpring.current.value!=s},deltaPixelsFromPoints:function(t,e){return t.times(this.containerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return t.divide(this.containerSize.x*this.getZoom(e))},pixelFromPoint:function(t,e){var n=this.getBounds(e);return t.minus(n.getTopLeft()).times(this.containerSize.x/n.width)},pointFromPixel:function(t,e){var n=this.getBounds(e);return t.divide(this.containerSize.x/n.width).plus(n.getTopLeft())},viewportToImageCoordinates:function(e,n){return new t.Point(e*this.contentSize.x,n*this.contentSize.y*this.contentAspectX)},imageToViewportCoordinates:function(e,n){return new t.Point(e/this.contentSize.x,n/this.contentSize.y/this.contentAspectX)},imageToViewportRectangle:function(e,n,i,r){var o,s,a;return 1==arguments.length?(a=e,this.imageToViewportRectangle(a.x,a.y,a.width,a.height)):(o=this.imageToViewportCoordinates(e,n),s=this.imageToViewportCoordinates(i,r),new t.Rect(o.x,o.y,s.x,s.y))}}}(OpenSeadragon),function(t,e,n,r){function o(e,n){this.element=e,this.options=t.extend({},u,n),this._defaults=u,this._name=l,this.init()}function s(){return!!("ontouchstart"in e)}function a(){var t=n.body||n.documentElement,e=t.style,i="transition";if("string"==typeof e[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var r=0;v.length>r;r++)if("string"==typeof e[v[r]+i])return!0;return!1}var l="tooltipster",u={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionInit:function(t,e){e()},functionBefore:function(t,e){e()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,interactiveAutoClose:!0,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},h=!0;a()||(h=!1);var c=s();t(e).on("mousemove.tooltipster",function(){c=!1,t(e).off("mousemove.tooltipster")}),o.prototype={init:function(){var e=t(this.element),i=this,o=!0;if(!i.options.touchDevices&&c&&(o=!1),n.all&&!n.querySelector&&(o=!1),o){var s=t.trim(i.options.content).length>0?i.options.content:e.attr("title");e.data("tooltipsterContent",s),e.removeAttr("title"),i.options.functionInit(e,function(){if(i.options.iconDesktop&&!c||i.options.iconTouch&&c){var n=e.attr("title");e.removeAttr("title");var o=i.options.iconTheme,s=t('<span class="'+o.replace(".","")+'" title="'+n+'">'+i.options.icon+"</span>");s.insertAfter(e),e.data("tooltipsterIcon",s),e=s}i.options.touchDevices&&c&&("click"==i.options.trigger||"hover"==i.options.trigger)?e.bind("touchstart",function(){i.showTooltip()}):("hover"==i.options.trigger&&(e.on("mouseenter.tooltipster",function(){i.showTooltip()}),i.options.interactive?e.on("mouseleave.tooltipster",function(){var n=e.data("tooltipster"),o=!1;n!==r&&""!==n?(n.mouseenter(function(){o=!0}),n.mouseleave(function(){o=!1}),setTimeout(function(){o?i.options.interactiveAutoClose&&(n.find("select").on("change",function(){i.hideTooltip()}),n.mouseleave(function(e){var n=t(e.target);0===n.parents(".tooltipster-base").length||n.hasClass("tooltipster-base")?i.hideTooltip():n.on("mouseleave",function(){i.hideTooltip()})})):i.hideTooltip()},i.options.interactiveTolerance)):i.hideTooltip()}):e.on("mouseleave.tooltipster",function(){i.hideTooltip()})),"click"==i.options.trigger&&e.on("click.tooltipster",function(){""===e.data("tooltipster")||e.data("tooltipster")===r?i.showTooltip():i.hideTooltip()}))})}},showTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon")),e.hasClass("tooltipster-disable")||(t(".tooltipster-base").not(".tooltipster-dying").length>0&&n.options.onlyOne&&t(".tooltipster-base").not(".tooltipster-dying").not(e.data("tooltipster")).each(function(){t(this).addClass("tooltipster-kill");var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()}),e.clearQueue().delay(n.options.delay).queue(function(){n.options.functionBefore(e,function(){if(e.data("tooltipster")!==r&&""!==e.data("tooltipster")){var i=e.data("tooltipster");if(!i.hasClass("tooltipster-kill")){var o="tooltipster-"+n.options.animation;if(i.removeClass("tooltipster-dying"),h&&i.clearQueue().addClass(o+"-show"),n.options.timer>0){var s=i.data("tooltipsterTimer");clearTimeout(s),s=setTimeout(function(){i.data("tooltipsterTimer",r),n.hideTooltip()},n.options.timer),i.data("tooltipsterTimer",s)}n.options.touchDevices&&c&&t("body").bind("touchstart",function(e){if(n.options.interactive){var i=t(e.target),r=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),r&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")})}}else{n.options._bodyOverflowX=t("body").css("overflow-x"),t("body").css("overflow-x","hidden");var l=n.getContent(e),u=n.options.theme,d=u.replace(".",""),o="tooltipster-"+n.options.animation,p="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",f=n.options.fixedWidth>0?"width:"+Math.round(n.options.fixedWidth)+"px;":"",g=n.options.maxWidth>0?"max-width:"+Math.round(n.options.maxWidth)+"px;":"",m=n.options.interactive?"pointer-events: auto;":"",i=t('<div class="tooltipster-base '+d+" "+o+'" style="'+f+" "+g+" "+m+" "+p+'"></div>'),v=t('<div class="tooltipster-content"></div>');v.html(l),i.append(v),i.appendTo("body"),e.data("tooltipster",i),i.data("origin",e),n.positionTooltip(),n.options.functionReady(e,i),h?i.addClass(o+"-show"):i.css("display","none").removeClass(o).fadeIn(n.options.speed);var y=l,b=setInterval(function(){var r=n.getContent(e);0===t("body").find(e).length?(i.addClass("tooltipster-dying"),n.hideTooltip()):y!==r&&""!==r&&(y=r,i.find(".tooltipster-content").html(r),n.options.updateAnimation&&(a()?(i.css({width:"","-webkit-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){i.removeClass("tooltipster-content-changing"),setTimeout(function(){i.css({"-webkit-transition":n.options.speed+"ms","-moz-transition":n.options.speed+"ms","-o-transition":n.options.speed+"ms","-ms-transition":n.options.speed+"ms",transition:n.options.speed+"ms"})},n.options.speed)},n.options.speed)):i.fadeTo(n.options.speed,.5,function(){i.fadeTo(n.options.speed,1)})),n.positionTooltip()),(0===t("body").find(i).length||0===t("body").find(e).length)&&clearInterval(b)},200);if(n.options.timer>0){var s=setTimeout(function(){i.data("tooltipsterTimer",r),n.hideTooltip()},n.options.timer+n.options.speed);i.data("tooltipsterTimer",s)}n.options.touchDevices&&c&&t("body").bind("touchstart",function(e){if(n.options.interactive){var i=t(e.target),r=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),r&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")})}}),e.dequeue()}))},hideTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon"));var i=e.data("tooltipster");if(i===r&&(i=t(".tooltipster-dying")),e.clearQueue(),i!==r&&""!==i){var o=i.data("tooltipsterTimer");o!==r&&clearTimeout(o);var s="tooltipster-"+n.options.animation;h?i.clearQueue().removeClass(s+"-show").addClass("tooltipster-dying").delay(n.options.speed).queue(function(){i.remove(),e.data("tooltipster",""),t("body").css("overflow-x",n.options._bodyOverflowX),n.options.functionAfter(e)}):i.clearQueue().addClass("tooltipster-dying").fadeOut(n.options.speed,function(){i.remove(),e.data("tooltipster",""),t("body").css("overflow-x",n.options._bodyOverflowX),n.options.functionAfter(e)})}},positionTooltip:function(){function n(){var n=t(e).scrollLeft();if(0>D-n){var i=D-n;D=n,l.data("arrow-reposition",i)}if(D+d-n>u){var i=D-(u+n-d);D=u+n-d,l.data("arrow-reposition",i)}}function o(n,i){0>m-t(e).scrollTop()-f-j-12&&i.indexOf("top")>-1&&(a.options.position=n,y=i),m+c+f+12+j>t(e).scrollTop()+t(e).height()&&i.indexOf("bottom")>-1&&(a.options.position=n,y=i,R=m-f-j-12)}var s=t(this.element),a=this;if(s.data("tooltipsterIcon")!==r&&(s=s.data("tooltipsterIcon")),s.data("tooltipster")!==r&&""!==s.data("tooltipster")){var l=s.data("tooltipster");l.css("width","");var u=t(e).width(),h=s.outerWidth(!1),c=s.outerHeight(!1),d=l.outerWidth(!1),p=l.innerWidth()+1,f=l.outerHeight(!1),g=s.offset(),m=g.top,v=g.left,y=r;if(s.is("area")){var b=s.attr("shape"),w=s.parent().attr("name"),x=t('img[usemap="#'+w+'"]'),S=x.offset().left,T=x.offset().top,_=s.attr("coords")!==r?s.attr("coords").split(","):r;if("circle"==b){var E=parseInt(_[0]),M=parseInt(_[1]),C=parseInt(_[2]);c=2*C,h=2*C,m=T+M-C,v=S+E-C}else if("rect"==b){var E=parseInt(_[0]),M=parseInt(_[1]),k=parseInt(_[2]),H=parseInt(_[3]);c=H-M,h=k-E,m=T+M,v=S+E}else if("poly"==b){var N=0,P=0,z=0,I=0,O="even";for(i=0;_.length>i;i++){var A=parseInt(_[i]);"even"==O?(A>z&&(z=A,0===i&&(N=z)),N>A&&(N=A),O="odd"):(A>I&&(I=A,1==i&&(P=I)),P>A&&(P=A),O="even")}c=I-P,h=z-N,m=T+P,v=S+N}else c=x.outerHeight(!1),h=x.outerWidth(!1),m=T,v=S}0===a.options.fixedWidth&&l.css({width:Math.round(p)+"px","padding-left":"0px","padding-right":"0px"});var D=0,L=0,R=0,j=parseInt(a.options.offsetY),B=parseInt(a.options.offsetX),F="";if("top"==a.options.position){var W=v+d-(v+h);D=v+B-W/2,R=m-f-j-12,n(),o("bottom","top")}if("top-left"==a.options.position&&(D=v+B,R=m-f-j-12,n(),o("bottom-left","top-left")),"top-right"==a.options.position&&(D=v+h+B-d,R=m-f-j-12,n(),o("bottom-right","top-right")),"bottom"==a.options.position){var W=v+d-(v+h);D=v-W/2+B,R=m+c+j+12,n(),o("top","bottom")}if("bottom-left"==a.options.position&&(D=v+B,R=m+c+j+12,n(),o("top-left","bottom-left")),"bottom-right"==a.options.position&&(D=v+h+B-d,R=m+c+j+12,n(),o("top-right","bottom-right")),"left"==a.options.position){D=v-B-d-12,L=v+B+h+12;var U=m+f-(m+s.outerHeight(!1));if(R=m-U/2-j,0>D&&L+d>u){var V=2*parseFloat(l.css("border-width")),$=d+D-V;l.css("width",$+"px"),f=l.outerHeight(!1),D=v-B-$-12-V,U=m+f-(m+s.outerHeight(!1)),R=m-U/2-j}else 0>D&&(D=v+B+h+12,l.data("arrow-reposition","left"))}if("right"==a.options.position){D=v+B+h+12,L=v-B-d-12;var U=m+f-(m+s.outerHeight(!1));if(R=m-U/2-j,D+d>u&&0>L){var V=2*parseFloat(l.css("border-width")),$=u-D-V;l.css("width",$+"px"),f=l.outerHeight(!1),U=m+f-(m+s.outerHeight(!1)),R=m-U/2-j}else D+d>u&&(D=v-B-d-12,l.data("arrow-reposition","right"))}if(a.options.arrow){var q="tooltipster-arrow-"+a.options.position;if(1>a.options.arrowColor.length)var G=l.css("background-color");else var G=a.options.arrowColor;var Q=l.data("arrow-reposition");if(Q?"left"==Q?(q="tooltipster-arrow-right",Q=""):"right"==Q?(q="tooltipster-arrow-left",Q=""):Q="left:"+Math.round(Q)+"px;":Q="","top"==a.options.position||"top-left"==a.options.position||"top-right"==a.options.position)var X=parseFloat(l.css("border-bottom-width")),Z=l.css("border-bottom-color");else if("bottom"==a.options.position||"bottom-left"==a.options.position||"bottom-right"==a.options.position)var X=parseFloat(l.css("border-top-width")),Z=l.css("border-top-color");else if("left"==a.options.position)var X=parseFloat(l.css("border-right-width")),Z=l.css("border-right-color");else if("right"==a.options.position)var X=parseFloat(l.css("border-left-width")),Z=l.css("border-left-color");else var X=parseFloat(l.css("border-bottom-width")),Z=l.css("border-bottom-color");X>1&&X++;var Y="";if(0!==X){var K="",J="border-color: "+Z+";";-1!==q.indexOf("bottom")?K="margin-top: -"+Math.round(X)+"px;":-1!==q.indexOf("top")?K="margin-bottom: -"+Math.round(X)+"px;":-1!==q.indexOf("left")?K="margin-right: -"+Math.round(X)+"px;":-1!==q.indexOf("right")&&(K="margin-left: -"+Math.round(X)+"px;"),Y='<span class="tooltipster-arrow-border" style="'+K+" "+J+';"></span>'}l.find(".tooltipster-arrow").remove(),F='<div class="'+q+' tooltipster-arrow" style="'+Q+'">'+Y+'<span style="border-color:'+G+';"></span></div>',l.append(F)}l.css({top:Math.round(R)+"px",left:Math.round(D)+"px"}),y!==r&&(a.options.position=y)}},getContent:function(e){var n=e.data("tooltipsterContent");return n=t(t.parseHTML("<div>"+n+"</div>")).html()}},t.fn[l]=function(e){if(!e||"setDefaults"!==e){if("string"==typeof e){var n=this,i=arguments[1],s=null;if(n.data("plugin_tooltipster")===r){var a=n.find("*");n=t(),a.each(function(){t(this).data("plugin_tooltipster")!==r&&n.push(t(this))})}return n.each(function(){switch(e.toLowerCase()){case"show":t(this).data("plugin_tooltipster").showTooltip();break;case"hide":t(this).data("plugin_tooltipster").hideTooltip();break;case"disable":t(this).addClass("tooltipster-disable");break;case"enable":t(this).removeClass("tooltipster-disable");break;case"destroy":t(this).data("plugin_tooltipster").hideTooltip(),t(this).data("plugin_tooltipster","").attr("title",n.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster").unbind("touchstart");break;case"update":var o=i;if(t(this).data("tooltipsterIcon")===r)t(this).data("tooltipsterContent",o);else{var a=t(this).data("tooltipsterIcon");a.data("tooltipsterContent",o)}break;case"reposition":t(this).data("plugin_tooltipster").positionTooltip();break;case"val":return s=t(this).data("tooltipsterContent"),!1}}),null!==s?s:this}return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new o(this,e));var n=t(this).data("plugin_tooltipster").options;if(n.iconDesktop&&!c||n.iconTouch&&c){var i=t(this).data("plugin_tooltipster");t(this).next().data("plugin_tooltipster",i)}})}t.extend(u,arguments[1])},c&&e.addEventListener("orientationchange",function(){t(".tooltipster-base").length>0&&t(".tooltipster-base").each(function(){var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()})},!1),t(e).on("scroll.tooltipster",function(){var e=t(".tooltipster-base").data("origin");e&&e.tooltipster("reposition")}),t(e).on("resize.tooltipster",function(){var e=t(".tooltipster-base").data("origin");null!==e&&e!==r&&e.tooltipster("reposition")})}(jQuery,window,document),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function r(){}function o(){}function s(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function a(){}function l(t){function e(){for(var e,i=n,r=-1,o=i.length;o>++r;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var o,s=i.get(e);return 2>arguments.length?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function u(){as.event.stopPropagation(),as.event.preventDefault()}function h(){for(var t,e=as.event;t=e.sourceEvent;)e=t;return e}function c(t,e){function n(){t.on(e,null)}t.on(e,function(){u(),n()},!0),setTimeout(n,0)}function d(t){for(var e=new a,n=0,i=arguments.length;i>++n;)e[arguments[n]]=l(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=as.event;r.target=t,as.event=r,e[r.type].apply(n,i)}finally{as.event=o}}},e}function p(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>ms&&(us.scrollX||us.scrollY)){n=as.select(ls.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();ms=!(r.f||r.e),n.remove()}return ms?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function f(t){for(var e=-1,n=t.length,i=[];n>++e;)i.push(t[e]);return i}function g(t){return Array.prototype.slice.call(t)}function m(t){return bs(t,Es),t}function v(t){return function(){return ws(t,this)}}function y(t){return function(){return xs(t,this)}}function b(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=as.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?o:r}function w(t){return t.trim().replace(/\s+/g," ")}function x(t){return RegExp("(?:^|\\s+)"+as.requote(t)+"(?:\\s+|$)","g")}function S(t,e){function n(){for(var n=-1;r>++n;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);r>++n;)t[n](this,i)}t=t.trim().split(/\s+/).map(T);var r=t.length;return"function"==typeof e?i:n}function T(t){var e=x(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",w(r+" "+t))):n.setAttribute("class",w(r.replace(e," ")))}}function _(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function E(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function M(t){return{__data__:t}}function C(t){return function(){return _s(this,t)}}function k(t){return arguments.length||(t=as.ascending),function(e,n){return!e-!n||t(e.__data__,n.__data__)}}function H(){}function N(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function r(){var r=l(e,vs(arguments));i.call(this),this.addEventListener(t,this[s]=r,r.$=n),r._=e}function o(){var e,n=RegExp("^__on([^.]+)"+as.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var s="__on"+t,a=t.indexOf("."),l=P;a>0&&(t=t.substring(0,a));var u=ks.get(t);return u&&(t=u,l=z),a?e?r:i:e?H:o}function P(t,e){return function(n){var i=as.event;as.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{as.event=i}}}function z(t,e){var n=P(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function I(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],s=0,a=o.length;a>s;s++)(r=o[s])&&e(r,s,n);return t}function O(t){return bs(t,Hs),t}function A(){}function D(t,e,n){return new L(t,e,n)}function L(t,e,n){this.h=t,this.s=e,this.l=n}function R(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,s;return t=isNaN(t)?0:0>(t%=360)?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,ee(r(t+120),r(t),r(t-120))}function j(t){return t>0?1:0>t?-1:0}function B(t){return Math.acos(Math.max(-1,Math.min(1,t)))}function F(t){return t>1?As/2:-1>t?-As/2:Math.asin(t)}function W(t){return(Math.exp(t)-Math.exp(-t))/2}function U(t){return(Math.exp(t)+Math.exp(-t))/2}function V(t){return(t=Math.sin(t/2))*t}function $(t,e,n){return new q(t,e,n)}function q(t,e,n){this.h=t,this.c=e,this.l=n}function G(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),Q(n,Math.cos(t*=Ls)*e,Math.sin(t)*e)}function Q(t,e,n){return new X(t,e,n)}function X(t,e,n){this.l=t,this.a=e,this.b=n}function Z(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=K(r)*Fs,i=K(i)*Ws,o=K(o)*Us,ee(te(3.2404542*r-1.5371385*i-.4985314*o),te(-.969266*r+1.8760108*i+.041556*o),te(.0556434*r-.2040259*i+1.0572252*o))}function Y(t,e,n){return t>0?$(Math.atan2(n,e)*Rs,Math.sqrt(e*e+n*n),t):$(0/0,0/0,t)}function K(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function J(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,n){return new ne(t,e,n)}function ne(t,e,n){this.r=t,this.g=e,this.b=n}function ie(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function re(t,e,n){var i,r,o,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(le(r[0]),le(r[1]),le(r[2]))}return(o=qs.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),e(s,a,l))}function oe(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,l=(s+o)/2;return a?(r=.5>l?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),D(i,r,l)}function se(t,e,n){t=ae(t),e=ae(e),n=ae(n);var i=J((.4124564*t+.3575761*e+.1804375*n)/Fs),r=J((.2126729*t+.7151522*e+.072175*n)/Ws),o=J((.0193339*t+.119192*e+.9503041*n)/Us);return Q(116*r-16,500*(i-r),200*(r-o))}function ae(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function le(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ue(t){return"function"==typeof t?t:function(){return t}}function he(t){return t}function ce(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),de(e,n,t,i)}}function de(t,e,n,i){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(i){return s.error.call(o,i),void 0}s.load.call(o,t)}else s.error.call(o,l)}var o={},s=as.dispatch("progress","load","error"),a={},l=new(us.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=as.event;as.event=t;try{s.progress.call(o,l)}finally{as.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),2>arguments.length?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(vs(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),l.setRequestHeader)for(var s in a)l.setRequestHeader(s,a[s]);
return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},as.rebind(o,s,"on"),null==i?o:o.get(pe(i))}function pe(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function fe(t,e){function n(t,n,o){3>arguments.length&&(o=n,n=null);var s=as.xhr(t,e,o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?i:r(t)):n},s.row(n)}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function s(e){return e.map(a).join(t)}function a(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(h>=l)return s;if(r)return r=!1,o;var e=h;if(34===t.charCodeAt(e)){for(var n=e;l>n++;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}h=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++h):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>h;){var i=t.charCodeAt(h++),a=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(h)&&(++h,++a);else if(i!==u)continue;return t.substring(e,h-a)}return t.substring(e)}for(var i,r,o={},s={},a=[],l=t.length,h=0,c=0;(i=n())!==s;){for(var d=[];i!==o&&i!==s;)d.push(i),i=n();(!e||(d=e(d,c++)))&&a.push(d)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new o,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(s).join("\n")},n}function ge(){var t=me(),e=ve()-t;e>24?(isFinite(e)&&(clearTimeout(Zs),Zs=setTimeout(ge,e)),Xs=0):(Xs=1,Ys(ge))}function me(){for(var t=Date.now(),e=Gs;e;)t>=e.time&&(e.flush=e.callback(t-e.time)),e=e.next;return t}function ve(){for(var t,e=Gs,n=1/0;e;)e.flush?e=t?t.next=e.next:Gs=e.next:(n>e.time&&(n=e.time),e=(t=e).next);return Qs=t,n}function ye(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function be(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function we(t){return t+""}function xe(t,e){t&&aa.hasOwnProperty(t.type)&&aa[t.type](t,e)}function Se(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();o>++r;)i=t[r],e.point(i[0],i[1]);e.lineEnd()}function Te(t,e){var n=-1,i=t.length;for(e.polygonStart();i>++n;)Se(t[n],e,1);e.polygonEnd()}function _e(){function t(t,e){t*=Ls,e=e*Ls/2+As/4;var n=t-i,s=Math.cos(e),a=Math.sin(e),l=o*a,u=r*s+l*Math.cos(n),h=l*Math.sin(n);ua+=Math.atan2(h,u),i=t,r=s,o=a}var e,n,i,r,o;ha.point=function(s,a){ha.point=t,i=(e=s)*Ls,r=Math.cos(a=(n=a)*Ls/2+As/4),o=Math.sin(a)},ha.lineEnd=function(){t(e,n)}}function Ee(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ce(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ke(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function He(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ne(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Pe(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function ze(t,e){return Ds>Math.abs(t[0]-e[0])&&Ds>Math.abs(t[1]-e[1])}function Ie(t,e){if(!ca){++da,t*=Ls;var n=Math.cos(e*=Ls);pa+=(n*Math.cos(t)-pa)/da,fa+=(n*Math.sin(t)-fa)/da,ga+=(Math.sin(e)-ga)/da}}function Oe(){var t,e;ca=1,Ae(),ca=2;var n=ma.point;ma.point=function(i,r){n(t=i,e=r)},ma.lineEnd=function(){ma.point(t,e),De(),ma.lineEnd=De}}function Ae(){function t(t,r){t*=Ls;var o=Math.cos(r*=Ls),s=o*Math.cos(t),a=o*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*a)*u+(u=i*s-e*l)*u+(u=e*a-n*s)*u),e*s+n*a+i*l);da+=u,pa+=u*(e+(e=s)),fa+=u*(n+(n=a)),ga+=u*(i+(i=l))}var e,n,i;ca>1||(1>ca&&(ca=1,da=pa=fa=ga=0),ma.point=function(r,o){r*=Ls;var s=Math.cos(o*=Ls);e=s*Math.cos(r),n=s*Math.sin(r),i=Math.sin(o),ma.point=t})}function De(){ma.point=Ie}function Le(){return!0}function Re(t,e,n,i,r){var o=[],s=[];if(t.forEach(function(t){if(!(0>=(e=t.length-1))){var e,n=t[0],i=t[e];if(ze(n,i)){r.lineStart();for(var a=0;e>a;++a)r.point((n=t[a])[0],n[1]);return r.lineEnd(),void 0}var l={point:n,points:t,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,o.push(l),s.push(u),l={point:i,points:[i],other:null,visited:!1,entry:!1,subject:!0},u={point:i,points:[i],other:l,visited:!1,entry:!0,subject:!1},l.other=u,o.push(l),s.push(u)}}),s.sort(e),je(o),je(s),o.length){if(n)for(var a=1,l=!n(s[0].point),u=s.length;u>a;++a)s[a].entry=l=!l;for(var h,c,d,p=o[0];;){for(h=p;h.visited;)if((h=h.next)===p)return;c=h.points,r.lineStart();do{if(h.visited=h.other.visited=!0,h.entry){if(h.subject)for(var a=0;c.length>a;a++)r.point((d=c[a])[0],d[1]);else i(h.point,h.next.point,1,r);h=h.next}else{if(h.subject){c=h.prev.points;for(var a=c.length;--a>=0;)r.point((d=c[a])[0],d[1])}else i(h.point,h.prev.point,-1,r);h=h.prev}h=h.other,c=h.points}while(!h.visited);r.lineEnd()}}}function je(t){if(e=t.length){for(var e,n,i=0,r=t[0];e>++i;)r.next=n=t[i],n.prev=r,r=n;r.next=n=t[0],n.prev=r}}function Be(t,e,n){return function(i){function r(e,n){t(e,n)&&i.point(e,n)}function o(t,e){m.point(t,e)}function s(){v.point=o,m.lineStart()}function a(){v.point=r,m.lineEnd()}function l(t,e){b.point(t,e),g.push([t,e])}function u(){b.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),r=n.length;if(!r)return f=!0,p+=Ue(g,-1),g=null,void 0;if(g=null,1&e){t=n[0],d+=Ue(t,1);var o,r=t.length-1,s=-1;for(i.lineStart();r>++s;)i.point((o=t[s])[0],o[1]);return i.lineEnd(),void 0}r>1&&2&e&&n.push(n.pop().concat(n.shift())),c.push(n.filter(Fe))}var c,d,p,f,g,m=e(i),v={point:r,lineStart:s,lineEnd:a,polygonStart:function(){v.point=l,v.lineStart=u,v.lineEnd=h,f=!1,p=d=0,c=[],i.polygonStart()},polygonEnd:function(){v.point=r,v.lineStart=s,v.lineEnd=a,c=as.merge(c),c.length?Re(c,Ve,null,n,i):(-Ds>d||f&&-Ds>p)&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=We(),b=e(y);return v}}function Fe(t){return t.length>1}function We(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:H,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ue(t,e){if(!(n=t.length))return 0;for(var n,i,r,o=0,s=0,a=t[0],l=a[0],u=a[1],h=Math.cos(u),c=Math.atan2(e*Math.sin(l)*h,Math.sin(u)),d=1-e*Math.cos(l)*h,p=c;n>++o;)a=t[o],h=Math.cos(u=a[1]),i=Math.atan2(e*Math.sin(l=a[0])*h,Math.sin(u)),r=1-e*Math.cos(l)*h,Ds>Math.abs(d-2)&&Ds>Math.abs(r-2)||(Ds>Math.abs(r)||Ds>Math.abs(d)||(Ds>Math.abs(Math.abs(i-c)-As)?r+d>2&&(s+=4*(i-c)):s+=Ds>Math.abs(d-2)?4*(i-p):((3*As+i-c)%(2*As)-As)*(d+r)),p=c,c=i,d=r);return s}function Ve(t,e){return(0>(t=t.point)[0]?t[1]-As/2-Ds:As/2-t[1])-(0>(e=e.point)[0]?e[1]-As/2-Ds:As/2-e[1])}function $e(t){var e,n=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?As:-As,l=Math.abs(o-n);Ds>Math.abs(l-As)?(t.point(n,i=(i+s)/2>0?As/2:-As/2),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=As&&(Ds>Math.abs(n-r)&&(n-=r*Ds),Ds>Math.abs(o-a)&&(o-=a*Ds),i=qe(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function qe(t,e,n,i){var r,o,s=Math.sin(t-n);return Math.abs(s)>Ds?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*s)):(e+i)/2}function Ge(t,e,n,i){var r;if(null==t)r=n*As/2,i.point(-As,r),i.point(0,r),i.point(As,r),i.point(As,0),i.point(As,-r),i.point(0,-r),i.point(-As,-r),i.point(-As,0),i.point(-As,r);else if(Math.abs(t[0]-e[0])>Ds){var o=(t[0]<e[0]?1:-1)*As;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function Qe(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,d){var p,f=[c,d],g=e(c,d),m=s?g?0:r(c,d):g?r(c+(0>c?As:-As),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(p=i(n,f),(ze(n,p)||ze(f,p))&&(f[0]+=Ds,f[1]+=Ds,g=e(f[0],f[1]))),g!==l)h=0,g?(t.lineStart(),p=i(f,n),t.point(p[0],p[1])):(p=i(n,f),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&s^g){var v;m&o||!(v=i(f,n,!0))||(h=0,s?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&ze(n,f)||t.point(f[0],f[1]),n=f,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return h|(u&&l)<<1}}}function i(t,e,n){var i=Ee(t),r=Ee(e),s=[1,0,0],a=Ce(i,r),l=Me(a,a),u=a[0],h=l-u*u;if(!h)return!n&&t;var c=o*l/h,d=-o*u/h,p=Ce(s,a),f=He(s,c),g=He(a,d);ke(f,g);var m=p,v=Me(f,m),y=Me(m,m),b=v*v-y*(Me(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),x=He(m,(-v-w)/y);if(ke(x,f),x=Pe(x),!n)return x;var S,T=t[0],_=e[0],E=t[1],M=e[1];T>_&&(S=T,T=_,_=S);var C=_-T,k=Ds>Math.abs(C-As),H=k||Ds>C;if(!k&&E>M&&(S=E,E=M,M=S),H?k?E+M>0^x[1]<(Ds>Math.abs(x[0]-T)?E:M):x[1]>=E&&M>=x[1]:C>As^(x[0]>=T&&_>=x[0])){var N=He(m,(-v+w)/y);return ke(N,f),[x,Pe(N)]}}}function r(e,n){var i=s?t:As-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),s=o>0,a=Math.abs(o)>Ds,l=ln(t,6*Ls);return Be(e,n,l)}function Xe(t,e,n,i){function r(i,r){return Ds>Math.abs(i[0]-t)?r>0?0:3:Ds>Math.abs(i[0]-n)?r>0?2:1:Ds>Math.abs(i[1]-e)?r>0?1:0:r>0?3:2}function o(t,e){return s(t.point,e.point)}function s(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}function a(r,o){var s=o[0]-r[0],a=o[1]-r[1],l=[0,1];return Ds>Math.abs(s)&&Ds>Math.abs(a)?r[0]>=t&&n>=r[0]&&r[1]>=e&&i>=r[1]:Ze(t-r[0],s,l)&&Ze(r[0]-n,-s,l)&&Ze(e-r[1],a,l)&&Ze(r[1]-i,-a,l)?(1>l[1]&&(o[0]=r[0]+l[1]*s,o[1]=r[1]+l[1]*a),l[0]>0&&(r[0]+=l[0]*s,r[1]+=l[0]*a),!0):!1}return function(l){function u(o){var s=r(o,-1),a=h([0===s||3===s?t:n,s>1?i:e]);return a}function h(t){for(var e=0,n=b.length,i=t[1],r=0;n>r;++r)for(var o,s=1,a=b[r],l=a.length,u=a[0];l>s;++s)o=a[s],i>=u[1]?o[1]>i&&c(u,o,t)>0&&++e:i>=o[1]&&0>c(u,o,t)&&--e,u=o;return 0!==e}function c(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function d(o,a,l,u){var h=0,c=0;if(null==o||(h=r(o,l))!==(c=r(a,l))||0>s(o,a)^l>0){do u.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+l+4)%4)!==c)}else u.point(a[0],a[1])}function p(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function f(t,e){p(t,e)&&l.point(t,e)}function g(){N.point=v,b&&b.push(w=[]),C=!0,M=!1,_=E=0/0}function m(){y&&(v(x,S),T&&M&&H.rejoin(),y.push(H.buffer())),N.point=f,M&&l.lineEnd()}function v(t,e){t=Math.max(-ya,Math.min(ya,t)),e=Math.max(-ya,Math.min(ya,e));var n=p(t,e);if(b&&w.push([t,e]),C)x=t,S=e,T=n,C=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&M)l.point(t,e);else{var i=[_,E],r=[t,e];a(i,r)?(M||(l.lineStart(),l.point(i[0],i[1])),l.point(r[0],r[1]),n||l.lineEnd()):n&&(l.lineStart(),l.point(t,e))}_=t,E=e,M=n}var y,b,w,x,S,T,_,E,M,C,k=l,H=We(),N={point:f,lineStart:g,lineEnd:m,polygonStart:function(){l=H,y=[],b=[]},polygonEnd:function(){l=k,(y=as.merge(y)).length?(l.polygonStart(),Re(y,o,u,d,l),l.polygonEnd()):h([t,e])&&(l.polygonStart(),l.lineStart(),d(null,null,1,l),l.lineEnd(),l.polygonEnd()),y=b=w=null}};return N}}function Ze(t,e,n){if(Ds>Math.abs(e))return 0>=t;var i=t/e;if(e>0){if(i>n[1])return!1;i>n[0]&&(n[0]=i)}else{if(n[0]>i)return!1;n[1]>i&&(n[1]=i)}return!0}function Ye(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Ke(t){function e(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function o(){h=0/0,g.point=s,e.lineStart()}function s(i,o){var s=Ee([i,o]),a=t(i,o);n(h,c,u,d,p,f,h=a[0],c=a[1],u=i,d=s[0],p=s[1],f=s[2],r,e),e.point(h,c)}function a(){g.point=i,e.lineEnd()}function l(){var t,i,l,m,v,y,b;o(),g.point=function(e,n){s(t=e,i=n),l=h,m=c,v=d,y=p,b=f,g.point=s},g.lineEnd=function(){n(h,c,u,d,p,f,l,m,t,v,y,b,r,e),g.lineEnd=a,a()}}var u,h,c,d,p,f,g={point:i,lineStart:o,lineEnd:a,polygonStart:function(){e.polygonStart(),g.lineStart=l},polygonEnd:function(){e.polygonEnd(),g.lineStart=o}};return g}function n(e,r,o,s,a,l,u,h,c,d,p,f,g,m){var v=u-e,y=h-r,b=v*v+y*y;if(b>4*i&&g--){var w=s+d,x=a+p,S=l+f,T=Math.sqrt(w*w+x*x+S*S),_=Math.asin(S/=T),E=Ds>Math.abs(Math.abs(S)-1)?(o+c)/2:Math.atan2(x,w),M=t(E,_),C=M[0],k=M[1],H=C-e,N=k-r,P=y*H-v*N;(P*P/b>i||Math.abs((v*H+y*N)/b-.5)>.3)&&(n(e,r,o,s,a,l,C,k,E,w/=T,x/=T,S,g,m),m.point(C,k),n(C,k,E,w,x,S,u,h,c,d,p,f,g,m))}}var i=.5,r=16;return e.precision=function(t){return arguments.length?(r=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function Je(t){return tn(function(){return t})()}function tn(t){function e(t){return t=s(t[0]*Ls,t[1]*Ls),[t[0]*h+a,l-t[1]*h]}function n(t){return t=s.invert((t[0]-a)/h,(l-t[1])/h),t&&[t[0]*Rs,t[1]*Rs]}function i(){s=Ye(o=rn(g,m,v),r);var t=r(p,f);return a=c-t[0]*h,l=d+t[1]*h,e}var r,o,s,a,l,u=Ke(function(t,e){return t=r(t,e),[t[0]*h+a,l-t[1]*h]}),h=150,c=480,d=250,p=0,f=0,g=0,m=0,v=0,y=va,b=he,w=null,x=null;return e.stream=function(t){return en(o,y(u(b(t))))},e.clipAngle=function(t){return arguments.length?(y=null==t?(w=t,va):Qe((w=+t)*Ls),e):w},e.clipExtent=function(t){return arguments.length?(x=t,b=null==t?he:Xe(t[0][0],t[0][1],t[1][0],t[1][1]),e):x},e.scale=function(t){return arguments.length?(h=+t,i()):h},e.translate=function(t){return arguments.length?(c=+t[0],d=+t[1],i()):[c,d]},e.center=function(t){return arguments.length?(p=t[0]%360*Ls,f=t[1]%360*Ls,i()):[p*Rs,f*Rs]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Ls,m=t[1]%360*Ls,v=t.length>2?t[2]%360*Ls:0,i()):[g*Rs,m*Rs,v*Rs]},as.rebind(e,u,"precision"),function(){return r=t.apply(this,arguments),e.invert=r.invert&&n,i()}}function en(t,e){return{point:function(n,i){i=t(n*Ls,i*Ls),n=i[0],e.point(n>As?n-2*As:-As>n?n+2*As:n,i[1])},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function nn(t,e){return[t,e]}function rn(t,e,n){return t?e||n?Ye(sn(t),an(e,n)):sn(t):e||n?an(e,n):nn}function on(t){return function(e,n){return e+=t,[e>As?e-2*As:-As>e?e+2*As:e,n]}}function sn(t){var e=on(t);return e.invert=on(-t),e}function an(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*i+a*r;return[Math.atan2(l*o-h*s,a*i-u*r),Math.asin(Math.max(-1,Math.min(1,h*o+l*s)))]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*o-l*s;return[Math.atan2(l*o+u*s,a*i+h*r),Math.asin(Math.max(-1,Math.min(1,h*i-a*r)))]},n}function ln(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,s,a){null!=r?(r=un(n,r),o=un(n,o),(s>0?o>r:r>o)&&(r+=2*s*As)):(r=t+2*s*As,o=t);for(var l,u=s*e,h=r;s>0?h>o:o>h;h-=u)a.point((l=Pe([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],l[1])}}function un(t,e){var n=Ee(e);n[0]-=t,Ne(n);var i=B(-n[1]);return((0>-n[2]?-i:i)+2*Math.PI-Ds)%(2*Math.PI)}function hn(t,e,n){var i=as.range(t,e-Ds,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function cn(t,e,n){var i=as.range(t,e-Ds,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function dn(t){return t.source}function pn(t){return t.target}function fn(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),h=s*Math.cos(n),c=s*Math.sin(n),d=2*Math.asin(Math.sqrt(V(i-e)+r*s*V(n-t))),p=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,i=n*l+e*h,r=n*u+e*c,s=n*o+e*a;return[Math.atan2(r,i)*Rs,Math.atan2(s,Math.sqrt(i*i+r*r))*Rs]}:function(){return[t*Rs,e*Rs]};return f.distance=d,f}function gn(){function t(t,r){var o=Math.sin(r*=Ls),s=Math.cos(r),a=Math.abs((t*=Ls)-e),l=Math.cos(a);ba+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=i*o-n*s*l)*a),n*o+i*s*l),e=t,n=o,i=s}var e,n,i;wa.point=function(r,o){e=r*Ls,n=Math.sin(o*=Ls),i=Math.cos(o),wa.point=t},wa.lineEnd=function(){wa.point=wa.lineEnd=H}}function mn(t){var e=0,n=As/3,i=tn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*As/180,n=t[1]*As/180):[180*(e/As),180*(n/As)]},r}function vn(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),s-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),s=Math.sqrt(o)/r;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/r,F((o-(t*t+n*n)*r*r)/(2*r))]},n}function yn(){function t(t,e){Sa+=r*t-i*e,i=t,r=e}var e,n,i,r;Ca.point=function(o,s){Ca.point=t,e=i=o,n=r=s},Ca.lineEnd=function(){t(e,n)}}function bn(t,e){Ta>t&&(Ta=t),t>Ea&&(Ea=t),_a>e&&(_a=e),e>Ma&&(Ma=e)}function wn(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function i(){a.point=t}function r(){s.push("Z")}var o=xn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=r},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(t){return o=xn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function xn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Sn(t,e){ca||(pa+=t,fa+=e,++ga)}function Tn(){function t(t,i){var r=t-e,o=i-n,s=Math.sqrt(r*r+o*o);pa+=s*(e+t)/2,fa+=s*(n+i)/2,ga+=s,e=t,n=i}var e,n;if(1!==ca){if(!(1>ca))return;ca=1,pa=fa=ga=0}Ha.point=function(i,r){Ha.point=t,e=i,n=r}}function _n(){Ha.point=Sn}function En(){function t(t,e){var n=r*t-i*e;pa+=n*(i+t),fa+=n*(r+e),ga+=3*n,i=t,r=e}var e,n,i,r;2>ca&&(ca=2,pa=fa=ga=0),Ha.point=function(o,s){Ha.point=t,e=i=o,n=r=s},Ha.lineEnd=function(){t(e,n)}}function Mn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,s,0,2*As)}function n(e,n){t.moveTo(e,n),a.point=i}function i(e,n){t.lineTo(e,n)}function r(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=e},pointRadius:function(t){return s=t,a},result:H};return a}function Cn(t){var e=Ke(function(e,n){return t([e*Rs,n*Rs])});return function(t){return t=e(t),{point:function(e,n){t.point(e*Ls,n*Ls)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}function kn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),s=Math.cos(r);return[Math.atan2(t*o,i*s),Math.asin(i&&n*o/i)]},n}function Hn(t,e){function n(t,e){var n=Ds>Math.abs(Math.abs(e)-As/2)?0:s/Math.pow(r(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(As/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),s=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,i=j(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/i,1/o))-As/2]},n):Pn}function Nn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return Ds>Math.abs(r)?nn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-j(r)*Math.sqrt(t*t+n*n)]},n)}function Pn(t,e){return[t,Math.log(Math.tan(As/4+e/2))]}function zn(t){var e,n=Je(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=As*i(),l=r();o([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function In(t,e){var n=Math.cos(e)*Math.sin(t);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function On(t){function e(e){function s(){u.push("M",o(t(h),a))}for(var l,u=[],h=[],c=-1,d=e.length,p=ue(n),f=ue(i);d>++c;)r.call(this,l=e[c],c)?h.push([+p.call(this,l,c),+f.call(this,l,c)]):h.length&&(s(),h=[]);return h.length&&s(),u.length?u.join(""):null}var n=An,i=Dn,r=Le,o=Ln,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Aa.get(t)||Ln).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function An(t){return t[0]}function Dn(t){return t[1]}function Ln(t){return t.join("L")}function Rn(t){return Ln(t)+"Z"}function jn(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];n>++e;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Bn(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];n>++e;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Fn(t,e){return 4>t.length?Ln(t):t[1]+Vn(t.slice(1,t.length-1),$n(t,e))}function Wn(t,e){return 3>t.length?Ln(t):t[0]+Vn((t.push(t[0]),t),$n([t[t.length-2]].concat(t,[t[1]]),e))}function Un(t,e){return 3>t.length?Ln(t):t[0]+Vn(t,$n(t,e))}function Vn(t,e){if(1>e.length||t.length!=e.length&&t.length!=e.length+2)return Ln(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){a=e[1],o=t[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;e.length>u;u++,l++)o=t[l],a=e[u],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var h=t[l];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+h[0]+","+h[1]}return i}function $n(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,l=t.length;l>++a;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function qn(t){if(3>t.length)return Ln(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],l=[r,",",o];for(Yn(l,s,a);n>++e;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);for(e=-1;2>++e;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);return l.join("")}function Gn(t){if(4>t.length)return Ln(t);for(var e,n=[],i=-1,r=t.length,o=[0],s=[0];3>++i;)e=t[i],o.push(e[0]),s.push(e[1]);for(n.push(Zn(Ra,o)+","+Zn(Ra,s)),--i;r>++i;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Yn(n,o,s);return n.join("")}function Qn(t){for(var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];4>++i;)n=t[i%r],s.push(n[0]),a.push(n[1]);for(e=[Zn(Ra,s),",",Zn(Ra,a)],--i;o>++i;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Yn(e,s,a);return e.join("")}function Xn(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],s=t[0][1],a=t[n][0]-o,l=t[n][1]-s,u=-1;n>=++u;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*a),i[1]=e*i[1]+(1-e)*(s+r*l);return qn(t)}function Zn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Yn(t,e,n){t.push("C",Zn(Da,e),",",Zn(Da,n),",",Zn(La,e),",",Zn(La,n),",",Zn(Ra,e),",",Zn(Ra,n))}function Kn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Jn(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=Kn(r,o);n>++e;)i[e]=(s+(s=Kn(r=o,o=t[e+1])))/2;return i[e]=s,i}function ti(t){for(var e,n,i,r,o=[],s=Jn(t),a=-1,l=t.length-1;l>++a;)e=Kn(t[a],t[a+1]),1e-6>Math.abs(e)?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;l>=++a;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function ei(t){return 3>t.length?Ln(t):t[0]+Vn(t,ti(t))}function ni(t,e,n,i){var r,o,s,a,l,u,h;return r=i[t],o=r[0],s=r[1],r=i[e],a=r[0],l=r[1],r=i[n],u=r[0],h=r[1],(h-s)*(a-o)-(l-s)*(u-o)>0}function ii(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ri(t,e,n,i){var r=t[0],o=n[0],s=e[0]-r,a=i[0]-o,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,d=(a*(l-u)-c*(r-o))/(c*s-a*h);return[r+d*s,l+d*h]}function oi(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[ja[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,o=i>0?i:-i,s=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),o>s?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(1e-10>Math.abs(r))return null;var o,s,a=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,h=i.region.r;u.y<h.y||u.y==h.y&&u.x<h.x?(o=t,s=n):(o=e,s=i);var c=a>=s.region.r.x;return c&&"l"===o.side||!c&&"r"===o.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var o=e.y-i.y,s=e.x-i.x,a=0,l=0;if(!r&&0>n.b||r&&n.b>=0?l=a=o>=n.b*s:(l=e.x+e.y*n.b>n.c,0>n.b&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-o*o)<u*o*(1+2*s/u+n.b*n.b),0>n.b&&(l=!l)}}else{var h=n.c-n.a*e.x,c=e.y-h,d=e.x-i.x,p=h-i.y;l=c*c>d*d+p*p}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[ja[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},o={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=o.list,s=r.length;s>i;i++){var a=r[i];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=o.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===o.list.length},nextEvent:function(t){for(var e=0,n=o.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=o.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return o.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,h,c,d,p,f,g,m,v,y,b=n.list.shift();;)if(o.empty()||(s=o.min()),b&&(o.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))a=i.leftBound(b),l=i.right(a),d=i.rightRegion(a),v=r.bisect(d,b),c=i.createHalfEdge(v,"l"),i.insert(a,c),g=r.intersect(a,c),g&&(o.del(a),o.insert(a,g,r.distance(g,b))),a=c,c=i.createHalfEdge(v,"r"),i.insert(a,c),g=r.intersect(c,l),g&&o.insert(c,g,r.distance(g,b)),b=n.list.shift();else{if(o.empty())break;a=o.extractMin(),u=i.left(a),l=i.right(a),h=i.right(l),d=i.leftRegion(a),p=i.rightRegion(l),m=a.vertex,r.endPoint(a.edge,a.side,m),r.endPoint(l.edge,l.side,m),i.del(a),o.del(l),i.del(l),y="l",d.y>p.y&&(f=d,d=p,p=f,y="r"),v=r.bisect(d,p),c=i.createHalfEdge(v,y),i.insert(u,c),r.endPoint(v,ja[y],m),g=r.intersect(u,c),g&&(o.del(u),o.insert(u,g,r.distance(g,d))),g=r.intersect(c,h),g&&o.insert(c,g,r.distance(g,d))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))e(a.edge)}function si(t){return t.x}function ai(t){return t.y}function li(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ui(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),l=e.nodes;l[0]&&ui(t,l[0],n,i,s,a),l[1]&&ui(t,l[1],s,i,r,a),l[2]&&ui(t,l[2],n,a,s,o),l[3]&&ui(t,l[3],s,a,r,o)}}function hi(t,e){t=as.rgb(t),e=as.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+ie(Math.round(n+o*t))+ie(Math.round(i+s*t))+ie(Math.round(r+a*t))}}function ci(t){var e=[t.a,t.b],n=[t.c,t.d],i=pi(e),r=di(e,n),o=pi(fi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Rs,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Rs:0}function di(t,e){return t[0]*e[0]+t[1]*e[1]}function pi(t){var e=Math.sqrt(di(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function gi(t,e){return e-=t=+t,function(n){return t+e*n}}function mi(t,e){var n,i=[],r=[],o=as.transform(t),s=as.transform(e),a=o.translate,l=s.translate,u=o.rotate,h=s.rotate,c=o.skew,d=s.skew,p=o.scale,f=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:gi(a[0],l[0])},{i:3,x:gi(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=h?(u-h>180?h+=360:h-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:gi(u,h)})):h&&i.push(i.pop()+"rotate("+h+")"),c!=d?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:gi(c,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:gi(p[0],f[0])},{i:n-2,x:gi(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(t){for(var e,o=-1;n>++o;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function vi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=wi(n)(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function yi(t,e){var n,i,r,o,s,a=0,l=0,u=[],h=[];for(t+="",e+="",Fa.lastIndex=0,i=0;n=Fa.exec(e);++i)n.index&&u.push(e.substring(a,l=n.index)),h.push({i:u.length,x:n[0]}),u.push(null),a=Fa.lastIndex;for(e.length>a&&u.push(e.substring(a)),i=0,o=h.length;(n=Fa.exec(t))&&o>i;++i)if(s=h[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),r=i+1;o>r;++r)h[r].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),r=i+1;o>r;++r)h[r].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),r=i+1;o>r;++r)h[r].i--;h.splice(i,1),o--,i--}else s.x=gi(parseFloat(n[0]),parseFloat(s.x));for(;o>i;)s=h.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),o--;return 1===u.length?null==u[0]?(s=h[0].x,function(t){return s(t)+""}):function(){return e}:function(t){for(i=0;o>i;++i)u[(s=h[i]).i]=s.x(t);return u.join("")}}function bi(t,e){for(var n,i=as.interpolators.length;--i>=0&&!(n=as.interpolators[i](t,e)););return n}function wi(t){return"transform"==t?mi:bi}function xi(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(bi(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}}function Si(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ti(t){return function(e){return 1-t(1-e)}}function _i(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ei(t){return t*t}function Mi(t){return t*t*t}function Ci(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function ki(t){return function(e){return Math.pow(e,t)}}function Hi(t){return 1-Math.cos(t*As/2)}function Ni(t){return Math.pow(2,10*(t-1))}function Pi(t){return 1-Math.sqrt(1-t*t)}function zi(t,e){var n;return 2>arguments.length&&(e=.45),arguments.length?n=e/(2*As)*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*As/e)}}function Ii(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Oi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ai(t,e){t=as.hcl(t),e=as.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,s=e.c-i,a=e.l-r;
return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return G(n+o*t,i+s*t,r+a*t)+""}}function Di(t,e){t=as.hsl(t),e=as.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return R(n+o*t,i+s*t,r+a*t)+""}}function Li(t,e){t=as.lab(t),e=as.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,s=e.a-i,a=e.b-r;return function(t){return Z(n+o*t,i+s*t,r+a*t)+""}}function Ri(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ji(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Bi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Fi(t){for(var e=t.source,n=t.target,i=Ui(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Wi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ui(t,e){if(t===e)return t;for(var n=Wi(t),i=Wi(e),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function Vi(t){t.fixed|=2}function $i(t){t.fixed&=-7}function qi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Gi(t){t.fixed&=-5}function Qi(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,l=-1;a>++l;)o=s[l],null!=o&&(Qi(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Xi(t,e){return as.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ji,t}function Zi(t){return t.children}function Yi(t){return t.value}function Ki(t,e){return e.value-t.value}function Ji(t){return as.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function tr(t){return t.x}function er(t){return t.y}function nr(t,e,n){t.y0=e,t.y=n}function ir(t){return as.range(t.length)}function rr(t){for(var e=-1,n=t[0].length,i=[];n>++e;)i[e]=0;return i}function or(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function sr(t){return t.reduce(ar,0)}function ar(t,e){return t+e[1]}function lr(t,e){return ur(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ur(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];e>=++n;)o[n]=r*n+i;return o}function hr(t){return[as.min(t),as.max(t)]}function cr(t,e){return t.parent==e.parent?1:2}function dr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function pr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function fr(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,o=-1;r>++o;)e(i=fr(n[o],e),t)>0&&(t=i);return t}function gr(t,e){return t.x-e.x}function mr(t,e){return e.x-t.x}function vr(t,e){return t.depth-e.depth}function yr(t,e){function n(t,i){var r=t.children;if(r&&(s=r.length))for(var o,s,a=null,l=-1;s>++l;)o=r[l],n(o,a),a=o;e(t,i)}n(t,null)}function br(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function wr(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function xr(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Sr(t,e){return t.value-e.value}function Tr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function _r(t,e){t._pack_next=e,e._pack_prev=t}function Er(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function Mr(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),d=Math.min(t.y-t.r,d),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,i,r,o,s,a,l,u,h=1/0,c=-1/0,d=1/0,p=-1/0;if(n.forEach(Cr),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(o=n[2],Nr(i,r,o),e(o),Tr(i,o),i._pack_prev=o,Tr(o,r),r=i._pack_next,s=3;u>s;s++){Nr(i,r,o=n[s]);var f=0,g=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,g++)if(Er(a,o)){f=1;break}if(1==f)for(l=i._pack_prev;l!==a._pack_prev&&!Er(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?_r(i,r=a):_r(i=l,r),s--):(Tr(i,o),r=o,e(o))}var v=(h+c)/2,y=(d+p)/2,b=0;for(s=0;u>s;s++)o=n[s],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(kr)}}function Cr(t){t._pack_next=t._pack_prev=t}function kr(t){delete t._pack_next,delete t._pack_prev}function Hr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,s=r.length;s>++o;)Hr(r[o],e,n,i)}function Nr(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=r*r+o*o;s*=s,i*=i;var l=.5+(i-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function Pr(t){return 1+as.max(t,function(t){return t.y})}function zr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ir(t){var e=t.children;return e&&e.length?Ir(e[0]):t}function Or(t){var e,n=t.children;return n&&(e=n.length)?Or(n[e-1]):t}function Ar(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Dr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Lr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Rr(t){return t.rangeExtent?t.rangeExtent():Lr(t.range())}function jr(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Br(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),(e=e(s-o))&&(t[i]=e.floor(o),t[r]=e.ceil(s)),t}function Fr(t,e,n,i){var r=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());a>=++s;)r.push(n(t[s-1],t[s])),o.push(i(e[s-1],e[s]));return function(e){var n=as.bisect(t,e,1,a)-1;return o[n](r[n](e))}}function Wr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Fr:jr,l=i?Bi:ji;return s=r(t,e,l,n),a=r(e,t,l,bi),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Ri)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return qr(t,e)},o.tickFormat=function(e,n){return Gr(t,e,n)},o.nice=function(){return Br(t,Vr),r()},o.copy=function(){return Wr(t,e,n,i)},r()}function Ur(t,e){return as.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Vr(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function $r(t,e){var n=Lr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function qr(t,e){return as.range.apply(as,$r(t,e))}function Gr(t,e,n){var i=-Math.floor(Math.log($r(t,e)[2])/Math.LN10+.01);return as.format(n?n.replace(na,function(t,e,n,r,o,s,a,l,u,h){return[e,n,r,o,s,a,l,u||"."+(i-2*("%"===h)),h].join("")}):",."+i+"f")}function Qr(t,e,n,i,r){function o(e){return t(n(e))}function s(){return n===Xr?{floor:a,ceil:l}:{floor:function(t){return-l(-t)},ceil:function(t){return-a(-t)}}}function a(t){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}function l(t){return Math.pow(e,Math.ceil(Math.log(t)/Math.log(e)))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(0>e[0]?(n=Yr,i=Kr):(n=Xr,i=Zr),t.domain((r=e.map(Number)).map(n)),o):r},o.base=function(t){return arguments.length?(e=+t,o):e},o.nice=function(){return t.domain(Br(r,s).map(n)),o},o.ticks=function(){var r=Lr(t.domain()),o=[];if(r.every(isFinite)){var s=Math.log(e),a=Math.floor(r[0]/s),l=Math.ceil(r[1]/s),u=i(r[0]),h=i(r[1]),c=e%1?2:e;if(n===Yr)for(o.push(-Math.pow(e,-a));l>a++;)for(var d=c-1;d>0;d--)o.push(-Math.pow(e,-a)*d);else{for(;l>a;a++)for(var d=1;c>d;d++)o.push(Math.pow(e,a)*d);o.push(Math.pow(e,a))}for(a=0;u>o[a];a++);for(l=o.length;o[l-1]>h;l--);o=o.slice(a,l)}return o},o.tickFormat=function(t,r){if(2>arguments.length&&(r=Za),!arguments.length)return r;var s,a=Math.log(e),l=Math.max(.1,t/o.ticks().length),u=n===Yr?(s=-1e-12,Math.floor):(s=1e-12,Math.ceil);return function(t){return l>=t/i(a*u(n(t)/a+s))?r(t):""}},o.copy=function(){return Qr(t.copy(),e,n,i,r)},Ur(o,t)}function Xr(t){return Math.log(0>t?0:t)}function Zr(t){return Math.exp(t)}function Yr(t){return-Math.log(t>0?0:-t)}function Kr(t){return-Math.exp(-t)}function Jr(t,e,n){function i(e){return t(r(e))}var r=to(e),o=to(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return qr(n,t)},i.tickFormat=function(t,e){return Gr(n,t,e)},i.nice=function(){return i.domain(Br(n,Vr))},i.exponent=function(s){return arguments.length?(r=to(e=s),o=to(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return Jr(t.copy(),e,n)},Ur(i,t)}function to(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function eo(t,e){function n(e){return s[((o.get(e)||o.set(e,t.push(e)))-1)%s.length]}function i(e,n){return as.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(i){if(!arguments.length)return t;t=[],o=new r;for(var s,a=-1,l=i.length;l>++a;)o.has(s=i[a])||o.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(r,o){2>arguments.length&&(o=0);var l=r[0],u=r[1],h=(u-l)/(Math.max(1,t.length-1)+o);return s=i(2>t.length?(l+u)/2:l+h*o/2,h),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,l){2>arguments.length&&(o=0),3>arguments.length&&(l=o);var u=r[1]<r[0],h=r[u-0],c=r[1-u],d=(c-h)/(t.length-o+2*l);return s=i(h+d*l,d),u&&s.reverse(),a=d*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){2>arguments.length&&(o=0),3>arguments.length&&(l=o);var u=r[1]<r[0],h=r[u-0],c=r[1-u],d=Math.floor((c-h)/(t.length-o+2*l)),p=c-h-(t.length-o)*d;return s=i(h+Math.round(p/2),d),u&&s.reverse(),a=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Lr(e.a[0])},n.copy=function(){return eo(t,e)},n.domain(t)}function no(t,e){function n(){var n=0,o=e.length;for(r=[];o>++n;)r[n-1]=as.quantile(t,n/o);return i}function i(t){return isNaN(t=+t)?0/0:e[as.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(as.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.copy=function(){return no(t,e)},n()}function io(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.copy=function(){return io(t,e,n)},r()}function ro(t,e){function n(n){return e[as.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ro(t,e)},n}function oo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return qr(t,e)},e.tickFormat=function(e,n){return Gr(t,e,n)},e.copy=function(){return oo(t)},e}function so(t){return t.innerRadius}function ao(t){return t.outerRadius}function lo(t){return t.startAngle}function uo(t){return t.endAngle}function ho(t){for(var e,n,i,r=-1,o=t.length;o>++r;)e=t[r],n=e[0],i=e[1]+el,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function co(t){function e(e){function l(){g.push("M",a(t(v),c),h,u(t(m.reverse()),c),"Z")}for(var d,p,f,g=[],m=[],v=[],y=-1,b=e.length,w=ue(n),x=ue(r),S=n===i?function(){return p}:ue(i),T=r===o?function(){return f}:ue(o);b>++y;)s.call(this,d=e[y],y)?(m.push([p=+w.call(this,d,y),f=+x.call(this,d,y)]),v.push([+S.call(this,d,y),+T.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=An,i=An,r=0,o=Dn,s=Le,a=Ln,l=a.key,u=a,h="L",c=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?a=t:(a=Aa.get(t)||Ln).key,u=a.reverse||a,h=a.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function po(t){return t.radius}function fo(t){return[t.x,t.y]}function go(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+el;return[n*Math.cos(i),n*Math.sin(i)]}}function mo(){return 64}function vo(){return"circle"}function yo(t){var e=Math.sqrt(t/As);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function bo(t,e){return bs(t,al),t.id=e,t}function wo(t,e,n,i){var r=t.id;return I(t,"function"==typeof n?function(t,o,s){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function xo(t){return null==t&&(t=""),function(){this.textContent=t}}function So(t,e,n,i){var o=t.__transition__||(t.__transition__={active:0,count:0}),s=o[n];if(!s){var a=i.time;return s=o[n]={tween:new r,event:as.dispatch("start","end"),time:a,ease:i.ease,delay:i.delay,duration:i.duration},++o.count,as.timer(function(i){function r(i){return o.active>n?u():(o.active=n,d.start.call(t,h,e),s.tween.forEach(function(n,i){(i=i.call(t,h,e))&&g.push(i)}),l(i)||as.timer(l,0,a),1)}function l(i){if(o.active!==n)return u();for(var r=(i-p)/f,s=c(r),a=g.length;a>0;)g[--a].call(t,s);return r>=1?(u(),d.end.call(t,h,e),1):void 0}function u(){return--o.count?delete o[n]:delete t.__transition__,1}var h=t.__data__,c=s.ease,d=s.event,p=s.delay,f=s.duration,g=[];return i>=p?r(i):as.timer(r,p,a),1},0,a),s}}function To(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function _o(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Eo(t,e,n){if(i=[],n&&e.length>1){for(var i,r,o,s=Lr(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;l>++a;)for(r=n;--r>0;)(o=+e[a]-r*u)>=s[0]&&i.push(o);for(--a,r=0;n>++r&&(o=+e[a]+r*u)<s[1];)i.push(o)}return i}function Mo(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Co(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new fl(n-1)),1),n}function o(t,n){return e(t=new fl(+t),n),t}function s(t,i,o){var s=r(t),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{fl=Mo;var i=new Mo;return i._=t,s(i,e,n)}finally{fl=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=s;var l=t.utc=ko(t);return l.floor=l,l.round=ko(i),l.ceil=ko(r),l.offset=ko(o),l.range=a,t}function ko(t){return function(e,n){try{fl=Mo;var i=new Mo;return i._=e,t(i,n)._}finally{fl=Date}}}function Ho(t,e,n,i){for(var r,o,s=0,a=e.length,l=n.length;a>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37===r){if(o=zl[e.charAt(s++)],!o||0>(i=o(t,n,i)))return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function No(t){return RegExp("^(?:"+t.map(as.requote).join("|")+")","i")}function Po(t){for(var e=new r,n=-1,i=t.length;i>++n;)e.set(t[n].toLowerCase(),n);return e}function zo(t,e,n){t+="";var i=t.length;return n>i?Array(n-i+1).join(e)+t:t}function Io(t,e,n){El.lastIndex=0;var i=El.exec(e.substring(n));return i?n+=i[0].length:-1}function Oo(t,e,n){_l.lastIndex=0;var i=_l.exec(e.substring(n));return i?n+=i[0].length:-1}function Ao(t,e,n){kl.lastIndex=0;var i=kl.exec(e.substring(n));return i?(t.m=Hl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Do(t,e,n){Ml.lastIndex=0;var i=Ml.exec(e.substring(n));return i?(t.m=Cl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Lo(t,e,n){return Ho(t,""+Pl.c,e,n)}function Ro(t,e,n){return Ho(t,""+Pl.x,e,n)}function jo(t,e,n){return Ho(t,""+Pl.X,e,n)}function Bo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+=i[0].length):-1}function Fo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.y=Wo(+i[0]),n+=i[0].length):-1}function Wo(t){return t+(t>68?1900:2e3)}function Uo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+=i[0].length):-1}function Vo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+=i[0].length):-1}function $o(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+=i[0].length):-1}function qo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+=i[0].length):-1}function Go(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+=i[0].length):-1}function Qo(t,e,n){Il.lastIndex=0;var i=Il.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+=i[0].length):-1}function Xo(t,e,n){var i=Ol.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Zo(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+zo(i,"0",2)+zo(r,"0",2)}function Yo(t){return t.toISOString()}function Ko(t,e,n){function i(e){return t(e)}return i.invert=function(e){return Jo(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Jo)},i.nice=function(t){return i.domain(Br(i.domain(),function(){return t}))},i.ticks=function(n,r){var o=Lr(i.domain());if("function"!=typeof n){var s=o[1]-o[0],a=s/n,l=as.bisect(Dl,a);if(l==Dl.length)return e.year(o,n);if(!l)return t.ticks(n).map(Jo);Math.log(a/Dl[l-1])<Math.log(Dl[l]/a)&&--l,n=e[l],r=n[1],n=n[0].range}return n(o[0],new Date(+o[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return Ko(t.copy(),e,n)},Ur(i,t)}function Jo(t){return new Date(t)}function ts(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function es(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function ns(t){var e=t.getFullYear(),n=es(e),i=es(e+1);return e+(t-n)/(i-n)}function is(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function rs(t){var e=t.getUTCFullYear(),n=is(e),i=is(e+1);return e+(t-n)/(i-n)}function os(t){return JSON.parse(t.responseText)}function ss(t){var e=ls.createRange();return e.selectNode(ls.body),e.createContextualFragment(t.responseText)}var as={version:"3.1.10"};Date.now||(Date.now=function(){return+new Date});var ls=document,us=window;try{ls.createElement("div").style.setProperty("opacity",0,"")}catch(hs){var cs=us.CSSStyleDeclaration.prototype,ds=cs.setProperty;cs.setProperty=function(t,e,n){ds.call(this,t,e+"",n)}}as.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},as.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},as.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r&&(null==(n=t[r])||n!=n);)n=void 0;for(;o>++r;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;o>++r&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;o>++r;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},as.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r&&(null==(n=t[r])||n!=n);)n=void 0;for(;o>++r;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;o>++r&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;o>++r;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},as.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;s>++o&&(null==(n=r=t[o])||n!=n);)n=r=void 0;for(;s>++o;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;s>++o&&(null==(n=r=e.call(t,t[o],o))||n!=n);)n=void 0;for(;s>++o;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},as.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;r>++o;)isNaN(n=+t[o])||(i+=n);else for(;r>++o;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},as.mean=function(e,n){var i,r=e.length,o=0,s=-1,a=0;if(1===arguments.length)for(;r>++s;)t(i=e[s])&&(o+=(i-o)/++a);else for(;r>++s;)t(i=n.call(e,e[s],s))&&(o+=(i-o)/++a);return a?o:void 0},as.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},as.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?as.quantile(e.sort(as.ascending),.5):void 0},as.bisector=function(t){return{left:function(e,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=e.length);r>i;){var o=i+r>>>1;n>t.call(e,e[o],o)?i=o+1:r=o}return i},right:function(e,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=e.length);r>i;){var o=i+r>>>1;t.call(e,e[o],o)>n?r=o:i=o+1}return i}}};var ps=as.bisector(function(t){return t});as.bisectLeft=ps.left,as.bisect=as.bisectRight=ps.right,as.shuffle=function(t){for(var e,n,i=t.length;i;)n=0|Math.random()*i--,e=t[i],t[i]=t[n],t[n]=e;return t},as.permute=function(t,e){for(var n=[],i=-1,r=e.length;r>++i;)n[i]=t[e[i]];return n},as.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=as.min(arguments,e),i=Array(n);n>++t;)for(var r,o=-1,s=i[t]=Array(r);r>++o;)s[o]=arguments[o][t];return i},as.transpose=function(t){return as.zip.apply(as,t)},as.keys=function(t){var e=[];for(var n in t)e.push(n);return e},as.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},as.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},as.merge=function(t){return Array.prototype.concat.apply([],t)},as.range=function(t,e,i){if(3>arguments.length&&(i=1,2>arguments.length&&(e=t,t=0)),1/0===(e-t)/i)throw Error("infinite range");var r,o=[],s=n(Math.abs(i)),a=-1;if(t*=s,e*=s,i*=s,0>i)for(;(r=t+i*++a)>e;)o.push(r/s);else for(;e>(r=t+i*++a);)o.push(r/s);return o},as.map=function(t){var e=new r;for(var n in t)e.set(n,t[n]);return e},i(r,{has:function(t){return fs+t in this},get:function(t){return this[fs+t]},set:function(t,e){return this[fs+t]=e},remove:function(t){return t=fs+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1),this[e])}});var fs="\0",gs=fs.charCodeAt(0);as.nest=function(){function t(e,a,l){if(l>=s.length)return i?i.call(o,a):n?a.sort(n):a;for(var u,h,c,d,p=-1,f=a.length,g=s[l++],m=new r;f>++p;)(d=m.get(u=g(h=a[p])))?d.push(h):m.set(u,[h]);return e?(h=e(),c=function(n,i){h.set(n,t(e,i,l))}):(h={},c=function(n,i){h[n]=t(e,i,l)}),m.forEach(c),h}function e(t,n){if(n>=s.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,o={},s=[],a=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t(as.map,n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return i=t,o},o},as.set=function(t){var e=new o;if(t)for(var n=0;t.length>n;n++)e.add(t[n]);return e},i(o,{has:function(t){return fs+t in this},add:function(t){return this[fs+t]=!0,t},remove:function(t){return t=fs+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1))}}),as.behavior={},as.rebind=function(t,e){for(var n,i=1,r=arguments.length;r>++i;)t[n=arguments[i]]=s(t,e,e[n]);return t},as.dispatch=function(){for(var t=new a,e=-1,n=arguments.length;n>++e;)t[arguments[e]]=l(t);return t},a.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return 2>arguments.length?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},as.event=null,as.mouse=function(t){return p(t,h())};var ms=/WebKit/.test(us.navigator.userAgent)?-1:0,vs=g;try{vs(ls.documentElement.childNodes)[0].nodeType}catch(ys){vs=f}var bs=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};as.touches=function(t,e){return 2>arguments.length&&(e=h().touches),e?vs(e).map(function(e){var n=p(t,e);return n.identifier=e.identifier,n}):[]},as.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=s.parentNode;return null!=h?as.touches(t).filter(function(t){return t.identifier===h})[0]:as.mouse(t)}function e(){if(!s.parentNode)return r();var e=t(),n=e[0]-d[0],i=e[1]-d[1];p|=n|i,d=e,u(),a({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:n,dy:i})}function r(){a({type:"dragend"}),p&&(u(),as.event.target===l&&c(f,"click")),f.on(null!=h?"touchmove.drag-"+h:"mousemove.drag",null).on(null!=h?"touchend.drag-"+h:"mouseup.drag",null)}var o,s=this,a=n.of(s,arguments),l=as.event.target,h=as.event.touches?as.event.changedTouches[0].identifier:null,d=t(),p=0,f=as.select(us).on(null!=h?"touchmove.drag-"+h:"mousemove.drag",e).on(null!=h?"touchend.drag-"+h:"mouseup.drag",r,!0);i?(o=i.apply(s,arguments),o=[o.x-d[0],o.y-d[1]]):o=[0,0],null==h&&u(),a({type:"dragstart"})}var n=d(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},as.rebind(t,n,"on")};var ws=function(t,e){return e.querySelector(t)},xs=function(t,e){return e.querySelectorAll(t)},Ss=ls.documentElement,Ts=Ss.matchesSelector||Ss.webkitMatchesSelector||Ss.mozMatchesSelector||Ss.msMatchesSelector||Ss.oMatchesSelector,_s=function(t,e){return Ts.call(t,e)};"function"==typeof Sizzle&&(ws=function(t,e){return Sizzle(t,e)[0]||null},xs=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},_s=Sizzle.matchesSelector),as.selection=function(){return Ns};var Es=as.selection.prototype=[];Es.select=function(t){var e,n,i,r,o=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;u>++l;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return m(o)},Es.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=y(t));for(var r=-1,o=this.length;o>++r;)for(var s=this[r],a=-1,l=s.length;l>++a;)(n=s[a])&&(i.push(e=vs(t.call(n,n.__data__,a))),e.parentNode=n);return m(i)};var Ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};as.ns={prefix:Ms,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Ms.hasOwnProperty(n)?{space:Ms[n],local:t}:t}},Es.attr=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node();return t=as.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},as.requote=function(t){return t.replace(Cs,"\\$&")};var Cs=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Es.classed=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=n.classList){for(;i>++r;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");i>++r;)if(!x(t[r]).test(e))return!1;return!0}for(e in t)this.each(S(e,t[e]));return this}return this.each(S(t,e))},Es.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(_(n,t[n],e));return this}if(2>i)return us.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(_(t,e,n))},Es.property=function(t,e){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Es.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Es.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Es.append=function(t){function e(){return this.appendChild(ls.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(ls.createElementNS(t.space,t.local))}return t=as.ns.qualify(t),this.select(t.local?n:e)},Es.insert=function(t,e){function n(n,i){return this.insertBefore(ls.createElementNS(this.namespaceURI,t),e.call(this,n,i))}function i(n,i){return this.insertBefore(ls.createElementNS(t.space,t.local),e.call(this,n,i))}return t=as.ns.qualify(t),"function"!=typeof e&&(e=v(e)),this.select(t.local?i:n)},Es.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Es.data=function(t,e){function n(t,n){var i,o,s,a=t.length,c=n.length,d=Math.min(a,c),p=Array(c),f=Array(c),g=Array(a);if(e){var m,v=new r,y=new r,b=[];for(i=-1;a>++i;)m=e.call(o=t[i],o.__data__,i),v.has(m)?g[i]=o:v.set(m,o),b.push(m);for(i=-1;c>++i;)m=e.call(n,s=n[i],i),(o=v.get(m))?(p[i]=o,o.__data__=s):y.has(m)||(f[i]=M(s)),y.set(m,s),v.remove(m);for(i=-1;a>++i;)v.has(b[i])&&(g[i]=t[i])}else{for(i=-1;d>++i;)o=t[i],s=n[i],o?(o.__data__=s,p[i]=o):f[i]=M(s);for(;c>i;++i)f[i]=M(n[i]);for(;a>i;++i)g[i]=t[i]}f.update=p,f.parentNode=p.parentNode=g.parentNode=t.parentNode,l.push(f),u.push(p),h.push(g)}var i,o,s=-1,a=this.length;if(!arguments.length){for(t=Array(a=(i=this[0]).length);a>++s;)(o=i[s])&&(t[s]=o.__data__);return t}var l=O([]),u=m([]),h=m([]);if("function"==typeof t)for(;a>++s;)n(i=this[s],t.call(i,i.parentNode.__data__,s));else for(;a>++s;)n(i=this[s],t);return u.enter=function(){return l},u.exit=function(){return h},u},Es.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Es.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=C(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return m(r)},Es.order=function(){for(var t=-1,e=this.length;e>++t;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Es.sort=function(t){t=k.apply(this,arguments);for(var e=-1,n=this.length;n>++e;)this[e].sort(t);return this.order()},Es.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(N(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(N(t,e,n))};var ks=as.map({mouseenter:"mouseover",mouseleave:"mouseout"});ks.forEach(function(t){"on"+t in ls&&ks.remove(t)}),Es.each=function(t){return I(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Es.call=function(t){var e=vs(arguments);return t.apply(e[0]=this,e),this},Es.empty=function(){return!this.node()},Es.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null};var Hs=[];as.selection.enter=O,as.selection.enter.prototype=Hs,Hs.append=Es.append,Hs.insert=Es.insert,Hs.empty=Es.empty,Hs.node=Es.node,Hs.select=function(t){for(var e,n,i,r,o,s=[],a=-1,l=this.length;l>++a;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;h>++u;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u)),n.__data__=o.__data__):e.push(null)}return m(s)},Es.transition=function(){var t,e,n=rl||++ll,i=[],r=Object.create(ul);r.time=Date.now();
for(var o=-1,s=this.length;s>++o;){i.push(t=[]);for(var a=this[o],l=-1,u=a.length;u>++l;)(e=a[l])&&So(e,l,n,r),t.push(e)}return bo(i,n)},as.select=function(t){var e=["string"==typeof t?ws(t,ls):t];return e.parentNode=Ss,m([e])},as.selectAll=function(t){var e=vs("string"==typeof t?xs(t,ls):t);return e.parentNode=Ss,m([e])};var Ns=as.select(Ss);as.behavior.zoom=function(){function t(){this.on("mousedown.zoom",a).on("mousemove.zoom",h).on(Is+".zoom",l).on("dblclick.zoom",p).on("touchstart.zoom",f).on("touchmove.zoom",g).on("touchend.zoom",f)}function e(t){return[(t[0]-T[0])/_,(t[1]-T[1])/_]}function n(t){return[t[0]*_+T[0],t[1]*_+T[1]]}function i(t){_=Math.max(E[0],Math.min(E[1],t))}function r(t,e){e=n(e),T[0]+=t[0]-e[0],T[1]+=t[1]-e[1]}function o(){b&&b.domain(y.range().map(function(t){return(t-T[0])/_}).map(y.invert)),x&&x.domain(w.range().map(function(t){return(t-T[1])/_}).map(w.invert))}function s(t){o(),as.event.preventDefault(),t({type:"zoom",scale:_,translate:T})}function a(){function t(){l=1,r(as.mouse(i),d),s(o)}function n(){l&&u(),h.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&as.event.target===a&&c(h,"click.zoom")}var i=this,o=M.of(i,arguments),a=as.event.target,l=0,h=as.select(us).on("mousemove.zoom",t).on("mouseup.zoom",n),d=e(as.mouse(i));us.focus(),u()}function l(){m||(m=e(as.mouse(this))),i(Math.pow(2,.002*Ps())*_),r(as.mouse(this),m),s(M.of(this,arguments))}function h(){m=null}function p(){var t=as.mouse(this),n=e(t),o=Math.log(_)/Math.LN2;i(Math.pow(2,as.event.shiftKey?Math.ceil(o)-1:Math.floor(o)+1)),r(t,n),s(M.of(this,arguments))}function f(){var t=as.touches(this),n=Date.now();if(v=_,m={},t.forEach(function(t){m[t.identifier]=e(t)}),u(),1===t.length){if(500>n-S){var o=t[0],a=e(t[0]);i(2*_),r(o,a),s(M.of(this,arguments))}S=n}}function g(){var t=as.touches(this),e=t[0],n=m[e.identifier];if(o=t[1]){var o,a=m[o.identifier];e=[(e[0]+o[0])/2,(e[1]+o[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(as.event.scale*v)}r(e,n),S=null,s(M.of(this,arguments))}var m,v,y,b,w,x,S,T=[0,0],_=1,E=zs,M=d(t,"zoom");return t.translate=function(e){return arguments.length?(T=e.map(Number),o(),t):T},t.scale=function(e){return arguments.length?(_=+e,o(),t):_},t.scaleExtent=function(e){return arguments.length?(E=null==e?zs:e.map(Number),t):E},t.x=function(e){return arguments.length?(b=e,y=e.copy(),T=[0,0],_=1,t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),T=[0,0],_=1,t):x},as.rebind(t,M,"on")};var Ps,zs=[0,1/0],Is="onwheel"in ls?(Ps=function(){return-as.event.deltaY*(as.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ls?(Ps=function(){return as.event.wheelDelta},"mousewheel"):(Ps=function(){return-as.event.detail},"MozMousePixelScroll");A.prototype.toString=function(){return this.rgb()+""},as.hsl=function(t,e,n){return 1===arguments.length?t instanceof L?D(t.h,t.s,t.l):re(""+t,oe,D):D(+t,+e,+n)};var Os=L.prototype=new A;Os.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),D(this.h,this.s,this.l/t)},Os.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),D(this.h,this.s,t*this.l)},Os.rgb=function(){return R(this.h,this.s,this.l)};var As=Math.PI,Ds=1e-6,Ls=As/180,Rs=180/As;as.hcl=function(t,e,n){return 1===arguments.length?t instanceof q?$(t.h,t.c,t.l):t instanceof X?Y(t.l,t.a,t.b):Y((t=se((t=as.rgb(t)).r,t.g,t.b)).l,t.a,t.b):$(+t,+e,+n)};var js=q.prototype=new A;js.brighter=function(t){return $(this.h,this.c,Math.min(100,this.l+Bs*(arguments.length?t:1)))},js.darker=function(t){return $(this.h,this.c,Math.max(0,this.l-Bs*(arguments.length?t:1)))},js.rgb=function(){return G(this.h,this.c,this.l).rgb()},as.lab=function(t,e,n){return 1===arguments.length?t instanceof X?Q(t.l,t.a,t.b):t instanceof q?G(t.l,t.c,t.h):se((t=as.rgb(t)).r,t.g,t.b):Q(+t,+e,+n)};var Bs=18,Fs=.95047,Ws=1,Us=1.08883,Vs=X.prototype=new A;Vs.brighter=function(t){return Q(Math.min(100,this.l+Bs*(arguments.length?t:1)),this.a,this.b)},Vs.darker=function(t){return Q(Math.max(0,this.l-Bs*(arguments.length?t:1)),this.a,this.b)},Vs.rgb=function(){return Z(this.l,this.a,this.b)},as.rgb=function(t,e,n){return 1===arguments.length?t instanceof ne?ee(t.r,t.g,t.b):re(""+t,ee,R):ee(~~t,~~e,~~n)};var $s=ne.prototype=new A;$s.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),ee(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):ee(r,r,r)},$s.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ee(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},$s.hsl=function(){return oe(this.r,this.g,this.b)},$s.toString=function(){return"#"+ie(this.r)+ie(this.g)+ie(this.b)};var qs=as.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});qs.forEach(function(t,e){qs.set(t,re(e,ee,R))}),as.functor=ue,as.xhr=ce(he),as.csv=fe(",","text/csv"),as.tsv=fe("	","text/tab-separated-values");var Gs,Qs,Xs,Zs;as.timer=function(t,e,n){if(3>arguments.length){if(2>arguments.length)e=0;else if(!isFinite(e))return;n=Date.now()}var i=n+e,r={callback:t,time:i,next:null};Qs?Qs.next=r:Gs=r,Qs=r,Xs||(Zs=clearTimeout(Zs),Xs=1,Ys(ge))},as.timer.flush=function(){me(),ve()};var Ys=us.requestAnimationFrame||us.webkitRequestAnimationFrame||us.mozRequestAnimationFrame||us.oRequestAnimationFrame||us.msRequestAnimationFrame||function(t){setTimeout(t,17)},Ks=".",Js=",",ta=[3,3],ea=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(ye);as.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=as.round(t,be(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ea[8+n/3]},as.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},as.format=function(t){var e=na.exec(t),n=e[1]||" ",i=e[2]||">",r=e[3]||"",o=e[4]||"",s=e[5],a=+e[6],l=e[7],u=e[8],h=e[9],c=1,d="",p=!1;switch(u&&(u=+u.substring(1)),(s||"0"===n&&"="===i)&&(s=n="0",i="=",l&&(a-=Math.floor((a-1)/4))),h){case"n":l=!0,h="g";break;case"%":c=100,d="%",h="f";break;case"p":c=100,d="%",h="r";break;case"b":case"o":case"x":case"X":o&&(o="0"+h.toLowerCase());case"c":case"d":p=!0,u=0;break;case"s":c=-1,h="r"}"#"===o&&(o=""),"r"!=h||u||(h="g"),null!=u&&("g"==h?u=Math.max(1,Math.min(21,u)):("e"==h||"f"==h)&&(u=Math.max(0,Math.min(20,u)))),h=ia.get(h)||we;var f=s&&l;return function(t){if(p&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>c){var g=as.formatPrefix(t,u);t=g.scale(t),d=g.symbol}else t*=c;t=h(t,u),!s&&l&&(t=ra(t));var m=o.length+t.length+(f?0:e.length),v=a>m?Array(m=a-m+1).join(n):"";return f&&(t=ra(v+t)),Ks&&t.replace(".",Ks),e+=o,("<"===i?e+t+v:">"===i?v+e+t:"^"===i?v.substring(0,m>>=1)+e+t+v.substring(m):e+(f?t:v+t))+d}};var na=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ia=as.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=as.round(t,be(t,e))).toFixed(Math.max(0,Math.min(20,be(t*(1+1e-15),e))))}}),ra=he;if(ta){var oa=ta.length;ra=function(t){for(var e=t.lastIndexOf("."),n=e>=0?"."+t.substring(e+1):(e=t.length,""),i=[],r=0,o=ta[0];e>0&&o>0;)i.push(t.substring(e-=o,e+o)),o=ta[r=(r+1)%oa];return i.reverse().join(Js||"")+n}}as.geo={},as.geo.stream=function(t,e){t&&sa.hasOwnProperty(t.type)?sa[t.type](t,e):xe(t,e)};var sa={Feature:function(t,e){xe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;r>++i;)xe(n[i].geometry,e)}},aa={Sphere:function(t,e){e.sphere()},Point:function(t,e){var n=t.coordinates;e.point(n[0],n[1])},MultiPoint:function(t,e){for(var n,i=t.coordinates,r=-1,o=i.length;o>++r;)n=i[r],e.point(n[0],n[1])},LineString:function(t,e){Se(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;r>++i;)Se(n[i],e,0)},Polygon:function(t,e){Te(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;r>++i;)Te(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;r>++i;)xe(n[i],e)}};as.geo.area=function(t){return la=0,as.geo.stream(t,ha),la};var la,ua,ha={sphere:function(){la+=4*As},point:H,lineStart:H,lineEnd:H,polygonStart:function(){ua=0,ha.lineStart=_e},polygonEnd:function(){var t=2*ua;la+=0>t?4*As+t:t,ha.lineStart=ha.lineEnd=ha.point=H}};as.geo.bounds=function(){function t(t,e){b.push(w=[h=t,d=t]),c>e&&(c=e),e>p&&(p=e)}function e(e,n){var i=Ee([e*Ls,n*Ls]);if(v){var r=Ce(v,i),o=[r[1],-r[0],0],s=Ce(o,r);Ne(s),s=Pe(s);var l=e-f,u=l>0?1:-1,g=s[0]*Rs*u,m=Math.abs(l)>180;if(m^(g>u*f&&u*e>g)){var y=s[1]*Rs;y>p&&(p=y)}else if(g=(g+360)%360-180,m^(g>u*f&&u*e>g)){var y=-s[1]*Rs;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?f>e?a(h,e)>a(h,d)&&(d=e):a(e,d)>a(h,d)&&(h=e):d>=h?(h>e&&(h=e),e>d&&(d=e)):e>f?a(h,e)>a(h,d)&&(d=e):a(e,d)>a(h,d)&&(h=e)}else t(e,n);v=i,f=e}function n(){x.point=e}function i(){w[0]=h,w[1]=d,x.point=t,v=null}function r(t,n){if(v){var i=t-f;y+=Math.abs(i)>180?i+(i>0?360:-360):i}else g=t,m=n;ha.point(t,n),e(t,n)}function o(){ha.lineStart()}function s(){r(g,m),ha.lineEnd(),Math.abs(y)>Ds&&(h=-(d=180)),w[0]=h,w[1]=d,v=null}function a(t,e){return 0>(e-=t)?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?t>=e[0]&&e[1]>=t:e[0]>t||t>e[1]}var h,c,d,p,f,g,m,v,y,b,w,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=o,x.lineEnd=s,y=0,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,0>ua?(h=-(d=180),c=-(p=90)):y>Ds?p=90:-Ds>y&&(c=-90),w[0]=h,w[1]=d}};return function(t){p=d=-(h=c=1/0),b=[],as.geo.stream(t,x),b.sort(l);for(var e,n=1,i=b.length,r=b[0],o=[r];i>n;++n)e=b[n],u(e[0],r)||u(e[1],r)?(a(r[0],e[1])>a(r[0],r[1])&&(r[1]=e[1]),a(e[0],r[1])>a(r[0],r[1])&&(r[0]=e[0])):o.push(r=e);for(var s,e,f=-1/0,i=o.length-1,n=0,r=o[i];i>=n;r=e,++n)e=o[n],(s=a(r[1],e[0]))>f&&(f=s,h=e[0],d=r[1]);return b=w=null,[[h,c],[d,p]]}}(),as.geo.centroid=function(t){ca=da=pa=fa=ga=0,as.geo.stream(t,ma);var e;return da&&Math.abs(e=Math.sqrt(pa*pa+fa*fa+ga*ga))>Ds?[Math.atan2(fa,pa)*Rs,Math.asin(Math.max(-1,Math.min(1,ga/e)))*Rs]:void 0};var ca,da,pa,fa,ga,ma={sphere:function(){2>ca&&(ca=2,da=pa=fa=ga=0)},point:Ie,lineStart:Ae,lineEnd:De,polygonStart:function(){2>ca&&(ca=2,da=pa=fa=ga=0),ma.lineStart=Oe},polygonEnd:function(){ma.lineStart=Ae}},va=Be(Le,$e,Ge),ya=1e9;as.geo.projection=Je,as.geo.projectionMutator=tn,(as.geo.equirectangular=function(){return Je(nn)}).raw=nn.invert=nn,as.geo.rotation=function(t){function e(e){return e=t(e[0]*Ls,e[1]*Ls),e[0]*=Rs,e[1]*=Rs,e}return t=rn(t[0]%360*Ls,t[1]*Ls,t.length>2?t[2]*Ls:0),e.invert=function(e){return e=t.invert(e[0]*Ls,e[1]*Ls),e[0]*=Rs,e[1]*=Rs,e},e},as.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=rn(-t[0]*Ls,-t[1]*Ls,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Rs,t[1]*=Rs}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=ln((e=+i)*Ls,r*Ls),t):e},t.precision=function(i){return arguments.length?(n=ln(e*Ls,(r=+i)*Ls),t):r},t.angle(90)},as.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ls,r=t[1]*Ls,o=e[1]*Ls,s=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((n=c*s)*n+(n=u*h-l*c*a)*n),l*h+u*c*a)},as.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return as.range(Math.ceil(o/m)*m,r,m).map(d).concat(as.range(Math.ceil(u/v)*v,l,v).map(p)).concat(as.range(Math.ceil(i/f)*f,n,f).filter(function(t){return Math.abs(t%m)>Ds}).map(h)).concat(as.range(Math.ceil(a/g)*g,s,g).filter(function(t){return Math.abs(t%v)>Ds}).map(c))}var n,i,r,o,s,a,l,u,h,c,d,p,f=10,g=f,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(l).slice(1),d(r).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(y)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(y=+e,h=hn(a,s,90),c=cn(i,n,y),d=hn(u,l,90),p=cn(o,r,y),t):y},t.majorExtent([[-180,-90+Ds],[180,90-Ds]]).minorExtent([[-180,-80-Ds],[180,80+Ds]])},as.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=dn,r=pn;return t.distance=function(){return as.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},as.geo.interpolate=function(t,e){return fn(t[0]*Ls,t[1]*Ls,e[0]*Ls,e[1]*Ls)},as.geo.length=function(t){return ba=0,as.geo.stream(t,wa),ba};var ba,wa={sphere:H,point:H,lineStart:gn,lineEnd:H,polygonStart:H,polygonEnd:H};(as.geo.conicEqualArea=function(){return mn(vn)}).raw=vn,as.geo.albers=function(){return as.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},as.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(i(o,s),e)||r(o,s),e}var e,n,i,r,o=as.geo.albers(),s=as.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=as.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?s:r>=.166&&.234>r&&i>=-.214&&-.115>i?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),i=a.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),h=+e[0],c=+e[1];return n=o.translate(e).clipExtent([[h-.455*u,c-.238*u],[h+.455*u,c+.238*u]]).stream(l).point,i=s.translate([h-.307*u,c+.201*u]).clipExtent([[h-.425*u+Ds,c+.12*u+Ds],[h-.214*u-Ds,c+.234*u-Ds]]).stream(l).point,r=a.translate([h-.205*u,c+.212*u]).clipExtent([[h-.214*u+Ds,c+.166*u+Ds],[h-.115*u-Ds,c+.234*u-Ds]]).stream(l).point,t},t.scale(1070)};var xa,Sa,Ta,_a,Ea,Ma,Ca={point:H,lineStart:H,lineEnd:H,polygonStart:function(){Sa=0,Ca.lineStart=yn},polygonEnd:function(){Ca.lineStart=Ca.lineEnd=Ca.point=H,xa+=Math.abs(Sa/2)}},ka={point:bn,lineStart:H,lineEnd:H,polygonStart:H,polygonEnd:H},Ha={point:Sn,lineStart:Tn,lineEnd:_n,polygonStart:function(){Ha.lineStart=En},polygonEnd:function(){Ha.point=Sn,Ha.lineStart=Tn,Ha.lineEnd=_n}};as.geo.path=function(){function t(t){return t&&as.geo.stream(t,i(r.pointRadius("function"==typeof o?+o.apply(this,arguments):o))),r.result()}var e,n,i,r,o=4.5;return t.area=function(t){return xa=0,as.geo.stream(t,i(Ca)),xa},t.centroid=function(t){return ca=pa=fa=ga=0,as.geo.stream(t,i(Ha)),ga?[pa/ga,fa/ga]:void 0},t.bounds=function(t){return Ea=Ma=-(Ta=_a=1/0),as.geo.stream(t,i(ka)),[[Ta,_a],[Ea,Ma]]},t.projection=function(n){return arguments.length?(i=(e=n)?n.stream||Cn(n):he,t):e},t.context=function(e){return arguments.length?(r=null==(n=e)?new wn:new Mn(e),t):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:+e,t):o},t.projection(as.geo.albersUsa()).context(null)};var Na=kn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(as.geo.azimuthalEqualArea=function(){return Je(Na)}).raw=Na;var Pa=kn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},he);(as.geo.azimuthalEquidistant=function(){return Je(Pa)}).raw=Pa,(as.geo.conicConformal=function(){return mn(Hn)}).raw=Hn,(as.geo.conicEquidistant=function(){return mn(Nn)}).raw=Nn;var za=kn(function(t){return 1/t},Math.atan);(as.geo.gnomonic=function(){return Je(za)}).raw=za,Pn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-As/2]},(as.geo.mercator=function(){return zn(Pn)}).raw=Pn;var Ia=kn(function(){return 1},Math.asin);(as.geo.orthographic=function(){return Je(Ia)}).raw=Ia;var Oa=kn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(as.geo.stereographic=function(){return Je(Oa)}).raw=Oa,In.invert=function(t,e){return[Math.atan2(W(t),Math.cos(e)),F(Math.sin(e)/U(t))]},(as.geo.transverseMercator=function(){return zn(In)}).raw=In,as.geom={},as.svg={},as.svg.line=function(){return On(he)};var Aa=as.map({linear:Ln,"linear-closed":Rn,"step-before":jn,"step-after":Bn,basis:qn,"basis-open":Gn,"basis-closed":Qn,bundle:Xn,cardinal:Un,"cardinal-open":Fn,"cardinal-closed":Wn,monotone:ei});Aa.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Da=[0,2/3,1/3,0],La=[0,1/3,2/3,0],Ra=[0,1/6,2/3,1/6];as.geom.hull=function(t){function e(t){if(3>t.length)return[];var e,r,o,s,a,l,u,h,c,d,p,f,g=ue(n),m=ue(i),v=t.length,y=v-1,b=[],w=[],x=0;if(g===An&&i===Dn)e=t;else for(o=0,e=[];v>o;++o)e.push([+g.call(this,r=t[o],o),+m.call(this,r,o)]);for(o=1;v>o;++o)(e[o][1]<e[x][1]||e[o][1]==e[x][1]&&e[o][0]<e[x][0])&&(x=o);for(o=0;v>o;++o)o!==x&&(l=e[o][1]-e[x][1],a=e[o][0]-e[x][0],b.push({angle:Math.atan2(l,a),index:o}));for(b.sort(function(t,e){return t.angle-e.angle}),p=b[0].angle,d=b[0].index,c=0,o=1;y>o;++o){if(s=b[o].index,p==b[o].angle){if(a=e[d][0]-e[x][0],l=e[d][1]-e[x][1],u=e[s][0]-e[x][0],h=e[s][1]-e[x][1],a*a+l*l>=u*u+h*h){b[o].index=-1;continue}b[c].index=-1}p=b[o].angle,c=o,d=s}for(w.push(x),o=0,s=0;2>o;++s)b[s].index>-1&&(w.push(b[s].index),o++);for(f=w.length;y>s;++s)if(!(0>b[s].index)){for(;!ni(w[f-2],w[f-1],b[s].index,e);)--f;w[f++]=b[s].index}var S=[];for(o=f-1;o>=0;--o)S.push(t[w[o]]);return S}var n=An,i=Dn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},as.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];n>++e;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return.5*i},t.centroid=function(e){var n,i,r=-1,o=t.length,s=0,a=0,l=t[o-1];for(arguments.length||(e=-1/(6*t.area()));o>++r;)n=l,l=t[r],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*e,a*e]},t.clip=function(e){for(var n,i,r,o,s,a,l=-1,u=t.length,h=t[u-1];u>++l;){for(n=e.slice(),e.length=0,o=t[l],s=n[(r=n.length)-1],i=-1;r>++i;)a=n[i],ii(a,h,o)?(ii(s,h,o)||e.push(ri(s,a,h,o)),e.push(a)):ii(s,h,o)&&e.push(ri(s,a,h,o)),s=a;h=o}return e},t},as.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return oi(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],o=r[0],s=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-o,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([r,e[a],e[a+1]])}),n},as.geom.voronoi=function(t){function e(t){var e,i,s,a=t.map(function(){return[]}),l=ue(r),u=ue(o),h=t.length,c=1e6;if(l===An&&u===Dn)e=t;else for(e=[],s=0;h>s;++s)e.push([+l.call(this,i=t[s],s),+u.call(this,i,s)]);if(oi(e,function(t){var e,n,i,r,o,s;1===t.a&&t.b>=0?(e=t.ep.r,n=t.ep.l):(e=t.ep.l,n=t.ep.r),1===t.a?(o=e?e.y:-c,i=t.c-t.b*o,s=n?n.y:c,r=t.c-t.b*s):(i=e?e.x:-c,o=t.c-t.a*i,r=n?n.x:c,s=t.c-t.a*r);var l=[i,o],u=[r,s];a[t.region.l.index].push(l,u),a[t.region.r.index].push(l,u)}),a=a.map(function(t,n){var i=e[n][0],r=e[n][1],o=t.map(function(t){return Math.atan2(t[0]-i,t[1]-r)}),s=as.range(t.length).sort(function(t,e){return o[t]-o[e]});return s.filter(function(t,e){return!e||o[t]-o[s[e-1]]>Ds}).map(function(e){return t[e]})}),a.forEach(function(t,n){var i=t.length;if(!i)return t.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(i>2)){var r=e[n],o=t[0],s=t[1],a=r[0],l=r[1],u=o[0],h=o[1],d=s[0],p=s[1],f=Math.abs(d-u),g=p-h;if(Ds>Math.abs(g)){var m=h>l?-c:c;t.push([-c,m],[c,m])}else if(Ds>f){var v=u>a?-c:c;t.push([v,-c],[v,c])}else{var m=(u-a)*(p-h)>(d-u)*(h-l)?c:-c,y=Math.abs(g)-f;Ds>Math.abs(y)?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-c,m],[c,m]))}}}),n)for(s=0;h>s;++s)n(a[s]);for(s=0;h>s;++s)a[s].point=t[s];return a}var n,i=null,r=An,o=Dn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(null==t?n=null:(i=[+t[0],+t[1]],n=as.geom.polygon([[0,0],[0,i[1]],i,[i[0],0]]).clip),e):i},e.links=function(t){var e,n,i,s=t.map(function(){return[]}),a=[],l=ue(r),u=ue(o),h=t.length;if(l===An&&u===Dn)e=t;else for(i=0;h>i;++i)e.push([+l.call(this,n=t[i],i),+u.call(this,n,i)]);return oi(e,function(e){var n=e.region.l.index,i=e.region.r.index;s[n][i]||(s[n][i]=s[i][n]=!0,a.push({source:t[n],target:t[i]}))}),a},e.triangles=function(t){if(r===An&&o===Dn)return as.geom.delaunay(t);var e,n,i,s,a,l=ue(r),u=ue(o);for(s=0,e=[],a=t.length;a>s;++s)n=[+l.call(this,i=t[s],s),+u.call(this,i,s)],n.data=i,e.push(n);return as.geom.delaunay(e).map(function(t){return t.map(function(t){return t.data})})},e)};var ja={l:"r",r:"l"};as.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,h=t.y;if(null!=l)if(.01>Math.abs(l-n)+Math.abs(h-i))u(t,e,n,i,r,o,s,a);else{var c=t.point;t.x=t.y=t.point=null,u(t,c,l,h,r,o,s,a),u(t,e,n,i,r,o,s,a)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,o,s,a)}function u(t,e,n,i,r,s,a,l){var u=.5*(r+a),h=.5*(s+l),c=n>=u,d=i>=h,p=(d<<1)+c;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=li()),c?r=u:a=u,d?s=h:l=h,o(t,e,n,i,r,s,a,l)}var h,c,d,p,f,g,m,v,y,b=ue(a),w=ue(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),c=[],d=[],f=t.length,s)for(p=0;f>p;++p)h=t[p],g>h.x&&(g=h.x),m>h.y&&(m=h.y),h.x>v&&(v=h.x),h.y>y&&(y=h.y),c.push(h.x),d.push(h.y);else for(p=0;f>p;++p){var x=+b(h=t[p],p),S=+w(h,p);g>x&&(g=x),m>S&&(m=S),x>v&&(v=x),S>y&&(y=S),c.push(x),d.push(S)}var T=v-g,_=y-m;T>_?y=m+T:v=g+_;var E=li();if(E.add=function(t){o(E,t,+b(t,++p),+w(t,p),g,m,v,y)},E.visit=function(t){ui(t,E,g,m,v,y)},p=-1,null==e){for(;f>++p;)o(E,t[p],c[p],d[p],g,m,v,y);--p}else t.forEach(E.add);return c=d=t=h=null,E}var s,a=An,l=Dn;return(s=arguments.length)?(a=si,l=ai,3===s&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(l=t,o):l},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i,r]},o)},as.interpolateRgb=hi,as.transform=function(t){var e=ls.createElementNS(as.ns.prefix.svg,"g");return(as.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new ci(n?n.matrix:Ba)})(t)},ci.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ba={a:1,b:0,c:0,d:1,e:0,f:0};as.interpolateNumber=gi,as.interpolateTransform=mi,as.interpolateObject=vi,as.interpolateString=yi;var Fa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;as.interpolate=bi,as.interpolators=[function(t,e){var n=typeof e;return("string"===n?qs.has(e)||/^(#|rgb\(|hsl\()/.test(e)?hi:yi:e instanceof A?hi:"object"===n?Array.isArray(e)?xi:vi:gi)(t,e)}],as.interpolateArray=xi;var Wa=function(){return he},Ua=as.map({linear:Wa,poly:ki,quad:function(){return Ei},cubic:function(){return Mi},sin:function(){return Hi},exp:function(){return Ni},circle:function(){return Pi},elastic:zi,back:Ii,bounce:function(){return Oi}}),Va=as.map({"in":he,out:Ti,"in-out":_i,"out-in":function(t){return _i(Ti(t))}});as.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=Ua.get(n)||Wa,i=Va.get(i)||he,Si(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},as.interpolateHcl=Ai,as.interpolateHsl=Di,as.interpolateLab=Li,as.interpolateRound=Ri,as.layout={},as.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;i>++n;)e.push(Fi(t[n]));return e}},as.layout.chord=function(){function t(){var t,u,c,d,p,f={},g=[],m=as.range(o),v=[];for(n=[],i=[],t=0,d=-1;o>++d;){for(u=0,p=-1;o>++p;)u+=r[d][p];g.push(u),v.push(as.range(o)),t+=u}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(2*As-h*o)/t,u=0,d=-1;o>++d;){for(c=u,p=-1;o>++p;){var y=m[d],b=v[y][p],w=r[y][b],x=u,S=u+=w*t;f[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:S,value:w}}i[y]={index:y,startAngle:c,endAngle:u,value:(u-c)/t},u+=h}for(d=-1;o>++d;)for(p=d-1;o>++p;){var T=f[d+"-"+p],_=f[p+"-"+d];(T.value||_.value)&&n.push(T.value<_.value?{source:_,target:T}:{source:T,target:_})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,s,a,l,u={},h=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(s=t,n=i=null,u):s},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},as.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(o*o+s*s);if(g>(r-n)*a){var l=e.charge*a*a;return t.px-=o*l,t.py-=s*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=o*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=as.event.x,t.py=as.event.y,a.resume()}var n,i,r,o,s,a={},l=as.dispatch("start","tick","end"),u=[1,1],h=.9,c=$a,d=qa,p=-30,f=.1,g=.8,m=[],v=[];return a.tick=function(){if(.005>(i*=.99))return l.end({type:"end",alpha:i=0}),!0;var e,n,a,c,d,g,y,b,w,x=m.length,S=v.length;for(n=0;S>n;++n)a=v[n],c=a.source,d=a.target,b=d.x-c.x,w=d.y-c.y,(g=b*b+w*w)&&(g=i*o[n]*((g=Math.sqrt(g))-r[n])/g,b*=g,w*=g,d.x-=b*(y=c.weight/(d.weight+c.weight)),d.y-=w*y,c.x+=b*(y=1-y),c.y+=w*y);if((y=i*f)&&(b=u[0]/2,w=u[1]/2,n=-1,y))for(;x>++n;)a=m[n],a.x+=(b-a.x)*y,a.y+=(w-a.y)*y;if(p)for(Qi(e=as.geom.quadtree(m),i,s),n=-1;x>++n;)(a=m[n]).fixed||e.visit(t(a));for(n=-1;x>++n;)a=m[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*h,a.y-=(a.py-(a.py=a.y))*h);l.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(m=t,a):m},a.links=function(t){return arguments.length?(v=t,a):v},a.size=function(t){return arguments.length?(u=t,a):u},a.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,a):c},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,a):d},a.friction=function(t){return arguments.length?(h=+t,a):h},a.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.gravity=function(t){return arguments.length?(f=+t,a):f},a.theta=function(t){return arguments.length?(g=+t,a):g},a.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),as.timer(a.tick)),a):i},a.start=function(){function t(t,i){for(var r,o=e(n),s=-1,a=o.length;a>++s;)if(!isNaN(r=o[s][t]))return r;return Math.random()*i}function e(){if(!l){for(l=[],i=0;f>i;++i)l[i]=[];for(i=0;g>i;++i){var t=v[i];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,i,l,h,f=m.length,g=v.length,y=u[0],b=u[1];for(n=0;f>n;++n)(h=m[n]).index=n,h.weight=0;for(n=0;g>n;++n)h=v[n],"number"==typeof h.source&&(h.source=m[h.source]),"number"==typeof h.target&&(h.target=m[h.target]),++h.source.weight,++h.target.weight;for(n=0;f>n;++n)h=m[n],isNaN(h.x)&&(h.x=t("x",y)),isNaN(h.y)&&(h.y=t("y",b)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);if(r=[],"function"==typeof c)for(n=0;g>n;++n)r[n]=+c.call(this,v[n],n);else for(n=0;g>n;++n)r[n]=c;if(o=[],"function"==typeof d)for(n=0;g>n;++n)o[n]=+d.call(this,v[n],n);else for(n=0;g>n;++n)o[n]=d;if(s=[],"function"==typeof p)for(n=0;f>n;++n)s[n]=+p.call(this,m[n],n);
else for(n=0;f>n;++n)s[n]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=as.behavior.drag().origin(he).on("dragstart.force",Vi).on("drag.force",e).on("dragend.force",$i)),arguments.length?(this.on("mouseover.force",qi).on("mouseout.force",Gi).call(n),void 0):n},as.rebind(a,l,"on")};var $a=20,qa=1;as.layout.hierarchy=function(){function t(e,s,a){var l=r.call(n,e,s);if(e.depth=s,a.push(e),l&&(u=l.length)){for(var u,h,c=-1,d=e.children=[],p=0,f=s+1;u>++c;)h=t(l[c],f,a),h.parent=e,d.push(h),p+=h.value;i&&d.sort(i),o&&(e.value=p)}else o&&(e.value=+o.call(n,e,s)||0);return e}function e(t,i){var r=t.children,s=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;a>++l;)s+=e(r[l],u);else o&&(s=+o.call(n,t,i)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=Ki,r=Zi,o=Yi;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n},as.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;s>++u;)t(a=o[u],n,l=a.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;r>++o;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=as.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Xi(n,i)},as.layout.pie=function(){function t(o){var s=o.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-a)/as.sum(s),u=as.range(o.length);null!=n&&u.sort(n===Ga?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var h=[];return u.forEach(function(t){var e;h[t]={data:o[t],value:e=s[t],startAngle:a,endAngle:a+=e*l}}),h}var e=Number,n=Ga,i=0,r=2*As;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var Ga={};as.layout.stack=function(){function t(a,l){var u=a.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),c=n.call(t,h,l);u=as.permute(u,c),h=as.permute(h,c);var d,p,f,g=i.call(t,h,l),m=u.length,v=u[0].length;for(p=0;v>p;++p)for(r.call(t,u[0][p],f=g[p],h[0][p][1]),d=1;m>d;++d)r.call(t,u[d][p],f+=h[d-1][p][1],h[d][p][1]);return a}var e=he,n=ir,i=rr,r=nr,o=tr,s=er;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Qa.get(e)||ir,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Xa.get(e)||rr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(r=e,t):r},t};var Qa=as.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(or),o=t.map(sr),s=as.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=s[e],l>a?(a+=o[n],u.push(n)):(l+=o[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return as.range(t.length).reverse()},"default":ir}),Xa=as.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,l=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,r,o,s,a,l,u,h=t.length,c=t[0],d=c.length,p=[];for(p[0]=l=u=0,n=1;d>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,o=0,a=c[n][0]-c[n-1][0];h>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}p[n]=l-=r?o/r*a:0,u>l&&(u=l)}for(n=0;d>n;++n)p[n]-=u;return p},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:rr});as.layout.histogram=function(){function t(t,o){for(var s,a,l=[],u=t.map(n,this),h=i.call(this,u,o),c=r.call(this,h,u,o),o=-1,d=u.length,p=c.length-1,f=e?1:1/d;p>++o;)s=l[o]=[],s.dx=c[o+1]-(s.x=c[o]),s.y=0;if(p>0)for(o=-1;d>++o;)a=u[o],a>=h[0]&&h[1]>=a&&(s=l[as.bisect(c,a,1,p)-1],s.y+=f,s.push(t[o]));return l}var e=!0,n=Number,i=hr,r=lr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=ue(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return ur(t,e)}:ue(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},as.layout.tree=function(){function t(t,r){function o(t,e){var i=t.children,r=t._tree;if(i&&(s=i.length)){for(var s,l,u,h=i[0],c=h,d=-1;s>++d;)u=i[d],o(u,l),c=a(u,l,c),l=u;br(t);var p=.5*(h._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-p):r.prelim=p}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;i>++r;)s(n[r],e)}}function a(t,e,i){if(e){for(var r,o=t,s=t,a=e,l=t.parent.children[0],u=o._tree.mod,h=s._tree.mod,c=a._tree.mod,d=l._tree.mod;a=pr(a),o=dr(o),a&&o;)l=dr(l),s=pr(s),s._tree.ancestor=t,r=a._tree.prelim+c-o._tree.prelim-u+n(a,o),r>0&&(wr(xr(a,t,i),t,r),u+=r,h+=r),c+=a._tree.mod,u+=o._tree.mod,d+=l._tree.mod,h+=s._tree.mod;a&&!pr(s)&&(s._tree.thread=a,s._tree.mod+=c-h),o&&!dr(l)&&(l._tree.thread=o,l._tree.mod+=u-d,i=t)}return i}var l=e.call(this,t,r),u=l[0];yr(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),o(u),s(u,-u._tree.prelim);var h=fr(u,mr),c=fr(u,gr),d=fr(u,vr),p=h.x-n(h,c)/2,f=c.x+n(c,h)/2,g=d.depth||1;return yr(u,function(t){t.x=(t.x-p)/(f-p)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=as.layout.hierarchy().sort(null).value(null),n=cr,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Xi(t,e)},as.layout.pack=function(){function t(t,r){var o=e.call(this,t,r),s=o[0];s.x=0,s.y=0,yr(s,function(t){t.r=Math.sqrt(t.value)}),yr(s,Mr);var a=i[0],l=i[1],u=Math.max(2*s.r/a,2*s.r/l);if(n>0){var h=n*u/2;yr(s,function(t){t.r+=h}),yr(s,Mr),yr(s,function(t){t.r-=h}),u=Math.max(2*s.r/a,2*s.r/l)}return Hr(s,a/2,l/2,1/u),o}var e=as.layout.hierarchy().sort(Sr),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},Xi(t,e)},as.layout.cluster=function(){function t(t,r){var o,s=e.call(this,t,r),a=s[0],l=0;yr(a,function(t){var e=t.children;e&&e.length?(t.x=zr(e),t.y=Pr(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var u=Ir(a),h=Or(a),c=u.x-n(u,h)/2,d=h.x+n(h,u)/2;return yr(a,function(t){t.x=(t.x-c)/(d-c)*i[0],t.y=(1-(a.y?t.y/a.y:1))*i[1]}),s}var e=as.layout.hierarchy().sort(null).value(null),n=cr,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Xi(t,e)},as.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;o>++r;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var s,a,l,u=c(n),h=[],d=o.slice(),f=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),h.area=0;(l=d.length)>0;)h.push(s=d[l-1]),h.area+=s.area,"squarify"!==p||f>=(a=i(h,g))?(d.pop(),f=a):(h.area-=h.pop().area,r(h,g,u,!1),g=Math.min(u.dx,u.dy),h.length=h.area=0,f=1/0);h.length&&(r(h,g,u,!0),h.length=h.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=c(e),a=i.slice(),l=[];for(t(a,s.dx*s.dy/e.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;a>++s;)(n=t[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*f/i,i/(e*o*f)):1/0}function r(t,e,n,i){var r,o=-1,s=t.length,a=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);s>++o;)r=t[o],r.x=a,r.y=u,r.dy=h,a+=r.dx=Math.min(n.x+n.dx-a,h?l(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);s>++o;)r=t[o],r.x=a,r.y=u,r.dx=h,u+=r.dy=Math.min(n.y+n.dy-u,h?l(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),d&&(s=r),r}var s,a=as.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=Ar,d=!1,p="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Ar(e):Dr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Dr(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Ar:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,s=null,o):d},o.ratio=function(t){return arguments.length?(f=t,o):f},o.mode=function(t){return arguments.length?(p=t+"",o):p},Xi(o,a)},as.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=as.random.normal.apply(as,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},as.scale={},as.scale.linear=function(){return Wr([0,1],[0,1],bi,!1)},as.scale.log=function(){return Qr(as.scale.linear().domain([0,Math.LN10]),10,Xr,Zr,[1,10])};var Za=as.format(".0e");as.scale.pow=function(){return Jr(as.scale.linear(),1,[0,1])},as.scale.sqrt=function(){return as.scale.pow().exponent(.5)},as.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},as.scale.category10=function(){return as.scale.ordinal().range(Ya)},as.scale.category20=function(){return as.scale.ordinal().range(Ka)},as.scale.category20b=function(){return as.scale.ordinal().range(Ja)},as.scale.category20c=function(){return as.scale.ordinal().range(tl)};var Ya=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ka=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ja=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],tl=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];as.scale.quantile=function(){return no([],[])},as.scale.quantize=function(){return io(0,1,[0,1])},as.scale.threshold=function(){return ro([.5],[0,1])},as.scale.identity=function(){return oo([0,1])},as.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=i.apply(this,arguments)+el,a=r.apply(this,arguments)+el,l=(s>a&&(l=s,s=a,a=l),a-s),u=As>l?"0":"1",h=Math.cos(s),c=Math.sin(s),d=Math.cos(a),p=Math.sin(a);return l>=nl?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*h+","+o*c+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L"+t*d+","+t*p+"A"+t+","+t+" 0 "+u+",0 "+t*h+","+t*c+"Z":"M"+o*h+","+o*c+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L0,0"+"Z"}var e=so,n=ao,i=lo,r=uo;return t.innerRadius=function(n){return arguments.length?(e=ue(n),t):e},t.outerRadius=function(e){return arguments.length?(n=ue(e),t):n},t.startAngle=function(e){return arguments.length?(i=ue(e),t):i},t.endAngle=function(e){return arguments.length?(r=ue(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+el;return[Math.cos(o)*t,Math.sin(o)*t]},t};var el=-As/2,nl=2*As-1e-6;as.svg.line.radial=function(){var t=On(ho);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jn.reverse=Bn,Bn.reverse=jn,as.svg.area=function(){return co(he)},as.svg.area.radial=function(){var t=co(ho);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},as.svg.chord=function(){function t(t,a){var l=e(this,o,t,a),u=e(this,s,t,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=a.call(t,r,i),s=l.call(t,r,i)+el,h=u.call(t,r,i)+el;return{r:o,a0:s,a1:h,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(h),o*Math.sin(h)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>As)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=dn,s=pn,a=po,l=lo,u=uo;return t.radius=function(e){return arguments.length?(a=ue(e),t):a},t.source=function(e){return arguments.length?(o=ue(e),t):o},t.target=function(e){return arguments.length?(s=ue(e),t):s},t.startAngle=function(e){return arguments.length?(l=ue(e),t):l},t.endAngle=function(e){return arguments.length?(u=ue(e),t):u},t},as.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),s=n.call(this,t,r),a=(o.y+s.y)/2,l=[o,{x:o.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=dn,n=pn,i=fo;return t.source=function(n){return arguments.length?(e=ue(n),t):e},t.target=function(e){return arguments.length?(n=ue(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},as.svg.diagonal.radial=function(){var t=as.svg.diagonal(),e=fo,n=t.projection;return t.projection=function(t){return arguments.length?n(go(e=t)):e},t},as.svg.symbol=function(){function t(t,i){return(il.get(e.call(this,t,i))||yo)(n.call(this,t,i))}var e=vo,n=mo;return t.type=function(n){return arguments.length?(e=ue(n),t):e},t.size=function(e){return arguments.length?(n=ue(e),t):n},t};var il=as.map({circle:yo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*sl)),n=e*sl;return"M0,"+-e+"L"+n+",0"+" 0,"+e+" "+-n+",0"+"Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ol),n=e*ol/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ol),n=e*ol/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});as.svg.symbolTypes=il.keys();var rl,ol=Math.sqrt(3),sl=Math.tan(30*Ls),al=[],ll=0,ul={ease:Ci,delay:0,duration:250};al.call=Es.call,al.empty=Es.empty,al.node=Es.node,as.transition=function(t){return arguments.length?rl?t.transition():t:Ns.transition()},as.transition.prototype=al,al.select=function(t){var e,n,i,r=this.id,o=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){o.push(e=[]);for(var l=this[s],u=-1,h=l.length;h>++u;)(i=l[u])&&(n=t.call(i,i.__data__,u))?("__data__"in i&&(n.__data__=i.__data__),So(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return bo(o,r)},al.selectAll=function(t){var e,n,i,r,o,s=this.id,a=[];"function"!=typeof t&&(t=y(t));for(var l=-1,u=this.length;u>++l;)for(var h=this[l],c=-1,d=h.length;d>++c;)if(i=h[c]){o=i.__transition__[s],n=t.call(i,i.__data__,c),a.push(e=[]);for(var p=-1,f=n.length;f>++p;)So(r=n[p],p,s,o),e.push(r)}return bo(a,s)},al.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=C(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]);for(var n=this[o],a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return bo(r,this.id,this.time).ease(this.ease())},al.tween=function(t,e){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(t):I(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},al.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(2>arguments.length){for(e in t)this.attr(e,t[e]);return this}var s=wi(t),a=as.ns.qualify(t);return wo(this,"attr."+t,e,a.local?o:r)},al.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=as.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},al.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=us.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=s(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}var s=wi(t);return wo(this,"style."+t,e,r)},al.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,us.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return 3>arguments.length&&(n=""),this.tween("style."+t,i)},al.text=function(t){return wo(this,"text",t,xo)},al.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},al.ease=function(t){var e=this.id;return 1>arguments.length?this.node().__transition__[e].ease:("function"!=typeof t&&(t=as.ease.apply(as,arguments)),I(this,function(n){n.__transition__[e].ease=t}))},al.delay=function(t){var e=this.id;return I(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=0|t.call(n,n.__data__,i,r)}:(t|=0,function(n){n.__transition__[e].delay=t}))},al.duration=function(t){var e=this.id;return I(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,0|t.call(n,n.__data__,i,r))}:(t=Math.max(1,0|t),function(n){n.__transition__[e].duration=t}))},al.each=function(t,e){var n=this.id;if(2>arguments.length){var i=ul,r=rl;rl=n,I(this,function(e,i,r){ul=e.__transition__[n],t.call(e,e.__data__,i,r)}),ul=i,rl=r}else I(this,function(i){i.__transition__[n].event.on(t,e)});return this},al.transition=function(){for(var t,e,n,i,r=this.id,o=++ll,s=[],a=0,l=this.length;l>a;a++){s.push(t=[]);for(var e=this[a],u=0,h=e.length;h>u;u++)(n=e[u])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,So(n,u,o,i)),t.push(n)}return bo(s,o)},as.svg.axis=function(){function t(t){t.each(function(){var t,c=as.select(this),d=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,p=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,f=Eo(n,d,h),g=c.selectAll(".tick.minor").data(f,String),m=g.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=as.transition(g.exit()).style("opacity",1e-6).remove(),y=as.transition(g).style("opacity",1),b=c.selectAll(".tick.major").data(d,String),w=b.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),x=as.transition(b.exit()).style("opacity",1e-6).remove(),S=as.transition(b).style("opacity",1),T=Rr(n),_=c.selectAll(".domain").data([0]),E=(_.enter().append("path").attr("class","domain"),as.transition(_)),M=n.copy(),C=this.__chart__||M;this.__chart__=M,w.append("line"),w.append("text");var k=w.select("line"),H=S.select("line"),N=b.select("text").text(p),P=w.select("text"),z=S.select("text");switch(i){case"bottom":t=To,m.attr("y2",o),y.attr("x2",0).attr("y2",o),k.attr("y2",r),P.attr("y",Math.max(r,0)+a),H.attr("x2",0).attr("y2",r),z.attr("x",0).attr("y",Math.max(r,0)+a),N.attr("dy",".71em").style("text-anchor","middle"),E.attr("d","M"+T[0]+","+s+"V0H"+T[1]+"V"+s);break;case"top":t=To,m.attr("y2",-o),y.attr("x2",0).attr("y2",-o),k.attr("y2",-r),P.attr("y",-(Math.max(r,0)+a)),H.attr("x2",0).attr("y2",-r),z.attr("x",0).attr("y",-(Math.max(r,0)+a)),N.attr("dy","0em").style("text-anchor","middle"),E.attr("d","M"+T[0]+","+-s+"V0H"+T[1]+"V"+-s);break;case"left":t=_o,m.attr("x2",-o),y.attr("x2",-o).attr("y2",0),k.attr("x2",-r),P.attr("x",-(Math.max(r,0)+a)),H.attr("x2",-r).attr("y2",0),z.attr("x",-(Math.max(r,0)+a)).attr("y",0),N.attr("dy",".32em").style("text-anchor","end"),E.attr("d","M"+-s+","+T[0]+"H0V"+T[1]+"H"+-s);break;case"right":t=_o,m.attr("x2",o),y.attr("x2",o).attr("y2",0),k.attr("x2",r),P.attr("x",Math.max(r,0)+a),H.attr("x2",r).attr("y2",0),z.attr("x",Math.max(r,0)+a).attr("y",0),N.attr("dy",".32em").style("text-anchor","start"),E.attr("d","M"+s+","+T[0]+"H0V"+T[1]+"H"+s)}if(n.ticks)w.call(t,C),S.call(t,M),x.call(t,M),m.call(t,C),y.call(t,M),v.call(t,M);else{var I=M.rangeBand()/2,O=function(t){return M(t)+I};w.call(t,O),S.call(t,O)}})}var e,n=as.scale.linear(),i=hl,r=6,o=6,s=6,a=3,l=[10],u=null,h=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in cl?e+"":hl,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+e,o=i>1?+n:r,s=i>0?+arguments[i]:r,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(h=+e,t):h},t};var hl="bottom",cl={top:1,right:1,bottom:1,left:1};as.svg.brush=function(){function t(o){o.each(function(){var o,s=as.select(this),u=s.selectAll(".background").data([0]),c=s.selectAll(".extent").data([0]),d=s.selectAll(".resize").data(h,String);s.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),u.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return dl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",t.empty()?"none":null),d.exit().remove(),a&&(o=Rr(a),u.attr("x",o[0]).attr("width",o[1]-o[0]),n(s)),l&&(o=Rr(l),u.attr("y",o[0]).attr("height",o[1]-o[0]),i(s)),e(s)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function i(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function r(){function r(){var t=as.event.changedTouches;return t?as.touches(y,t)[0]:as.mouse(y)}function h(){32==as.event.keyCode&&(E||(m=null,M[0]-=c[1][0],M[1]-=c[1][1],E=2),u())}function d(){32==as.event.keyCode&&2==E&&(M[0]+=c[1][0],M[1]+=c[1][1],E=0,u())}function p(){var t=r(),o=!1;v&&(t[0]+=v[0],t[1]+=v[1]),E||(as.event.altKey?(m||(m=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),M[0]=c[+(t[0]<m[0])][0],M[1]=c[+(t[1]<m[1])][1]):m=null),T&&f(t,a,0)&&(n(x),o=!0),_&&f(t,l,1)&&(i(x),o=!0),o&&(e(x),w({type:"brush",mode:E?"move":"resize"}))}function f(t,e,n){var i,r,s=Rr(e),a=s[0],l=s[1],u=M[n],h=c[1][n]-c[0][n];return E&&(a-=u,l-=h+u),i=Math.max(a,Math.min(l,t[n])),E?r=(i+=u)+h:(m&&(u=Math.max(a,Math.min(l,2*m[n]-i))),i>u?(r=i,i=u):r=u),c[0][n]!==i||c[1][n]!==r?(o=null,c[0][n]=i,c[1][n]=r,!0):void 0}function g(){p(),x.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),as.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w({type:"brushend"}),u()}var m,v,y=this,b=as.select(as.event.target),w=s.of(y,arguments),x=as.select(y),S=b.datum(),T=!/^(n|s)$/.test(S)&&a,_=!/^(e|w)$/.test(S)&&l,E=b.classed("extent"),M=r(),C=as.select(us).on("mousemove.brush",p).on("mouseup.brush",g).on("touchmove.brush",p).on("touchend.brush",g).on("keydown.brush",h).on("keyup.brush",d);if(E)M[0]=c[0][0]-M[0],M[1]=c[0][1]-M[1];else if(S){var k=+/w$/.test(S),H=+/^n/.test(S);v=[c[1-k][0]-M[0],c[1-H][1]-M[1]],M[0]=c[k][0],M[1]=c[H][1]}else as.event.altKey&&(m=M.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),as.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),p(),u()}var o,s=d(t,"brushstart","brush","brushend"),a=null,l=null,h=pl[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(a=e,h=pl[!a<<1|!l],t):a},t.y=function(e){return arguments.length?(l=e,h=pl[!a<<1|!l],t):l},t.extent=function(e){var n,i,r,s,u;return arguments.length?(o=[[0,0],[0,0]],a&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),o[0][0]=n,o[1][0]=i,a.invert&&(n=a(n),i=a(i)),n>i&&(u=n,n=i,i=u),c[0][0]=0|n,c[1][0]=0|i),l&&(r=e[0],s=e[1],a&&(r=r[1],s=s[1]),o[0][1]=r,o[1][1]=s,l.invert&&(r=l(r),s=l(s)),r>s&&(u=r,r=s,s=u),c[0][1]=0|r,c[1][1]=0|s),t):(e=o||c,a&&(n=e[0][0],i=e[1][0],o||(n=c[0][0],i=c[1][0],a.invert&&(n=a.invert(n),i=a.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=e[0][1],s=e[1][1],o||(r=c[0][1],s=c[1][1],l.invert&&(r=l.invert(r),s=l.invert(s)),r>s&&(u=r,r=s,s=u))),a&&l?[[n,r],[i,s]]:a?[n,i]:l&&[r,s])},t.clear=function(){return o=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return a&&c[0][0]===c[1][0]||l&&c[0][1]===c[1][1]},as.rebind(t,s,"on")};var dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];as.time={};var fl=Date,gl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Mo.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ml.setUTCDate.apply(this._,arguments)},setDay:function(){ml.setUTCDay.apply(this._,arguments)},setFullYear:function(){ml.setUTCFullYear.apply(this._,arguments)},setHours:function(){ml.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ml.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ml.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ml.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ml.setUTCSeconds.apply(this._,arguments)},setTime:function(){ml.setTime.apply(this._,arguments)}};var ml=Date.prototype,vl="%a %b %e %X %Y",yl="%m/%d/%Y",bl="%H:%M:%S",wl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Sl=["January","February","March","April","May","June","July","August","September","October","November","December"],Tl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];as.time.year=Co(function(t){return t=as.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),as.time.years=as.time.year.range,as.time.years.utc=as.time.year.utc.range,as.time.day=Co(function(t){var e=new fl(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),as.time.days=as.time.day.range,as.time.days.utc=as.time.day.utc.range,as.time.dayOfYear=function(t){var e=as.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},gl.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=as.time[t]=Co(function(t){return(t=as.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});as.time[t+"s"]=n.range,as.time[t+"s"].utc=n.utc.range,as.time[t+"OfYear"]=function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)}}),as.time.week=as.time.sunday,as.time.weeks=as.time.sunday.range,as.time.weeks.utc=as.time.sunday.utc.range,as.time.weekOfYear=as.time.sundayOfYear,as.time.format=function(t){function e(e){for(var i,r,o,s=[],a=-1,l=0;n>++a;)37===t.charCodeAt(a)&&(s.push(t.substring(l,a)),null!=(r=Nl[i=t.charAt(++a)])&&(i=t.charAt(++a)),(o=Pl[i])&&(i=o(e,null==r?"e"===i?" ":"0":r)),s.push(i),l=a+1);return s.push(t.substring(l,a)),s.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=Ho(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new fl;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},e.toString=function(){return t},e};var _l=No(wl),El=No(xl),Ml=No(Sl),Cl=Po(Sl),kl=No(Tl),Hl=Po(Tl),Nl={"-":"",_:" ",0:"0"},Pl={a:function(t){return xl[t.getDay()]},A:function(t){return wl[t.getDay()]},b:function(t){return Tl[t.getMonth()]},B:function(t){return Sl[t.getMonth()]},c:as.time.format(vl),d:function(t,e){return zo(t.getDate(),e,2)},e:function(t,e){return zo(t.getDate(),e,2)},H:function(t,e){return zo(t.getHours(),e,2)},I:function(t,e){return zo(t.getHours()%12||12,e,2)},j:function(t,e){return zo(1+as.time.dayOfYear(t),e,3)},L:function(t,e){return zo(t.getMilliseconds(),e,3)},m:function(t,e){return zo(t.getMonth()+1,e,2)},M:function(t,e){return zo(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return zo(t.getSeconds(),e,2)},U:function(t,e){return zo(as.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return zo(as.time.mondayOfYear(t),e,2)},x:as.time.format(yl),X:as.time.format(bl),y:function(t,e){return zo(t.getFullYear()%100,e,2)},Y:function(t,e){return zo(t.getFullYear()%1e4,e,4)},Z:Zo,"%":function(){return"%"}},zl={a:Io,A:Oo,b:Ao,B:Do,c:Lo,d:Vo,e:Vo,H:$o,I:$o,L:Qo,m:Uo,M:qo,p:Xo,S:Go,x:Ro,X:jo,y:Fo,Y:Bo},Il=/^\s*\d+/,Ol=as.map({am:0,pm:1});as.time.format.utc=function(t){function e(t){try{fl=Mo;var e=new fl;return e._=t,n(e)}finally{fl=Date}}var n=as.time.format(t);return e.parse=function(t){try{fl=Mo;var e=n.parse(t);return e&&e._}finally{fl=Date}},e.toString=n.toString,e};var Al=as.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");as.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yo:Al,Yo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Yo.toString=Al.toString,as.time.second=Co(function(t){return new fl(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),as.time.seconds=as.time.second.range,as.time.seconds.utc=as.time.second.utc.range,as.time.minute=Co(function(t){return new fl(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),as.time.minutes=as.time.minute.range,as.time.minutes.utc=as.time.minute.utc.range,as.time.hour=Co(function(t){var e=t.getTimezoneOffset()/60;
return new fl(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),as.time.hours=as.time.hour.range,as.time.hours.utc=as.time.hour.utc.range,as.time.month=Co(function(t){return t=as.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),as.time.months=as.time.month.range,as.time.months.utc=as.time.month.utc.range;var Dl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ll=[[as.time.second,1],[as.time.second,5],[as.time.second,15],[as.time.second,30],[as.time.minute,1],[as.time.minute,5],[as.time.minute,15],[as.time.minute,30],[as.time.hour,1],[as.time.hour,3],[as.time.hour,6],[as.time.hour,12],[as.time.day,1],[as.time.day,2],[as.time.week,1],[as.time.month,1],[as.time.month,3],[as.time.year,1]],Rl=[[as.time.format("%Y"),Le],[as.time.format("%B"),function(t){return t.getMonth()}],[as.time.format("%b %d"),function(t){return 1!=t.getDate()}],[as.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[as.time.format("%I %p"),function(t){return t.getHours()}],[as.time.format("%I:%M"),function(t){return t.getMinutes()}],[as.time.format(":%S"),function(t){return t.getSeconds()}],[as.time.format(".%L"),function(t){return t.getMilliseconds()}]],jl=as.scale.linear(),Bl=ts(Rl);Ll.year=function(t,e){return jl.domain(t.map(ns)).ticks(e).map(es)},as.time.scale=function(){return Ko(as.scale.linear(),Ll,Bl)};var Fl=Ll.map(function(t){return[t[0].utc,t[1]]}),Wl=[[as.time.format.utc("%Y"),Le],[as.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[as.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[as.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[as.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[as.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[as.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[as.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Ul=ts(Wl);return Fl.year=function(t,e){return jl.domain(t.map(rs)).ticks(e).map(is)},as.time.scale.utc=function(){return Ko(as.scale.linear(),Fl,Ul)},as.text=ce(function(t){return t.responseText}),as.json=function(t,e){return de(t,"application/json",os,e)},as.html=function(t,e){return de(t,"text/html",ss,e)},as.xml=ce(function(t){return t.responseXML}),as}(),window.Mirador=window.Mirador||function(t){Mirador.DEFAULT_SETTINGS.workspaceAutoSave&&(Mirador.settingsLoader=new Mirador.SettingsLoader(t),t=Mirador.settingsLoader.config),Mirador.viewer=new Mirador.Viewer(t),Mirador.manifests=new Mirador.ManifestsLoader(t)},function(t){t.DEFAULT_SETTINGS={workspaceAutoSave:!0,showNoImageChoiceOption:!0,initialLayout:"stackAll3Columns",availableViews:{imageView:{label:"Image View"},scrollView:{label:"Scroll View"},thumbnailsView:{label:"Thumbnails View"},metadataView:{label:"Metadata View"}},maxWidgetsLimit:10,mainMenu:{height:25,width:"100%"},statusBar:{show:!0,height:25,width:"100%"},scale:{height:60,maxWidth:230},widget:{height:400,width:400},widgetToolbar:{height:25},widgetStatusBar:{height:26},imageView:{height:400,width:350},scrollView:{height:400,imageLabelHeight:25,toolbarHeight:25,width:600},thumbnailsView:{height:400,thumbsMaxHeight:150,thumbsMinHeight:50,thumbsDefaultZoom:.5,width:600},metadataView:{height:400,width:600},saveController:{saveInterval:8e3},lockController:{lockProfile:"lazyZoom",notifyMaxMin:!1}},t.isValidView=function(){return t.DEFAULT_SETTINGS.availableViews.view===void 0},t.inArrayToBoolean=function(t){return-1===t?!1:!0},t.castToArray=function(t){return"string"==typeof t?[t]:t},t.getUniques=function(t){for(var e={},n=[],i=0;t.length>i;i++)e[t[i]]=!0;for(var r in e)n.push(r);return n},t.getTitlePrefix=function(t){var e=[];return t&&t.label&&e.push(t.label),e.join(" / ")},t.trimString=function(t){return t.replace(/^\s+|\s+$/g,"")},t.trimStringBy=function(t,e){return t.length>e&&(t=t.substr(0,e)+"..."),t},t.getJsonFromUrl=function(t,e){var n;return jQuery.ajax({url:t,dataType:"json",async:e||!1,success:function(t){n=t},error:function(t,e,n){console.log(t,e,n)}}),n},t.getViewLabel=function(e){var n=t.DEFAULT_SETTINGS.availableViews[e];return n&&n.label?n.label:e},t.extractLabelFromAttribute=function(t){var e=t;return e=e.replace(/^@/,""),e=e.replace(/([A-Z])/g," $1"),e=e.replace(/\s{2,}/g," "),e=e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},t.toString=function(t,e){var n="",i=e||" ";return"string"===jQuery.type(t)&&(n=t),jQuery.isArray(t)&&(n=t.join(i)),n},t.getManifestIdByUri=function(e){var n;return n=jQuery.map(t.manifests,function(t,n){return e===t.uri?n:void 0}),n[0]||n},t.getMetadataByManifestId=function(e){return t.manifests[e].metadata},t.getImagesListByManifestId=function(e){return t.manifests[e].sequences[0].imagesList},t.getCollectionTitle=function(t){return t.details.label||""},t.getImageTitles=function(t){var e=[];return jQuery.each(t,function(t,n){e.push({title:n.title})}),e},t.genUUID=function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)});return"uuid-"+t},t.throttle=function(t,e,n){var i,r,o,s=null,a=0;n!==void 0&&(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,o=t.apply(i,r)};return function(){var u=new Date;a||n.leading!==!1||(a=u);var h=e-(u-a);return i=this,r=arguments,0>=h?(clearTimeout(s),s=null,a=u,o=t.apply(i,r)):s||n.trailing===!1||(s=setTimeout(l,h)),o}},t.debounce=function(t,e,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(o,r)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(o,r)),a}}}(Mirador),jQuery.fn.scrollStop=function(t){$(this).scroll(function(){var e=this,n=$(e);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,e))})},function(t){t.ManifestsLoader=function(t){return this.getManifestsData(t)},t.ManifestsLoader.prototype={getManifestsData:function(e){var n=this,i={},r=[],o=[];return jQuery.each(e.data,function(t,e){n.hasWidgets(e)?r.unshift(t):r.push(t)}),jQuery.each(r,function(r,s){var a,l="manifest-"+t.genUUID(),u=e.data[s],h=jQuery.Deferred();jQuery.isEmptyObject(u)||(a=new t.Manifest(u.manifestUri,h),o.push(h),h.done(function(e){e&&(i[l]={uri:t.trimString(u.manifestUri),metadata:a.metadata,sequences:a.sequences,location:u.location||"-"},n.hasWidgets(u)&&t.viewer.renderWidgetsForCollection(u),t.viewer.addStatusBarMessage("left","Loaded "+u.manifestUri,600))}))}),jQuery.when.apply(null,o).done(function(){var e="Loaded "+t.viewer.numManifestsLoaded+" of "+o.length+" manifests to viewer";t.viewer.updateLoadWindowContent(),t.viewer.addStatusBarMessage("left",e,1e3,!0)}).done(function(){t.viewer.workspaceAutoSave&&t.viewer.saveController.save()}),i},hasWidgets:function(t){return t.widgets!==void 0&&t.widgets&&!jQuery.isEmptyObject(t.widgets)&&t.widgets.length>0}}}(Mirador),function(t){t.Viewer=function(e){jQuery.extend(!0,this,{id:e.id,hash:e.id,data:null,element:null,canvas:null,initialLayout:t.DEFAULT_SETTINGS.initialLayout||"cascade",layout:null,mainMenu:null,numManifestsLoaded:0,showStatusBar:t.DEFAULT_SETTINGS.statusBar.show,statusBar:null,widgets:[],collectionsListingCls:"mirador-listing-collections",mainMenuLoadWindowCls:".mirador-main-menu .load-window",workspaceAutoSave:t.DEFAULT_SETTINGS.workspaceAutoSave,lastWidgetPosition:{x:"left",y:"top",offset:0}},t.DEFAULT_SETTINGS,e),this.element=this.element||jQuery("#"+this.id),this.data&&this.create(),this.lockController=new t.LockController,this.workspaceAutoSave&&(this.saveController=new t.SaveController)},t.Viewer.prototype={create:function(){this.mainMenu=new t.MainMenu({appendTo:this.element}),this.canvas=jQuery("<div/>").addClass("mirador-viewer").appendTo(this.element),this.canvas.height(this.canvas.height()-this.mainMenu.element.outerHeight(!0)),this.showStatusBar&&(this.statusBar=new t.StatusBar({appendTo:this.element}),this.canvas.height(this.canvas.height()-this.statusBar.element.outerHeight(!0))),this.layout=new t.Layout},renderWidgetsForCollection:function(e){var n=this;jQuery.each(e.widgets,function(i,r){!jQuery.isEmptyObject(r)&&t.isValidView(r.type)&&(r.manifestId=t.getManifestIdByUri(e.manifestUri),n.addWidget(r))}),this.initialLayout!==void 0&&t.viewer.layout.applyLayout(this.initialLayout)},addWidget:function(e){jQuery.extend(!0,e,{appendTo:this.canvas,id:"mirador-widget-"+t.genUUID(),position:{my:this.getWidgetPosition()}}),this.widgets.push(new t.Widget(e))},removeWidget:function(e){jQuery.each(t.viewer.widgets,function(n,i){i&&i.id===e&&t.viewer.widgets.splice(n,1)})},loadImageView:function(e,n){t.viewer.addWidget({height:t.DEFAULT_SETTINGS.imageView.height,manifestId:e,openAt:n,type:"imageView",width:t.DEFAULT_SETTINGS.imageView.width})},loadScrollView:function(e){t.viewer.addWidget({height:t.DEFAULT_SETTINGS.scrollView.height,manifestId:e,type:"scrollView",width:t.DEFAULT_SETTINGS.scrollView.width})},loadThumbnailsView:function(e){t.viewer.addWidget({height:t.DEFAULT_SETTINGS.thumbnailsView.height,manifestId:e,type:"thumbnailsView",width:t.DEFAULT_SETTINGS.thumbnailsView.width})},loadMetadataView:function(e){t.viewer.addWidget({height:t.DEFAULT_SETTINGS.metadataView.height,manifestId:e,type:"metadataView",width:t.DEFAULT_SETTINGS.metadataView.width})},getWidgetPosition:function(){var t=25,e=this.lastWidgetPosition.x+"+"+this.lastWidgetPosition.offset,n=this.lastWidgetPosition.y+"+"+this.lastWidgetPosition.offset;return this.lastWidgetPosition.offset+=t,e+" "+n},updateLoadWindowContent:function(){var e={cssCls:this.collectionsListingCls,collections:[]},n=this.arrangeCollectionsFromManifests(),i=[];jQuery.each(n,function(t){i.push(t)}),jQuery.each(i.sort(),function(t,i){e.collections.push({location:i,list:n[i]})}),t.loadWindowContent=jQuery(t.Templates.mainMenu.loadWindowContent(e)),jQuery(this.mainMenuLoadWindowCls).tooltipster("update",t.loadWindowContent)},arrangeCollectionsFromManifests:function(){var e={};return jQuery.isEmptyObject(t.manifests)||jQuery.each(t.manifests,function(n,i){var r=i.location;e[r]===void 0&&(e[r]=[]),e[r].push({manifestId:n,collectionTitle:t.trimStringBy(t.getCollectionTitle(i.metadata),60),imageTitles:t.getImageTitles(i.sequences[0].imagesList)})}),jQuery.each(e,function(t){e[t]=e[t].sort(function(t,e){return t.collectionTitle.localeCompare(e.collectionTitle)})}),e},addStatusBarMessage:function(t,e,n,i){var r=this.statusBar.element.find(".mirador-status-bar-msg-"+t);isNaN(n)&&(n=0),i&&"boolean"!=typeof i&&(i=!0),r.text(e),i&&setTimeout(function(){r.fadeOut()},n)}}}(Mirador),function(t){t.Templates={mainMenu:{menuItems:Handlebars.compile(['<ul class="{{mainMenuCls}}">',"<li>",'<a href="javascript:;" class="bookmark-workspace" title="Bookmark Workspace">','<span class="icon-bookmark-workspace"></span>Bookmark Workspace',"</a>","</li>","<li>",'<a href="javascript:;" class="load-window" title="Load Window">','<span class="icon-load-window"></span>Load Window',"</a>","</li>","<li>",'<a href="javascript:;" class="window-options" title="Window Options">','<span class="icon-window-options"></span>Window Options',"</a>","</li>","<li>",'<a href="javascript:;" class="clear-local-storage" title="Clear saved workspace and reload">','<span class="icon-clear-local-storage"></span>',"</a>","</li>","</ul>"].join("")),windowOptionsMenu:Handlebars.compile(['<ul class="{{windowOptionsMenuCls}}">','<li><a class="cascade-all" href="javascript:;">Cascade All</a></li>','<li><a class="tile-all-vertically" href="javascript:;">Tile All Vertically</li>','<li><a class="tile-all-horizontally" href="javascript:;">Tile All Horizontally</a></li>','<li><a class="stack-all-vertically-2-cols" href="javascript:;">Stack Vertically (2 columns)</a></li>','<li><a class="stack-all-vertically-3-cols" href="javascript:;">Stack Vertically (3 columns)</a></li>','<li class="ui-state-disabled"><a href="javascript:;">Open Recent</a></li>','<li><a class="close-all" href="javascript:;">Close All</a></li>',"</ul>"].join("")),loadWindowContent:Handlebars.compile(['<fieldset class="{{cssCls}}">',"<legend>Available/Loaded manuscripts</legend>","<select>","{{#collections}}",'<optgroup label="{{location}}">',"{{#list}}",'<option value="select-{{manifestId}}">{{collectionTitle}}</option>',"{{/list}}","</optgroup>","{{/collections}}","</select><br/>",'<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>',"{{#collections}}","{{#list}}",'<ul class="ul-{{manifestId}}">',"{{#imageTitles}}",'<li><a href="javascript:;" class="image-{{../manifestId}}">{{trimTitlePrefix title}}</a></li>',"{{/imageTitles}}","</ul>","{{/list}}","{{/collections}}","</fieldset>"].join("")),clearLocalStorage:Handlebars.compile(['<div class="{{cssCls}}">',"<p>Do you want to delete your saved workspace, and reload the viewer?</p>","<p>","<a class=\"btn-cancel\" href=\"javascript: jQuery('{{selectorClearLocalStorage}}').tooltipster('hide');\">Cancel</a>",'<a class="btn-clear" href="javascript: localStorage.clear(); location.reload();">Clear</a>',"</p>","</div>"].join(""))},statusBar:{textFrames:Handlebars.compile(['<div class="mirador-status-bar-msg-left"></div>','<div class="mirador-status-bar-msg-right"></div>'].join(""))},widget:{initialLayout:Handlebars.compile(['<div class="{{widgetToolbarCls}}"></div>','<div class="{{widgetContentCls}}">Loading...</div>','<div class="{{widgetStatusBarCls}}"></div>'].join(""))},imageView:{navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-choices"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-previous"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-next"></a>',"</div>"].join("")),statusbar:Handlebars.compile(['<div class="{{statusbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-lock"></a>','<div class="mirador-image-dimensions">','<textarea rows="1" class="mirador-image-view-physical-dimensions x">400</textarea>',"<span>✕</span>",'<textarea rows="1" class="mirador-image-view-physical-dimensions y">500</textarea>','<span class="units">mm','<select class="unit-selector">','<option value="mm">millimeters</option>','<option value="cm">centimeters</option>','<option value="m">meters</option>',"</select>","</span>","</div>","</div>"].join("")),imageChoices:Handlebars.compile(['<ul class="mirador-image-view-choices">',"{{#choicesInfo}}",'<li><a href="javascript:;" class="mirador-image-view-choice" data-choice="{{label}}" data-image-url="{{imageUrl}}">{{label}}</a></li>',"{{/choicesInfo}}","</ul>"].join(""))},scrollView:{imagesFrame:Handlebars.compile(['<div class="{{frameCls}}"></div>'].join("")),listImages:Handlebars.compile(["{{#images}}",'<div id="{{id}}" class="item">','<div class="header" style="height: {{../toolbarHeight}}px">','<div id="{{id}}-osd-toolbar" class="toolbar">','<a href="javascript:;" class="enable-zoom">Enable zoom</a>',"</div>","</div>",'<div id="{{id}}-osd" class="image-instance">','<img class="static-thumb">',"</div>",'<div class="title">{{title}}</div>',"</div>","{{/images}}"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))},thumbnailsView:{listImages:Handlebars.compile(['<ul class="{{listingCssCls}} listing-thumbs">',"{{#thumbs}}","<li>",'<a href="javascript:;">','<img title="{{title}}" src="{{thumbUrl}}" height="{{../defaultHeight}}">','<div class="thumb-label">{{title}}</div>',"</a>","</li>","{{/thumbs}}","</ul>"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>',"</div>"].join(""))},metadataView:{listTerms:Handlebars.compile(['<div class="sub-title">About (Metadata about this manuscript\'s manifest file):</div>','<dl class="{{metadataListingCls}}">',"{{#each about}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Details (Metadata about physical object/intellectual work):</div>','<dl class="{{metadataListingCls}}">',"{{#each details}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Rights Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each rights}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Linking Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each links}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>"].join(""),{noEscape:!0}),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))}},Handlebars.registerHelper("trimTitlePrefix",function(t){return t=t.replace(/^Beinecke MS \w+,? \[?/,""),t=t.replace(/\]$/,"")})}(Mirador),function(t){t.MainMenuWindowOptions=function(t){jQuery.extend(!0,this,{menuContent:null,windowOptionsMenuCls:"window-options-menu"},t),this.element=this.element||jQuery("<div/>"),this.render(),this.attachEvents()},t.MainMenuWindowOptions.prototype={render:function(){this.element=jQuery(t.Templates.mainMenu.windowOptionsMenu({windowOptionsMenuCls:this.windowOptionsMenuCls}))},attachEvents:function(){var e="."+this.windowOptionsMenuCls+" .cascade-all",n="."+this.windowOptionsMenuCls+" .tile-all-vertically",i="."+this.windowOptionsMenuCls+" .tile-all-horizontally",r="."+this.windowOptionsMenuCls+" .stack-all-vertically-2-cols",o="."+this.windowOptionsMenuCls+" .stack-all-vertically-3-cols",s="."+this.windowOptionsMenuCls+" .close-all";jQuery(document).on("click",e,function(){t.viewer.layout.cascadeAll()}),jQuery(document).on("click",n,function(){t.viewer.layout.tileAllVertically()}),jQuery(document).on("click",i,function(){t.viewer.layout.tileAllHorizontally()}),jQuery(document).on("click",r,function(){t.viewer.layout.stackAllByColumns(2)}),jQuery(document).on("click",o,function(){t.viewer.layout.stackAllByColumns(3)}),jQuery(document).on("click",s,function(){t.viewer.layout.closeAll()})}}}(Mirador),function(t){t.MainMenuLoadWindow=function(t){jQuery.extend(!0,this,{element:null,width:300,collectionsListingCls:"mirador-listing-collections"},t),this.element=this.element||jQuery("<div/>"),this.attachEvents()},t.MainMenuLoadWindow.prototype={attachEvents:function(){var e="."+this.collectionsListingCls+" select",n="."+this.collectionsListingCls+" ul",i="."+this.collectionsListingCls+" a.mirador-icon-scroll-view",r="."+this.collectionsListingCls+" a.mirador-icon-metadata-view",o="."+this.collectionsListingCls+" a.mirador-icon-thumbnails-view";jQuery(document).on("change",e,function(){var t=jQuery(this).val().replace(/^select-/,"");jQuery(n).hide(),jQuery(n+".ul-"+t).show()}),jQuery(document).on("click",n,function(e){var n=e.target;if(/^image-manifest-uuid-/.test(n.className)){var i=n.className.replace(/^image-/,""),r=n.text;t.viewer.loadImageView(i,r)}}),jQuery(document).on("click",o,function(){var n=jQuery(e).val().replace(/^select-/,"");t.viewer.loadThumbnailsView(n)}),jQuery(document).on("click",i,function(){var n=jQuery(e).val().replace(/^select-/,"");t.viewer.loadScrollView(n)}),jQuery(document).on("click",r,function(){var n=jQuery(e).val().replace(/^select-/,"");t.viewer.loadMetadataView(n)})}}}(Mirador),function(t){t.MainMenu=function(e){jQuery.extend(!0,this,{element:null,mainMenuHeight:t.DEFAULT_SETTINGS.mainMenu.height,mainMenuWidth:t.DEFAULT_SETTINGS.mainMenu.width,windowOptionsMenu:null,loadWindow:null,clearLocalStorage:"",mainMenuBarCls:"mirador-main-menu-bar",mainMenuCls:"mirador-main-menu",windowOptionsMenuCls:"mirador-window-options-menu",clearLocalStorageCls:"clear-local-storage",clearLocalStorageDialogCls:"mirador-main-menu-clear-local-storage",collectionsListingCls:"mirador-listing-collections"},e),this.element=this.element||jQuery("<div/>"),this.render(),this.attachMainMenuEvents()},t.MainMenu.prototype={render:function(){this.element.addClass(this.mainMenuBarCls).height(this.mainMenuHeight).width(this.mainMenuWidth).appendTo(this.appendTo),this.element.append(t.Templates.mainMenu.menuItems({mainMenuCls:this.mainMenuCls})),this.windowOptionsMenu=new t.MainMenuWindowOptions({windowOptionsMenuCls:this.windowOptionsMenuCls}),t.loadWindowContent="Loading...",this.loadWindow=new t.MainMenuLoadWindow({collectionsListingCls:this.collectionsListingCls}),this.clearLocalStorage=t.Templates.mainMenu.clearLocalStorage({cssCls:this.clearLocalStorageDialogCls,selectorClearLocalStorage:"."+this.mainMenuCls+" ."+this.clearLocalStorageCls})},attachMainMenuEvents:function(){var t=this.element.find("."+this.mainMenuCls);selectorBookmarkWorkspace=".bookmark-workspace",selectorLoadWindow=".load-window",selectorWindowOptions=".window-options",selectorClearLocalStorage="."+this.clearLocalStorageCls,selectorWindowOptionsMenu="."+this.mainMenuBarCls+" ."+this.windowOptionsMenuCls,_this=this,t.on("click",selectorBookmarkWorkspace,function(){}),t.find(selectorLoadWindow).tooltipster({arrow:!0,content:_this.loadWindow.element,interactive:!0,position:"bottom",theme:".tooltipster-mirador"}),t.find(selectorWindowOptions).tooltipster({arrow:!0,content:_this.windowOptionsMenu.element,interactive:!0,theme:".tooltipster-mirador"}),t.find(selectorClearLocalStorage).tooltipster({arrow:!0,content:_this.clearLocalStorage,interactive:!0,theme:".tooltipster-mirador"})}}}(Mirador),function(t){t.StatusBar=function(e){jQuery.extend(!0,this,{element:null,statusBarHeight:t.DEFAULT_SETTINGS.statusBar.height,statusBarWidth:t.DEFAULT_SETTINGS.statusBar.width,statusBarBarCls:"mirador-status-bar"},e),this.element=this.element||jQuery("<div/>"),this.render()},t.StatusBar.prototype={render:function(){this.element.addClass(this.statusBarBarCls).height(this.statusBarHeight).width(this.statusBarWidth).appendTo(this.appendTo),this.element.append(t.Templates.statusBar.textFrames({}))}}}(Mirador),function(t){t.Layout=function(t){jQuery.extend(!0,this,{rowPadding:10,columnPadding:10,cascade:{x:10,y:40,offset:25}},t)},t.Layout.prototype={cascadeAll:function(){var e,n,i=this,r=0,o={};o.top=t.viewer.mainMenu.element.outerHeight(!0),o.left=this.columnPadding,jQuery.each(t.viewer.widgets,function(t,o){e=i.cascade.x+r,n=i.cascade.y+r,o.setPosition(e,n),o.moveToTop(),r+=i.cascade.offset})},tileAllVertically:function(){this.stackAllByColumns(1)},tileAllHorizontally:function(){this.stackAllByColumns(t.viewer.widgets.length)},stackAllByColumns:function(e){var n,i,r,o,s=this,a={},l=0;a.top=t.viewer.mainMenu.element.outerHeight(!0)+this.rowPadding,a.width=t.viewer.canvas.width()-this.columnPadding,a.height=t.viewer.canvas.height()-this.rowPadding,n=Math.ceil(t.viewer.widgets.length/e),i=Math.floor(a.width/e)-this.columnPadding,r=Math.ceil(a.height/n)-this.rowPadding,jQuery.each(t.viewer.widgets,function(t,n){var u=0,h=0;o=t%e,0===o&&0!==t&&++l,u=s.columnPadding+o*(s.columnPadding+i),h=a.top+l*(s.rowPadding+r),n.setPositionAndSize(u,h,i,r)})},closeAll:function(){jQuery.each(t.viewer.widgets.slice(),function(t,e){e&&e.close()})},applyLayout:function(t){switch(t){case"cascade":this.cascadeAll();break;case"tileAllVertically":this.tileAllVertically();break;case"tileAllHorizontally":this.tileAllHorizontally();break;case"stackAll2Columns":this.stackAllByColumns(2);break;case"stackAll3Columns":this.stackAllByColumns(3);break;default:this.cascadeAll()}}}}(Mirador),function(t){t.Manifest=function(e,n){jQuery.extend(!0,this,{uri:e,jsonLd:null,sequences:[],metadata:{about:{},details:{},rights:{},links:{}},showNoImageChoiceOption:t.DEFAULT_SETTINGS.showNoImageChoiceOption}),this.loadManifestDataFromURI(n)},t.Manifest.prototype={loadManifestDataFromURI:function(t){var e=this;jQuery.ajax({url:e.uri,dataType:"json",async:!0,success:function(n){e.jsonLd=n,e.sequences=e.parseSequences(),e.parseMetadata(),t.resolve(!0)},error:function(){console.log("Failed loading "+e.uri),t.resolve(!1)}}),delete this.jsonLd},parseSequences:function(){var t=this,e=[];return jQuery.each(this.jsonLd.sequences,function(n,i){"sc:Sequence"===i["@type"]&&e.push({id:i["@id"],imagesList:t.getImagesList(i)})}),e},getImagesList:function(t){var e=this,n=[];return jQuery.each(t.canvases,function(t,i){var r,o=[];"sc:Canvas"===i["@type"]&&(o=i.resources||i.images,jQuery.each(o,function(t,o){"oa:Annotation"===o["@type"]&&(r=e.getImageObject(o),r.title=i.label||"",n.push(r))}))}),n},getImageObject:function(t){var e,n=t.resource;return e=n.hasOwnProperty("@type")&&"oa:Choice"===n["@type"]?this.getImageObjWithChoices(t.resource):this.getImageProperties(n),this.showNoImageChoiceOption&&e.choices.push(this.getNoImageChoiceObj()),e},getImageProperties:function(t){var e={height:t.height||0,width:t.width||0,imageUrl:t.service["@id"].replace(/\/$/,""),choices:[],choiceLabel:t.label||"Default"};return e.aspectRatio=e.width/e.height||1,e},getImageObjWithChoices:function(t){var e,n,i=this,r=[],o=1;return jQuery.isArray(t.item)?r=t.item:r.push(t.item),e=this.getImageProperties(t["default"]),""===e.choiceLabel&&(e.choiceLabel="Choice "+o),jQuery.each(r,function(t,r){n=i.getImageProperties(r),""===n.choiceLabel&&(o+=1,n.choiceLabel="Choice "+o),e.choices.push(n)}),e},getNoImageChoiceObj:function(){return{height:0,width:0,imageUrl:null,choices:[],choiceLabel:"No Image",aspectRatio:1}},parseMetadata:function(){this.parseMetadataAbout(),this.parseMetadataDetails(),this.parseMetadataRights(),this.parseMetadataLinks(),++t.viewer.numManifestsLoaded},parseMetadataAbout:function(){this.metadata.about={"@context":this.jsonLd["@context"]||"","@id":this.jsonLd["@id"]||""}},parseMetadataDetails:function(){this.metadata.details={label:this.jsonLd.label||"",agent:this.jsonLd.agent||"",location:this.jsonLd.location||"",date:this.jsonLd.date||"",description:this.jsonLd.description||""}},parseMetadataRights:function(){this.metadata.rights={license:this.jsonLd.license||"",attribution:this.jsonLd.attribution||""}},parseMetadataLinks:function(){this.metadata.links={service:this.jsonLd.service||"",seeAlso:this.jsonLd.seeAlso||"",within:this.jsonLd.within||""}}}}(Mirador),function(t){t.Widget=function(e){jQuery.extend(!0,this,{appendTo:"body",autoOpen:!0,containerCls:".mirador-viewer",closeOnEscape:!1,content:null,draggable:!0,element:null,height:t.DEFAULT_SETTINGS.widget.height,id:null,metadataDetails:null,openAt:null,showStatusbar:!0,showToolbar:!0,statusbar:null,toolbar:null,type:"thumbnailsView",viewObj:null,widgetCls:"mirador-widget",widgetContentCls:"mirador-widget-content",widgetStatusbarCls:"mirador-widget-statusbar",widgetToolbarCls:"mirador-widget-toolbar",width:t.DEFAULT_SETTINGS.widget.width,position:{my:"left top",at:"left+50 top+50",of:".mirador-viewer",collision:"fit",within:".mirador-viewer"},dialogOptions:{resize:function(){},resizeStop:function(){},close:function(){}},dialogExtendOptions:{maximizable:!0,collapsable:!0,icons:{maximize:"ui-icon-arrow-4-diag",collapse:"ui-icon-minus"},mainMenuHeight:t.viewer.mainMenu.element.outerHeight(!0),statusBarHeight:t.viewer.statusBar.element.outerHeight(!0)}},e),this.element=this.element||jQuery("<div/>"),this.metadataDetails=t.getMetadataByManifestId(this.manifestId).details,this.imagesList=t.getImagesListByManifestId(this.manifestId),this.create(),this.attachEvents()},t.Widget.prototype={create:function(){this.dialogExtendOptions.containerCls=this.containerCls,this.element.addClass(this.widgetCls).attr("id",this.id).attr("title",this.getTitle()).appendTo(this.appendTo).dialog(this).dialog(this.dialogOptions).dialogExtend(this.dialogExtendOptions).parent().resizable({containment:this.containerCls}).draggable({containment:this.containerCls}),this.element.dialog("option","id",this.id),this.toolbar=new t.WidgetToolbar({parent:this,showToolbar:this.showToolbar}),this.statusbar=new t.WidgetStatusBar({parent:this,showStatusbar:this.showStatusbar}),this.content=new t.WidgetContent({parent:this}),this.render()},render:function(){switch(this.type){case"imageView":this.renderImageView();break;case"scrollView":this.renderScrollView();break;case"thumbnailsView":this.renderThumbnailsView();break;case"metadataView":this.renderMetadataView();break;default:}},renderImageView:function(){this.viewObj=new t.ImageView({imagesList:this.imagesList,manifestId:this.manifestId,element:this.content.element,openAt:this.openAt,parent:this}),this.viewObj.render()},renderScrollView:function(){this.viewObj=new t.ScrollView({imagesList:this.imagesList,manifestId:this.manifestId,element:this.content.element,parent:this}),this.viewObj.render()},renderThumbnailsView:function(){this.viewObj=new t.ThumbnailsView({imagesList:this.imagesList,manifestId:this.manifestId,element:this.content.element,parent:this}),this.viewObj.render()},renderMetadataView:function(){this.viewObj=new t.MetadataView({manifestId:this.manifestId,element:this.content.element,parent:this}),this.viewObj.render()},setPosition:function(t,e){this.element.dialog("option","position",[t,e])},setSize:function(t,e){this.element.dialog("option","width",t),this.element.dialog("option","height",e),this.element.trigger("dialogresize"),this.element.trigger("dialogresizestop")},setPositionAndSize:function(t,e,n,i){this.setPosition(t,e),this.setSize(n,i)},moveToTop:function(){this.element.dialog("moveToTop")},getHeight:function(){return this.element.dialog("option","height")},getWidth:function(){return this.element.dialog("option","width")},close:function(){this.element.dialog("destroy"),this.element.remove(),t.viewer.removeWidget(this.id)},attachEvents:function(){var t=this;this.element.dialog({close:function(){t.close()}})},getTitle:function(){return t.getViewLabel(this.type)+" : "+t.getTitlePrefix(this.metadataDetails)}}}(Mirador),function(t){t.WidgetToolbar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetToolbar.height,parent:null,showToolbar:!1,toolbarCls:"mirador-widget-toolbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetToolbar.prototype={create:function(){this.element.addClass(this.toolbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showToolbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.LockController=function(t){jQuery.extend(this,{translationMethod:null,lockedViews:[],lockProfile:"lazyZoom"},t)},t.LockController.prototype={LockOptions:{relativeZoom:function(t,e){t.viewport.panTo(t.viewport.getCenter()),t.viewport.zoomTo(e.leaderZoom,t.viewport.getCenter())},relativeLock:function(t,e){var n=e.leaderBounds;t.viewport.fitBounds(n)},dimensionalZoom:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,r=t.viewport.getAspectRatio()*i,o=n.x-i/2,s=n.y-r/2;console.log(r),followerTargetRect=new OpenSeadragon.Rect(o,s,i,r),console.log(followerTargetRect),console.log("updated"),t.viewport.fitBounds(followerTargetRect)},dimensionalLock:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;
var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,r=t.viewport.getAspectRatio*i,o=n.x-i/2,s=n.y-r/2;followerTargetRect=new OpenSeadragon.Rect(o,s,i,r),t.viewport.fitBounds(followerTargetRect)},lazyZoom:function(t,e){var n=t.viewport.getCenter(),i=e.leaderZoom/e.leaderOldZoom,r=t.viewport.getMaxZoom(),o=t.viewport.getMinZoom(),s=t.viewport.getZoom()*i;console.log("factor: "+i),r>=s&&s>=o?t.viewport.zoomBy(i,n):s>r?(t.viewport.zoomTo(r,n),console.log("reachedMax")):o>s&&(t.viewport.zoomTo(o,n),console.log("reachedMin"))},lazyLock:function(){}},addLockedView:function(t){lockObj={viewId:t.parent.id,rectObj:t.osd.viewport.getBounds(),zoomLevel:t.zoomLevel,width:t.width,units:t.units,viewport:t.osd.viewport},this.lockedViews.push(lockObj)},broadcast:function(t){var e=this,n=jQuery.map(e.lockedViews,function(e){return e.viewId===t?e:void 0})[0],i={leaderId:t,leaderBounds:n.viewport.getBounds(),leaderCenter:n.viewport.getCenter(),leaderOldZoom:n.zoomLevel,leaderZoom:n.viewport.getZoom(),leaderWidth:n.width,leaderContainerWidth:n.viewport.getContainerSize().x},r=jQuery.map(e.lockedViews,function(e){return e.viewId!=t?e:void 0});jQuery.each(r,function(t,n){e.LockOptions[e.lockProfile](n,i)}),n.zoomLevel=n.viewport.getZoom()},removeLockedView:function(t){for(var e=0;this.lockedViews.length>e;e++)if(this.lockedViews[e].viewId===t){this.lockedViews.splice(e,1);break}},translateCoordinates:function(){}}}(Mirador),function(t){t.Iiif={getUri:function(t){var e=t,n=/http?:\/\/stacks.stanford.edu\/image\/(\w+\/\S+)/i.exec(t);return n&&2===n.length&&(e="https://stacks.stanford.edu/image/iiif/"+encodeURIComponent(n[1])),e},getUriWithHeight:function(t,e){return t=t.replace(/\/$/,""),this.getUri(t)+"/full/,"+e+"/0/native.jpg"},prepJsonForOsd:function(t){return t.image_host=this.getImageHostUrl(t),t.scale_factors=this.packageScaleFactors(t),t.profile=t.profile.replace(/image-api\/1.\d/,"image-api"),t},getImageHostUrl:function(t){var e,n=[];return t.hasOwnProperty("image_host")||(t.image_host=t.tilesUrl||t["@id"]||"",t.hasOwnProperty("identifier")?(e=RegExp("/?"+t.identifier+"/?$","i"),t.image_host=t.image_host.replace(e,"")):(e=RegExp("(.*/)(.*)$"),n=e.exec(t.image_host),n.length>1&&(t.image_host=n[1],t.identifier=n[2]))),t.image_host},packageScaleFactors:function(t){var e=[];if(t.hasOwnProperty("scale_factors")&&jQuery.isArray(t.scale_factors))for(var n=0;t.scale_factors.length>n;n++)e.push(n);return e}}}(Mirador),function(t){t.ImageView=function(t){jQuery.extend(this,{currentImg:null,currentImgIndex:0,element:null,elemChoice:null,height:500,width:400,units:"mm",unitsLong:"Millimetres",imagesList:[],leading:!1,locked:!1,navToolbarCls:"mirador-image-view-nav-toolbar",openAt:null,zoomLevel:null,osd:null,osdBounds:null,osdCls:"mirador-osd",osdToolbarCls:"mirador-osd-toolbar",parent:null,scale:null,scaleCls:"mirador-image-scale",selectedChoice:"",statusbarCls:"mirador-image-view-statusbar",imageViewBgCls:"mirador-image-view-bg"},t),null!==this.openAt&&(this.currentImgIndex=this.getImageIndexByTitle(this.openAt)),this.parent.element.find(".mirador-widget-content").addClass(this.imageViewBgCls),this.currentImg=this.imagesList[this.currentImgIndex]},t.ImageView.prototype={render:function(){this.addToolbarNav(),this.createOpenSeadragonInstance(this.currentImg.imageUrl),this.addStatusbarNav(),this.attachWindowEvents()},createOpenSeadragonInstance:function(e,n){var i,r,o=t.Iiif.getUri(e)+"/info.json",s="mirador-osd-"+t.genUUID(),a=s+"-toolbar",l=this;this.element.find("."+this.osdCls).remove(),this.addOpenSeadragonToolBar(a),i=t.getJsonFromUrl(o,!1),r=jQuery("<div/>").addClass(this.osdCls).attr("id",s).appendTo(this.element),this.osd=t.OpenSeadragon({id:r.attr("id"),toolbar:a,tileSources:t.Iiif.prepJsonForOsd(i)}),this.osd.addHandler("open",function(){l.addScale(),l.attachOsdEvents(),l.zoomLevel=l.osd.viewport.getZoom(),n!==void 0&&l.osd.viewport.fitBounds(n)}),this.parent.element.dialog("option","title",this.getTitle()),this.parent.toolbar.element.find("."+this.osdToolbarCls+" button:last-child").hide(),this.renderChoices()},clearOpenSeadragonInstance:function(){this.element.find("."+this.osdCls).remove(),this.osd=null,this.renderChoices()},addOpenSeadragonToolBar:function(t){var e=jQuery("<div/>").addClass(this.osdToolbarCls).attr("id",t);this.parent.toolbar.element.find("."+this.osdToolbarCls).remove(),this.parent.toolbar.append(e)},renderChoices:function(){var e=this,n=[];this.clearChoices(),this.currentImg.choices.length>0&&(n.push({label:this.currentImg.choiceLabel,imageUrl:this.currentImg.imageUrl}),jQuery.each(this.currentImg.choices,function(t,e){n.push({label:e.choiceLabel,imageUrl:e.imageUrl})}),this.elemChoice.show(),this.selectedChoice=this.currentImg.choiceLabel,this.elemChoice.tooltipster({arrow:!0,content:t.Templates.imageView.imageChoices({choicesInfo:n}),functionReady:function(){e.addImageChoiceEvents()},interactive:!0,position:"bottom",theme:".tooltipster-mirador"}),this.addImageChoiceEvents())},addImageChoiceEvents:function(){var t=this,e=jQuery(document).find(".mirador-image-view-choices");e.find("li a").each(function(){jQuery(this).removeClass("mirador-image-view-choice-selected"),jQuery(this).data("choice")===t.selectedChoice&&jQuery(this).addClass("mirador-image-view-choice-selected")}),e.on("click","li a",function(n){var i=jQuery(n.target),r=jQuery.Deferred();t.storeCurrentOsdBounds(r),r.done(function(){"No Image"!==i.data("choice")?t.createOpenSeadragonInstance(i.data("image-url"),t.osdBounds):t.clearOpenSeadragonInstance()}),t.selectedChoice=i.data("choice"),e.find("li a").removeClass("mirador-image-view-choice-selected"),i.addClass("mirador-image-view-choice-selected")})},clearChoices:function(){""!==this.elemChoice.data("plugin_tooltipster")&&this.elemChoice.tooltipster("destroy"),this.elemChoice.hide()},storeCurrentOsdBounds:function(t){null!==this.parent.viewObj.osd&&(this.osdBounds=this.parent.viewObj.osd.viewport.getBounds()),t.resolve()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.imageView.navToolbar({navToolbarCls:this.navToolbarCls})),this.elemChoice=this.parent.toolbar.element.find("."+this.navToolbarCls+" .mirador-icon-choices"),this.elemChoice.hide(),this.attachNavEvents()},addStatusbarNav:function(){this.parent.statusbar.append(t.Templates.imageView.statusbar({statusbarCls:this.statusbarCls})),this.attachStatusbarEvents()},addScale:function(){this.scale=new t.WidgetScale({parent:this,showScale:!0})},getImageIndexByTitle:function(e){var n=0;return jQuery.each(this.imagesList,function(i,r){t.trimString(r.title)===t.trimString(e)&&(n=i)}),n},getTitle:function(){var e=[];return e.push(t.getViewLabel(this.parent.type)+" : "+t.getTitlePrefix(this.parent.metadataDetails)),this.currentImg.title&&e.push(this.currentImg.title),e.join(" / ")},setHeight:function(t){this.height=t},setWidth:function(t){this.width=t},next:function(){var t=this.currentImgIndex+1;this.imagesList.length>t&&(this.currentImgIndex=t,this.currentImg=this.imagesList[t],this.createOpenSeadragonInstance(this.currentImg.imageUrl))},prev:function(){var t=this.currentImgIndex-1;t>=0&&(this.currentImgIndex=t,this.currentImg=this.imagesList[t],this.createOpenSeadragonInstance(this.currentImg.imageUrl))},attachWindowEvents:function(){var t=this;this.parent.element.on({mouseenter:function(){t.leading=!0},mouseleave:function(){t.leading=!1}}),this.parent.element.dialog({resize:function(){t.osd.viewport.ensureVisible()}}),this.parent.element.bind("dialogextendmaximize dialogextendrestore",function(){t.osd.viewport.ensureVisible()})},attachOsdEvents:function(){var t=this;this.osd.addHandler("zoom",function(){t.broadcast()}),this.osd.addHandler("pan",function(){t.broadcast()})},attachNavEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-metadata-view",i=".mirador-icon-scroll-view",r=".mirador-icon-thumbnails-view",o=".mirador-icon-next",s=".mirador-icon-previous",a=this;e.on("click",s,function(){a.prev()}),e.on("click",o,function(){a.next()}),e.on("click",n,function(){t.viewer.loadMetadataView(a.manifestId)}),e.on("click",i,function(){t.viewer.loadScrollView(a.manifestId)}),e.on("click",r,function(){t.viewer.loadThumbnailsView(a.manifestId)})},attachStatusbarEvents:function(){var t=this.parent.statusbar.element.find("."+this.statusbarCls),e=".mirador-icon-lock",n=".mirador-image-view-physical-dimensions",i=".units",r=this;t.on("click",e,function(){r.locked?r.unlock():r.lock()}),t.on("keypress paste keyup",n,function(t){r.dimensionChange(t)}),t.on("input",i,function(){r.unitChange()})},broadcast:function(){this.scale.render(),null!==this.osd&&null!==this.osd.viewport&&(this.zoomLevel=this.osd.viewport.getZoom()),this.locked===!0&&this.leading===!0&&t.viewer.lockController.broadcast(this.parent.id)},reachedExtent:function(t){console.log("reached: "+t)},lock:function(){this.locked=!0,this.parent.element.parent().addClass("locked"),t.viewer.lockController.addLockedView(this.parent.viewObj)},unlock:function(){this.locked=!1,this.parent.element.parent().removeClass("locked"),t.viewer.lockController.removeLockedView(this.parent.id)},dimensionChange:function(t){var e=/[0-9]|\./.test(String.fromCharCode(t.keyCode))&&!t.shiftKey;console.log(t.type+" "+e),console.log(t),console.log("keyCode: "+t.keyCode),e||t.preventDefault(),13===(t.keyCode||t.which)&&t.target.blur();var n=this.parent.statusbar.element.find(".x").val(),i=this.parent.statusbar.element.find(".y").val();this.parent.viewObj.currentImg.aspectRatio,this.setWidth(n),this.setHeight(i),this.scale.render()},unitChange:function(){}}}(Mirador),function(t){t.ScrollView=function(e){jQuery.extend(this,{element:null,imagesList:[],currentImg:null,frameCls:"scroll-view-frame",imageItemCls:"item",parent:null,imagesFrame:null,tplData:{},toolbarHeight:t.DEFAULT_SETTINGS.scrollView.toolbarHeight,imageLabelHeight:t.DEFAULT_SETTINGS.scrollView.imageLabelHeight,maxItemHeight:0,navToolbarCls:"mirador-scroll-view-nav-toolbar"},e)},t.ScrollView.prototype={render:function(){this.element.html(""),this.setProperties(),this.loadContent(),this.attachEvents()},setProperties:function(){var e=this,n=[];jQuery.each(this.imagesList,function(i,r){var o=e.parent.element.attr("id")+"-item-"+i;n[o]={},n[o].aspectRatio=(r.width/r.height).toFixed(2),n[o].infoJsonUrl=t.Iiif.getUri(r.imageUrl)+"/info.json",n[o].imageUrl=r.imageUrl}),this.imagesList.attrs=n},appendImagesFrame:function(){this.imagesFrame=jQuery(t.Templates.scrollView.imagesFrame({frameCls:this.frameCls})),this.element.append(this.imagesFrame)},generateTemplateData:function(){var t=this,e=[];return jQuery.each(this.imagesList,function(n,i){var r=t.parent.element.attr("id")+"-item-"+n;e.push({id:r,title:i.title})}),{toolbarHeight:this.toolbarHeight,images:e}},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.scrollView.navToolbar({navToolbarCls:this.navToolbarCls}))},getMaxItemHeight:function(){var t=0;return t+=parseInt(this.imagesFrame.css("padding-top"),10),t+=parseInt(this.imagesFrame.css("padding-bottom"),10),this.imagesFrame.height()-t},loadContent:function(){this.appendImagesFrame(),this.addToolbarNav(),this.imagesFrame.append(t.Templates.scrollView.listImages(this.generateTemplateData())),this.setFrameAndItemsDimensions(),this.loadImagesInViewPort()},setFrameAndItemsDimensions:function(){var t=this,e="."+this.imageItemCls,n=this.getMaxItemHeight(),i=n-(this.toolbarHeight+this.imageLabelHeight);totalItemWidth=0,this.imagesFrame.find(e).each(function(e){var r=t.parent.element.attr("id")+"-item-"+e,o=Math.round(t.imagesList.attrs[r].aspectRatio*i),s=jQuery(this).find(".image-instance");jQuery(this).width(o).height(n),s.height(i),totalItemWidth+=jQuery(this).outerWidth(!0)}),this.imagesFrame.width(totalItemWidth+15)},loadImagesInViewPort:function(){var e=this,n=this.element.find("."+this.frameCls+" ."+this.imageItemCls),i=jQuery(this.element).width();jQuery(n).each(function(){var n,r,o=jQuery(this),s=o.attr("id"),a=o.find(".image-instance"),l=o.find(".static-thumb"),u=o.find(".enable-zoom"),h=e.isItemInViewport(i,o);a.find(".openseadragon-container").remove(),o.find(".toolbar form").remove(),u.unbind().show().click(function(){e.showOsdContent(s,l,u)}),l.height("100%").width("100%").show(),h&&(r=e.imagesList.attrs[s].imageUrl,n=t.Iiif.getUriWithHeight(r,jQuery(a).height()),l.attr("src",n))})},showOsdContent:function(e,n,i){var r;i.hide(),n.hide(),r=t.getJsonFromUrl(this.imagesList.attrs[e].infoJsonUrl,!1),t.OpenSeadragon({id:e+"-osd",toolbar:e+"-osd-toolbar",tileSources:t.Iiif.prepJsonForOsd(r)}),jQuery("#"+e+"-osd-toolbar button:last-child").hide()},isItemInViewport:function(t,e){var n=e.position().left+e.width();return n>0&&t>e.position().left},attachEvents:function(){this.attachWindowEvents(),this.attachNavEvents(),this.attachKeyboardScrollingEvents()},attachWindowEvents:function(){var t=this;this.parent.element.dialog({resizeStop:function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()}}),this.parent.element.on("dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()})},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=37,i=39,r=jQuery("#"+this.parent.id+" ."+this.frameCls);r.on("mouseenter",function(){r.data("hover",!0)}),r.on("mouseleave",function(){r.data("hover",!1)}),jQuery(document).on("keydown",function(o){var s,a=t.element.width();r.data("hover")&&(s=t.element.scrollLeft(),o.keyCode===n&&t.element.animate({scrollLeft:s-a},e),o.keyCode===i&&t.element.animate({scrollLeft:s+a},e))})},attachNavEvents:function(){var e=this,n=this.parent.toolbar.element.find("."+this.navToolbarCls),i=".mirador-icon-metadata-view",r=".mirador-icon-thumbnails-view";this.element.scrollStop(function(){e.loadImagesInViewPort()}),n.on("click",i,function(){t.viewer.loadMetadataView(e.manifestId)}),n.on("click",r,function(){t.viewer.loadThumbnailsView(e.manifestId)})}}}(Mirador),function(t){t.MetadataView=function(e){jQuery.extend(this,{currentImg:null,element:null,parent:null,metadata:null,metadataListingCls:"metadata-listing",navToolbarCls:"mirador-metadata-view-nav-toolbar"},e),this.metadata=t.getMetadataByManifestId(this.manifestId)},t.MetadataView.prototype={render:function(){var e=this,n=["about","details","rights","links"],i={metadataListingCls:this.metadataListingCls};jQuery.each(n,function(n,r){i[r]=[],jQuery.each(e.metadata[r],function(n,o){o&&""!==o&&i[r].push({label:t.extractLabelFromAttribute(n),value:e.addLinksToUris(o)})})}),this.element.append(t.Templates.metadataView.listTerms(i)),this.addToolbarNav(),this.attachEvents()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.metadataView.navToolbar({navToolbarCls:this.navToolbarCls}))},attachEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-scroll-view",i=".mirador-icon-thumbnails-view",r=this;e.on("click",n,function(){t.viewer.loadScrollView(r.manifestId)}),e.on("click",i,function(){t.viewer.loadThumbnailsView(r.manifestId)})},addLinksToUris:function(t){var e,n=/(http|ftp|https):\/\/[\w\-]+(\.[\w\-]+)+([\w.,@?\^=%&amp;:\/~+#\-]*[\w@?\^=%&amp;\/~+#\-])?/gi,i=t;return"string"==typeof t&&(e=t.match(n),e&&jQuery.each(e,function(t,e){i=i.replace(e,'<a href="'+e+'" target="_blank">'+e+"</a>")})),i}}}(Mirador),function(t){t.ThumbnailsView=function(e){jQuery.extend(this,{currentImg:null,element:null,imagesList:[],sliderCls:"thumbnails-view-slider",sliderId:"",thumbsListingCls:"",thumbsMaxHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMaxHeight,thumbsMinHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMinHeight,thumbsDefaultZoom:t.DEFAULT_SETTINGS.thumbnailsView.thumbsDefaultZoom,thumbsDefaultHeight:this.thumbsMinHeight,parent:null,navToolbarCls:"mirador-thumbnails-view-nav-toolbar"},e)},t.ThumbnailsView.prototype={render:function(){this.sliderId=this.parent.element.attr("id")+"-thumbs-slider",this.thumbsListingCls=this.parent.element.attr("id")+"-thumbs-listing",this.thumbsDefaultHeight=this.thumbsMinHeight+(this.thumbsMaxHeight-this.thumbsMinHeight)*this.thumbsDefaultZoom,this.element.html(""),this.addToolbarNav(),this.loadContent(),this.setUpSlider(),this.attachEvents()},loadContent:function(){var e=this,n={defaultHeight:this.thumbsDefaultHeight,listingCssCls:this.thumbsListingCls};n.thumbs=jQuery.map(this.imagesList,function(n){return{thumbUrl:t.Iiif.getUriWithHeight(n.imageUrl,e.thumbsMaxHeight),title:n.title}}),this.element.append(t.Templates.thumbnailsView.listImages(n))},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.thumbnailsView.navToolbar({navToolbarCls:this.navToolbarCls}))},setUpSlider:function(){var t=jQuery("<div/>").attr("id",this.sliderId).addClass(this.sliderCls).slider({max:this.thumbsMaxHeight,min:this.thumbsMinHeight,value:this.thumbsDefaultHeight,step:1});this.parent.toolbar.append(t)},attachEvents:function(){this.attachKeyboardScrollingEvents(),this.attachNavEvents()},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=38,i=40,r=this.parent.content.element;r.on("mouseenter",function(){r.data("hover",!0)}),r.on("mouseleave",function(){r.data("hover",!1)}),jQuery(document).on("keydown",function(o){var s,a=t.parent.content.element.height();r.data("hover")&&(s=t.element.scrollTop(),o.keyCode===n&&t.element.animate({scrollTop:s-a},e),o.keyCode===i&&t.element.animate({scrollTop:s+a},e))})},attachNavEvents:function(){var e="."+this.thumbsListingCls+" li img",n="."+this.thumbsListingCls+" li a",i="#"+this.sliderId,r=this.parent.toolbar.element.find("."+this.navToolbarCls),o=".mirador-icon-scroll-view",s=".mirador-icon-metadata-view",a=this;jQuery(i).on("slide",function(t,n){jQuery(e).attr("height",n.value)}),jQuery(n).on("click",function(e){var n=jQuery(e.target),i=n.attr("title");t.viewer.loadImageView(a.manifestId,i)}),r.on("click",s,function(){t.viewer.loadMetadataView(a.manifestId)}),r.on("click",o,function(){t.viewer.loadScrollView(a.manifestId)})}}}(Mirador),function(t){t.WidgetStatusBar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetStatusBar.height,parent:null,showStatusbar:!1,statusbarCls:"mirador-widget-statusbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetStatusBar.prototype={create:function(){this.element.addClass(this.statusbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showStatusbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.WidgetContent=function(t){jQuery.extend(!0,this,{appendTo:"body",element:null,contentCls:"mirador-widget-content",parent:null},t),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetContent.prototype={create:function(){var t=this;this.element.addClass(this.contentCls).height(t.getHeight()).appendTo(this.parent.element),this.parent.element.on("dialogresize dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.updateHeight()})},updateHeight:function(){this.element.height(this.getHeight())},getHeight:function(){var t=this.parent.element.height();return t-=this.parent.toolbar.element.outerHeight(!0),t-=this.parent.statusbar.element.outerHeight(!0)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.OpenSeadragon=function(t){return OpenSeadragon(jQuery.extend({preserveViewport:!0,visibilityRatio:1,minZoomLevel:0,defaultZoomLevel:0,prefixUrl:"images/openseadragon/",navImages:{zoomIn:{REST:"zoom-in.png",GROUP:"zoom-in.png",HOVER:"zoom-in-hover.png",DOWN:"zoom-in-hover.png"},zoomOut:{REST:"zoom-out.png",GROUP:"zoom-out.png",HOVER:"zoom-out-hover.png",DOWN:"zoom-out-hover.png"},home:{REST:"fit.png",GROUP:"fit.png",HOVER:"fit-hover.png",DOWN:"fit-hover.png"},fullpage:{REST:"full-screen.png",GROUP:"full-screen.png",HOVER:"full-screen-hover.png",DOWN:"full-screen-hover.png"},previous:{REST:"previous.png",GROUP:"previous.png",HOVER:"previous-hover.png",DOWN:"previous-hover.png"},next:{REST:"next.png",GROUP:"next.png",HOVER:"next-hover.png",DOWN:"next-hover.png"}}},t))}}(Mirador),function(t){t.WidgetScale=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,parent:null,height:t.DEFAULT_SETTINGS.scale.height,width:t.DEFAULT_SETTINGS.scale.maxWidth,physicalScaleWidth:null,showScale:!1,scaleCls:"mirador-image-scale",visualisation:{}},e),jQuery(this.parent.element).find("."+this.scaleCls).remove(),this.element=this.element||jQuery("<svg/>"),this.create()},t.WidgetScale.prototype={create:function(){scaleDimensions=this.calculateScaleDimensions(),visPadding=10;var t=this.width+3*visPadding,e=this.height,n=this.visualisation.scale=d3.select(this.parent.element[0]).append("svg").attr("class",this.scaleCls).attr("height",e).attr("width",t),i=this.visualisation.xScaleFunction=d3.scale.linear().domain([0,d3.max(scaleDimensions)]).range([visPadding,t-2*visPadding]),r=this.visualisation.axis=d3.svg.axis().scale(i).orient("bottom").ticks(4);n.append("g").attr("class","axis x").attr("transform","translate("+visPadding+","+(e-4.5*visPadding)+")").call(r),n.append("text").attr("class","scale-units").text(_this.parent.unitsLong).attr("transform","translate("+visPadding+","+(e-visPadding)+")"),this.hide(),this.showScale&&this.show()},append:function(t){this.element.append(t)},render:function(){return t.debounce(function(){var t=this.visualisation.scale,e=this.visualisation.axis,n=this.visualisation.xScaleFunction,i=this.calculateScaleDimensions();n.domain([0,d3.max(i)]),t.select(".x.axis").transition().duration(850).call(e)},50)}(),calculateScaleDimensions:function(){_this=this;var t,e=null,n=_this.parent.parent.element.width(),i=_this.width,r=i/n;return null!==_this.parent.osd&&null!==_this.parent.osd.viewport&&(t=_this.parent.osd.viewport.getBounds().width),physicalViewportWidth=_this.parent.width*t,e=physicalViewportWidth*r,[e]},show:function(){this.element.fadeIn()},hide:function(){this.element.fadeOut()}}}(Mirador),function(t){t.SettingsLoader=function(t){var e=this;jQuery.extend(!0,this,{config:e.load()?e.load():t})},t.SettingsLoader.prototype={load:function(){return localStorage.getItem("Mirador_data")?(console.log("session restored"),JSON.parse(localStorage.getItem("Mirador_data"))):(console.log("No saved session available"),!1)}}}(Mirador),function(t){t.SaveController=function(){jQuery.extend(!0,this,{saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval})},t.SaveController.prototype={buildJSON:function(){var e={},n={id:"viewer",data:[]},i=function(t){var e={height:t.getHeight(),width:t.getWidth(),type:t.type,position:t.position};return"imageView"===e.type&&(e.openAt=t.openAt,e.zoomState=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}(t.viewObj.osd.viewport.getBounds()),e.dimensions=[],e.lockedViews=[]),"thumbnailsView"===e.type,"scrollView"===e.type,e};return jQuery.each(t.viewer.widgets,function(t,n){e[n.manifestId]||(e[n.manifestId]=[]),e[n.manifestId].push(i(n))}),jQuery.each(t.manifests,function(i){var r={manifestUri:t.manifests[i].uri,title:t.getTitlePrefix(t.getMetadataByManifestId(i).details)[0],widgets:[],location:t.manifests[i].location||"-"};e.hasOwnProperty(i)&&(r.widgets=e[i]),n.data.push(r)}),JSON.stringify(n)},save:function(){t.viewer&&localStorage.setItem("Mirador_data",this.buildJSON()),setTimeout(function(){t.viewer.saveController.save(),t.viewer.addStatusBarMessage("right","Workspace saved at "+new Date,1e3,!1)},t.viewer?t.viewer.saveController.saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval)}}}(Mirador);